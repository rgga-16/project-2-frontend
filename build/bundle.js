var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,a;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function f(){return m(" ")}function h(){return m("")}function v(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function _(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function $(e,t,n){e.classList[n?"add":"remove"](t)}function q(e){a=e}function F(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const T=[],L=[];let S=[];const C=[],N=Promise.resolve();let O=!1;function j(e){S.push(e)}function M(e){C.push(e)}const A=new Set;let H=0;function P(){if(0!==H)return;const e=a;do{try{for(;H<T.length;){const e=T[H];H++,q(e),D(e.$$)}}catch(e){throw T.length=0,H=0,e}for(q(null),T.length=0,H=0;L.length;)L.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];A.has(t)||(A.add(t),t())}S.length=0}while(T.length);for(;C.length;)C.pop()();O=!1,A.clear(),q(e)}function D(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const E=new Set;let R;function U(){R={r:0,c:[],p:R}}function I(){R.r||o(R.c),R=R.p}function J(e,t){e&&e.i&&(E.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(E.has(e))return;E.add(e),R.c.push((()=>{E.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function B(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function z(e){e&&e.c()}function G(e,n,s,c){const{fragment:a,after_update:r}=e.$$;a&&a.m(n,s),c||j((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),r.forEach(j)}function W(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];S.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),S=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(e,t){-1===e.$$.dirty[0]&&(T.push(e),O||(O=!0,N.then(P)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(t,i,s,c,r,l,d,p=[-1]){const g=a;q(t);const m=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(g?g.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:i.target||g.$$.root};d&&d(m.root);let f=!1;if(m.ctx=s?s(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=i)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](i),f&&Y(t,e)),n})):[],m.update(),f=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();i.intro&&J(t.$$.fragment),G(t,i.target,i.anchor,i.customElement),P()}q(g)}class K{$destroy(){W(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function X(e){return new Promise((t=>setTimeout(t,e)))}function Z(e,t,n){var o="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}async function ee(e,t){const n=await fetch("/log_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:t})});if(!n.ok)throw new Error("Failed to log action");const o=await n.json();console.log(o.message)}function te(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function ne(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function oe(t){let n,o,i,s,c,a,r,p,h;return{c(){n=g("div"),o=g("span"),i=m("["),s=m(t[0]),c=m("%] "),a=m(t[1]),r=f(),p=g("div"),h=g("div"),w(o,"class","status-text svelte-e99ivy"),w(h,"class","loading-bar-progress svelte-e99ivy"),_(h,"width",t[0]+"%"),w(p,"class","loading-bar-container svelte-e99ivy"),w(n,"class","container column centered spaced svelte-e99ivy")},m(e,t){d(e,n,t),l(n,o),l(o,i),l(o,s),l(o,c),l(o,a),l(n,r),l(n,p),l(p,h)},p(e,[t]){1&t&&k(s,e[0]),2&t&&k(a,e[1]),1&t&&_(h,"width",e[0]+"%")},i:e,o:e,d(e){e&&u(n)}}}function ie(e,t,n){let{progress:o=0}=t,{status:i=""}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress),"status"in e&&n(1,i=e.status)},[o,i]}class se extends K{constructor(e){super(),Q(this,e,ie,oe,s,{progress:0,status:1})}}function ce(e,t,n){const o=e.slice();return o[57]=t[n][0],o[58]=t[n][1],o}function ae(e,t,n){const o=e.slice();return o[61]=t[n],o[63]=n,o}function re(t){let n;return{c(){n=g("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function le(e){let t,n,o,i,s,c=e[2]+1+"",a=e[1].length+"";return{c(){t=g("span"),n=m(c),o=m(" of "),i=m(a),s=m(" feedback moments highlighted")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,i),l(t,s)},p(e,t){4&t[0]&&c!==(c=e[2]+1+"")&&k(n,c),2&t[0]&&a!==(a=e[1].length+"")&&k(i,a)},d(e){e&&u(t)}}}function de(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No discussion transcript loaded. Please first record or upload your discussion.</span>",w(n,"class","centered"),_(n,"height","100%"),_(n,"width","100%")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ue(e){let t,n=e[0].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=pe(ae(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(9&i[0]){let s;for(n=e[0].transcript_list,s=0;s<n.length;s+=1){const c=ae(e,n,s);o[s]?o[s].p(c,i):(o[s]=pe(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function pe(e){let t,n,i,s,c,a,r,p,h,b,y,_,x,$,q,F,T,L,S,C,N,O,j,M=e[61].start_timestamp+"",A=e[61].end_timestamp+"",H=e[61].speaker?e[61].speaker+":":"",P=e[61].dialogue+"";function D(){return e[20](e[61])}function E(){return e[21](e[61])}return{c(){t=g("div"),n=g("span"),i=m("["),s=m(M),c=m("]"),a=m(" \n                            - \n                            "),r=g("span"),p=m("["),h=m(A),b=m("]"),y=f(),_=g("br"),x=f(),$=m(H),q=f(),F=g("span"),L=f(),S=g("br"),C=g("br"),N=f(),w(n,"class","timestamp svelte-ir33lb"),w(r,"class","timestamp svelte-ir33lb"),w(F,"id",T=e[61].id),w(F,"class","svelte-ir33lb"),w(t,"class","spaced")},m(e,o){d(e,t,o),l(t,n),l(n,i),l(n,s),l(n,c),l(t,a),l(t,r),l(r,p),l(r,h),l(r,b),l(t,y),l(t,_),l(t,x),l(t,$),l(t,q),l(t,F),F.innerHTML=P,l(t,L),l(t,S),l(t,C),l(t,N),O||(j=[v(n,"click",D),v(r,"click",E)],O=!0)},p(t,n){e=t,1&n[0]&&M!==(M=e[61].start_timestamp+"")&&k(s,M),1&n[0]&&A!==(A=e[61].end_timestamp+"")&&k(h,A),1&n[0]&&H!==(H=e[61].speaker?e[61].speaker+":":"")&&k($,H),1&n[0]&&P!==(P=e[61].dialogue+"")&&(F.innerHTML=P),1&n[0]&&T!==(T=e[61].id)&&w(F,"id",T)},d(e){e&&u(t),O=!1,o(j)}}}function ge(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[36](n)},p:e,d(e){e&&u(n),t[36](null)}}}function me(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[0].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[35](t)},p(e,o){1&o[0]&&!r(t.src,n=e[0].audio)&&w(t,"src",n)},d(n){n&&u(t),e[35](null)}}}function fe(e){let t,n,o,i;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,i=e[0].video)||w(t,"src",i),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,i){d(o,t,i),l(t,n),e[34](t)},p(e,n){1&n[0]&&!r(t.src,i=e[0].video)&&w(t,"src",i)},d(n){n&&u(t),e[34](null)}}}function he(e){let t,n,o="speaker"in e[0].transcript_list[0]&&ve(e),i=e[1]&&we(e);return{c(){o&&o.c(),t=f(),i&&i.c(),n=h()},m(e,s){o&&o.m(e,s),d(e,t,s),i&&i.m(e,s),d(e,n,s)},p(e,s){"speaker"in e[0].transcript_list[0]?o?o.p(e,s):(o=ve(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[1]?i?i.p(e,s):(i=we(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){o&&o.d(e),e&&u(t),i&&i.d(e),e&&u(n)}}}function ve(e){let t,n,o,i,s,c,a,r,h,v=Object.keys(e[0].transcript_list.reduce(Le,{})).length+"",b=Object.entries(e[0].transcript_list.reduce(Se,{})),w=[];for(let t=0;t<b.length;t+=1)w[t]=be(ce(e,b,t));return{c(){t=g("strong"),n=m("Number of participants: "),o=m(v),i=f(),s=g("br"),c=f(),a=g("ul");for(let e=0;e<w.length;e+=1)w[e].c();r=f(),h=g("br")},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,i,u),d(e,s,u),d(e,c,u),d(e,a,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(a,null);d(e,r,u),d(e,h,u)},p(e,t){if(1&t[0]&&v!==(v=Object.keys(e[0].transcript_list.reduce(Le,{})).length+"")&&k(o,v),1&t[0]){let n;for(b=Object.entries(e[0].transcript_list.reduce(Se,{})),n=0;n<b.length;n+=1){const o=ce(e,b,n);w[n]?w[n].p(o,t):(w[n]=be(o),w[n].c(),w[n].m(a,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}},d(e){e&&u(t),e&&u(i),e&&u(s),e&&u(c),e&&u(a),p(w,e),e&&u(r),e&&u(h)}}}function be(e){let t,n,o,i,s,c,a,r=e[57]+"",p=e[58]+"";return{c(){t=g("li"),n=m("- "),o=m(r),i=m(": "),s=m(p),c=m(" utterances"),a=f()},m(e,r){d(e,t,r),l(t,n),l(t,o),l(t,i),l(t,s),l(t,c),d(e,a,r)},p(e,t){1&t[0]&&r!==(r=e[57]+"")&&k(o,r),1&t[0]&&p!==(p=e[58]+"")&&k(s,p)},d(e){e&&u(t),e&&u(a)}}}function we(e){let t,n,o,i,s,c,a,r,p,h,v,b,w=e[1].length+"",y=e[1].filter(Ce).length+"",_=e[1].filter(Ne).length+"";return{c(){t=g("strong"),n=m("Number of feedback utterances: "),o=m(w),i=f(),s=g("ul"),c=g("li"),a=m("- Number of positive feedback: "),r=m(y),p=f(),h=g("li"),v=m("- Number of critical feedback: "),b=m(_)},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,i,u),d(e,s,u),l(s,c),l(c,a),l(c,r),l(s,p),l(s,h),l(h,v),l(h,b)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&k(o,w),2&t[0]&&y!==(y=e[1].filter(Ce).length+"")&&k(r,y),2&t[0]&&_!==(_=e[1].filter(Ne).length+"")&&k(b,_)},d(e){e&&u(t),e&&u(i),e&&u(s)}}}function ke(e){let t,n,i,s,c,a,p,h,b,k,y,x,q,F,T,S,C,N,O,j,A,H,P,D,E,R,U,I,Y,Q,K,X,Z,ee,te,ne,oe,ie,ce,ae,pe,ve,be,we,ke,ye,_e,xe,$e,qe,Fe,Te,Le,Se,Ce,Ne,Oe,je,Me,Ae,He,Pe,De,Ee,Re,Ue,Ie,Je,Ve,Be,ze,Ge,We,Ye,Qe,Ke,Xe,Ze,et,tt,nt,ot,it,st,ct,at,rt,lt,dt,ut,pt,gt,mt,ft,ht,vt,bt;function wt(t){e[16](t)}function kt(t){e[17](t)}let yt={};function _t(e,t){return e[1]&&e[1].length>0?le:re}void 0!==e[10]&&(yt.progress=e[10]),void 0!==e[9]&&(yt.status=e[9]),c=new se({props:yt}),L.push((()=>B(c,"progress",wt))),L.push((()=>B(c,"status",kt)));let xt=_t(e),$t=xt(e);function qt(e,t){return e[0]&&e[0].transcript_list?ue:de}let Ft=qt(e),Tt=Ft(e);function Lt(e,t){return e[0]&&e[0].video?fe:e[0]&&e[0].audio?me:ge}let St=Lt(e),Ct=St(e),Nt=e[0]&&e[0].transcript_list&&he(e);return{c(){t=g("div"),n=g("div"),i=g("div"),s=g("div"),z(c.$$.fragment),h=f(),b=g("div"),$t.c(),k=f(),y=g("button"),x=g("img"),T=f(),S=g("button"),C=g("img"),j=f(),Tt.c(),A=f(),H=g("div"),P=g("div"),D=g("span"),D.textContent="Step 1: Upload your discussion.",E=f(),R=g("div"),U=g("div"),I=g("div"),Y=g("label"),Y.textContent="Upload your own video or audio:",Q=f(),K=g("div"),X=g("input"),Z=f(),ee=g("button"),te=g("img"),oe=m("\n                                    Upload file"),ce=f(),ae=g("div"),pe=g("label"),pe.textContent="Upload your own transcript (in .srt only):",ve=f(),be=g("div"),we=g("input"),ke=f(),ye=g("button"),_e=g("img"),$e=m("\n                                    Upload file"),Fe=f(),Te=g("div"),Le=g("span"),Le.textContent="Step 2: Highlight feedback in the discussion's transcript.",Se=f(),Ce=g("div"),Ne=g("div"),Oe=g("button"),je=g("img"),Ae=m("\n                            Auto-detect "),He=g("br"),Pe=m(" Feedback"),Ee=f(),Re=g("button"),Ue=g("img"),Je=m("\n                            Highlight "),Ve=g("br"),Be=m(" Positive"),Ge=f(),We=g("button"),Ye=g("img"),Ke=m("\n                            Highlight "),Xe=g("br"),Ze=m(" Critical"),tt=f(),nt=g("button"),ot=g("img"),st=m("\n                            Remove "),ct=g("br"),at=m(" Feedback"),lt=f(),dt=g("div"),ut=g("div"),Ct.c(),pt=f(),gt=g("div"),mt=g("h3"),mt.textContent="Discussion Transcript Details",ft=f(),Nt&&Nt.c(),w(s,"class","overlay centered padded"),$(s,"invisible",!1===e[8]),r(x.src,q="./logos/up-arrow-5-svgrepo-com.svg")||w(x,"src","./logos/up-arrow-5-svgrepo-com.svg"),w(x,"alt","Prev feedback"),w(x,"class","logo"),_(x,"width","1.5rem"),_(x,"height","1.5rem"),y.disabled=F=!e[1]||e[1].length<=0,r(C.src,N="./logos/down-arrow-5-svgrepo-com.svg")||w(C,"src","./logos/down-arrow-5-svgrepo-com.svg"),w(C,"alt","Next feedback"),w(C,"class","logo"),_(C,"width","1.5rem"),_(C,"height","1.5rem"),S.disabled=O=!e[1]||e[1].length<=0,w(b,"id","traverse-feedback-area"),w(b,"class","bordered spaced svelte-ir33lb"),w(i,"id","transcript-area"),w(i,"class","column bordered spaced svelte-ir33lb"),_(D,"font-weight","bold"),_(D,"text-decoration","underline"),_(D,"margin-left","1rem"),w(Y,"for","file_upload"),_(X,"width","50%"),w(X,"name","mediafile_upload"),w(X,"type","file"),w(X,"id","mediafile_upload"),w(X,"accept","video/*, audio/*"),r(te.src,ne="./logos/upload-svgrepo-com.svg")||w(te,"src","./logos/upload-svgrepo-com.svg"),w(te,"alt","Upload file"),w(te,"class","mini-icon"),w(ee,"class","action-button centered column  svelte-ir33lb"),ee.disabled=ie=e[8]||!e[4]||0===e[4].length,w(K,"class","row centered spaced"),w(I,"class","column spaced centered"),w(pe,"for","file_upload"),w(we,"name","transcirptfile_upload"),w(we,"type","file"),w(we,"id","transcriptfile_upload"),w(we,"accept"," .srt"),r(_e.src,xe="./logos/upload-svgrepo-com.svg")||w(_e,"src","./logos/upload-svgrepo-com.svg"),w(_e,"alt","Upload file"),w(_e,"class","mini-icon"),w(ye,"class","action-button centered column  svelte-ir33lb"),ye.disabled=qe=e[8]||!e[6]||0===e[6].length,w(be,"class","row centered"),w(ae,"class","column spaced centered"),w(U,"class","row centered spaced"),w(R,"class","row centered spaced"),w(P,"id","capture-feedback-panel"),w(P,"class","column bordered padded centered spaced svelte-ir33lb"),_(Le,"font-weight","bold"),_(Le,"text-decoration","underline"),_(Le,"margin-left","1rem"),r(je.src,Me="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||w(je,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),w(je,"alt","Auto-detect Feedback"),w(je,"class","logo"),w(Oe,"class","action-button svelte-ir33lb"),Oe.disabled=De=!e[0]||!e[0].transcript_list||e[8],r(Ue.src,Ie="./logos/highlight-green-svgrepo-com.svg")||w(Ue,"src","./logos/highlight-green-svgrepo-com.svg"),w(Ue,"alt","Highlight Positive Feedback"),w(Ue,"class","logo"),w(Re,"class","action-button svelte-ir33lb"),Re.disabled=ze=!e[0]||!e[0].transcript_list||e[8],r(Ye.src,Qe="./logos/highlight-red-svgrepo-com.svg")||w(Ye,"src","./logos/highlight-red-svgrepo-com.svg"),w(Ye,"alt","Highlight Critical Feedback"),w(Ye,"class","logo"),w(We,"class","action-button svelte-ir33lb"),We.disabled=et=!e[0]||!e[0].transcript_list||e[8],r(ot.src,it="./logos/erase-svgrepo-com.svg")||w(ot,"src","./logos/erase-svgrepo-com.svg"),w(ot,"alt","De-highlight Feedback"),w(ot,"class","logo"),w(nt,"class","action-button svelte-ir33lb"),nt.disabled=rt=!e[0]||!e[0].transcript_list||e[8],w(Ne,"class","row centered spaced"),w(Ce,"class","centered"),_(Ce,"height","100%"),_(Ce,"width","100%"),w(Te,"id","feedback-highlight-panel"),w(Te,"class","column bordered spaced padded  svelte-ir33lb"),w(H,"id","transcript-buttons-area"),w(H,"class","row centered spaced svelte-ir33lb"),w(n,"id","left-panel"),w(n,"class","column spaced svelte-ir33lb"),w(ut,"id","media-player-area"),w(ut,"class","bordered centered svelte-ir33lb"),_(mt,"font-weight","bold"),_(mt,"text-decoration","underline"),w(gt,"id","feedback-details-area"),w(gt,"class","bordered padded spaced svelte-ir33lb"),_(gt,"overflow-y","auto"),w(dt,"id","right-panel"),w(dt,"class","column spaced svelte-ir33lb"),w(t,"div",""),w(t,"class","row spaced svelte-ir33lb"),w(t,"id","feedback-selector-page")},m(o,a){d(o,t,a),l(t,n),l(n,i),l(i,s),G(c,s,null),l(i,h),l(i,b),$t.m(b,null),l(b,k),l(b,y),l(y,x),l(b,T),l(b,S),l(S,C),l(i,j),Tt.m(i,null),l(n,A),l(n,H),l(H,P),l(P,D),l(P,E),l(P,R),l(R,U),l(U,I),l(I,Y),l(I,Q),l(I,K),l(K,X),e[23](X),l(K,Z),l(K,ee),l(ee,te),l(ee,oe),l(U,ce),l(U,ae),l(ae,pe),l(ae,ve),l(ae,be),l(be,we),e[27](we),l(be,ke),l(be,ye),l(ye,_e),l(ye,$e),l(H,Fe),l(H,Te),l(Te,Le),l(Te,Se),l(Te,Ce),l(Ce,Ne),l(Ne,Oe),l(Oe,je),l(Oe,Ae),l(Oe,He),l(Oe,Pe),l(Ne,Ee),l(Ne,Re),l(Re,Ue),l(Re,Je),l(Re,Ve),l(Re,Be),l(Ne,Ge),l(Ne,We),l(We,Ye),l(We,Ke),l(We,Xe),l(We,Ze),l(Ne,tt),l(Ne,nt),l(nt,ot),l(nt,st),l(nt,ct),l(nt,at),l(t,lt),l(t,dt),l(dt,ut),Ct.m(ut,null),l(dt,pt),l(dt,gt),l(gt,mt),l(gt,ft),Nt&&Nt.m(gt,null),ht=!0,vt||(bt=[v(y,"click",e[18]),v(S,"click",e[19]),v(X,"change",e[22]),v(X,"change",e[24]),v(ee,"click",e[25]),v(we,"change",e[26]),v(we,"change",e[28]),v(ye,"click",e[29]),v(Oe,"click",e[30]),v(Re,"click",e[31]),v(We,"click",e[32]),v(nt,"click",e[33])],vt=!0)},p(e,t){const n={};!a&&1024&t[0]&&(a=!0,n.progress=e[10],M((()=>a=!1))),!p&&512&t[0]&&(p=!0,n.status=e[9],M((()=>p=!1))),c.$set(n),(!ht||256&t[0])&&$(s,"invisible",!1===e[8]),xt===(xt=_t(e))&&$t?$t.p(e,t):($t.d(1),$t=xt(e),$t&&($t.c(),$t.m(b,k))),(!ht||2&t[0]&&F!==(F=!e[1]||e[1].length<=0))&&(y.disabled=F),(!ht||2&t[0]&&O!==(O=!e[1]||e[1].length<=0))&&(S.disabled=O),Ft===(Ft=qt(e))&&Tt?Tt.p(e,t):(Tt.d(1),Tt=Ft(e),Tt&&(Tt.c(),Tt.m(i,null))),(!ht||272&t[0]&&ie!==(ie=e[8]||!e[4]||0===e[4].length))&&(ee.disabled=ie),(!ht||320&t[0]&&qe!==(qe=e[8]||!e[6]||0===e[6].length))&&(ye.disabled=qe),(!ht||257&t[0]&&De!==(De=!e[0]||!e[0].transcript_list||e[8]))&&(Oe.disabled=De),(!ht||257&t[0]&&ze!==(ze=!e[0]||!e[0].transcript_list||e[8]))&&(Re.disabled=ze),(!ht||257&t[0]&&et!==(et=!e[0]||!e[0].transcript_list||e[8]))&&(We.disabled=et),(!ht||257&t[0]&&rt!==(rt=!e[0]||!e[0].transcript_list||e[8]))&&(nt.disabled=rt),St===(St=Lt(e))&&Ct?Ct.p(e,t):(Ct.d(1),Ct=St(e),Ct&&(Ct.c(),Ct.m(ut,null))),e[0]&&e[0].transcript_list?Nt?Nt.p(e,t):(Nt=he(e),Nt.c(),Nt.m(gt,null)):Nt&&(Nt.d(1),Nt=null)},i(e){ht||(J(c.$$.fragment,e),ht=!0)},o(e){V(c.$$.fragment,e),ht=!1},d(n){n&&u(t),W(c),$t.d(),Tt.d(),e[23](null),e[27](null),Ct.d(),Nt&&Nt.d(),vt=!1,o(bt)}}}async function ye(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function _e(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function xe(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const o=await n.json();return[o.audiopath,o.videopath]}async function $e(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function qe(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function Fe(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let o=e[n],i=o.id,s=o.start_timestamp,c=o.end_timestamp,a=o.dialogue;"speaker"in o&&""!=o.speaker?t+=`${i}\n${s} --\x3e ${c}\n${o.speaker}: ${a}\n\n`:t+=`${i}\n${s} --\x3e ${c}\n${a}\n\n`}return t}(e);const o=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!o.ok)throw new Error("Failed to detect feedback");return t=(await o.json()).feedback_list,console.log(t),t}function Te(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let o=e[n];if(o.id===t)return o}return console.log("Error: Can't find excerpt with id",t),null}const Le=(e,t)=>(e[t.speaker]=!0,e),Se=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),Ce=e=>"positive"===e.type,Ne=e=>"critical"===e.type;function Oe(e,t,n){let o,i,s,c,a,r,l,{recording:d}=t,{feedback_list:u}=t,p=0,g=!1,m="",f=0;async function h(){if(c){for(const e of c)if(console.log(e.type),e.type.includes("video")){if((d||"video"in d||"audio"in d||"transcript_list"in d||u.length>0)&&(d.video||d.audio||d.transcript_list)){if(!window.confirm("Uploading a new video will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=URL.createObjectURL(e);if(n(9,m="Uploading video..."),n(10,f=50),[s,i]=await xe(e),!s)throw s=null,i=null,new Error("Failed to extract audio from video");let o=await ye(s),c=null,a=null;n(9,m="Done!"),n(10,f=100),X(1500),n(10,f=0),n(0,d={video:t,audio:o,transcript:c,transcript_list:a}),s=null,i=null}else if(e.type.includes("audio")){if((d||"audio"in d||"video"in d||"transcript_list"in d||u.length>0)&&(d.audio||d.video||d.transcript_list)){if(!window.confirm("Uploading a new audio will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=URL.createObjectURL(e);n(9,m="Uploading audio..."),n(10,f=50);const o=new FormData;o.append("audio",e);const c=await fetch("/download_mic",{method:"POST",body:o});if(!c.ok)throw s=null,i=null,new Error("Failed to save uploaded audio");let a=await c.json();s=a.filepath;let r=null,l=null;n(9,m="Done!"),n(10,f=100),await X(1500),n(10,f=0),n(0,d={video:null,audio:t,transcript:r,transcript_list:l}),s=null,i=null}n(4,c=null),n(5,a.value="",a)}console.log("Recording",d),n(10,f=0),n(9,m="")}async function v(){if(r){for(const e of r)if(console.log(e.type),e.name.endsWith(".srt")){if((d||"transcript"in d||"transcript_list"in d||u.length>0)&&(d.transcript||d.transcript_list)){if(!window.confirm("Uploading a new transcript will overwrite the current transcript and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=new FileReader;t.onload=async function(e){console.log(undefined),n(8,g=!0);let t=e.target.result;console.log(t),n(9,m="Cleaning transcript..."),n(10,f=30);let o=await $e(t);await X(1500);let i=await qe(o);console.log(i),n(9,m="Saving transcript as a database (this may take a while) ... "),n(10,f=60),await _e(i),console.log("Transcript list embedded"),n(9,m="Done!"),n(10,f=100),await X(500),n(10,f=0);let s={video:null,audio:null,transcript:o,transcript_list:i};d&&("video"in d&&d.video||"audio"in d&&d.audio)?(n(0,d.transcript_list=i,d),n(0,d.transcript=o,d),n(0,d)):n(0,d=s),n(8,g=!1)},t.readAsText(e)}n(6,r=null),n(7,l.value="",l)}console.log("Recording",d),n(10,f=0),n(9,m="")}function b(e){const t=window.getSelection().toString();if(""===t.trim())return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted";if(t){let o={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},i=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let o=e[n],i=o.dialogue;if(o.speaker&&(i=o.speaker+": "+i),i.includes(t))return o}return null}(d.transcript_list,t);return i?(o.id=u.length+1,o.dialogue_id=i.id,o.speaker=i.speaker,o.excerpt_reference=i,o.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],u.push(o),n(1,u),n(0,d),y([o]),o):(console.log("Error: Corresponding transcript excerpt not found"),alert("Error: Corresponding transcript excerpt not found. Feedback not added."),"Error: Corresponding transcript excerpt not found for selection: "+t)}return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted"}function w(){const e=window.getSelection().toString();if(""===e.trim())return alert("Please highlight the feedback you want to remove using your mouse."),"Error: No text highlighted";if(e)for(let t=0;t<u.length;t++){let o=u[t];if(o.quote.includes(e)){let e=parseInt(o.dialogue_id),i=o.quote;return u.splice(t,1),n(1,u),k(e,i),o}}return"Error: Feedback not found for selection: "+e}function k(e,t){for(let o=0;o<d.transcript_list.length;o++){let i=d.transcript_list[o];if(i.id===e){let e=i.dialogue,o=e.indexOf("<mark"),s=e.indexOf("</mark>")+7,c=e.slice(0,o)+t+e.slice(s);i.dialogue=c,i.dialogue=i.dialogue,n(0,d);break}}}function y(e){for(let t=0;t<e.length;t++){let n=e[t],o=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let i,s=parseInt(n.dialogue_id);for(let e=0;e<d.transcript_list.length;e++){let t=d.transcript_list[e];if(t.id===s){i=t;break}}if(!i){console.log("Error: Corresponding transcript excerpt not found");continue}let c=i.dialogue,a=c.indexOf(n.quote),r=a+n.quote.length,l=c.slice(0,a)+`<mark class="${o}" style="background-color:${"positive"===o?"lightgreen":"lightcoral"};">${n.quote}</mark>`+c.slice(r);i.dialogue=l}n(0,d)}F((async()=>{}));return e.$$set=e=>{"recording"in e&&n(0,d=e.recording),"feedback_list"in e&&n(1,u=e.feedback_list)},[d,u,p,o,c,a,r,l,g,m,f,h,v,b,w,y,function(e){f=e,n(10,f)},function(e){m=e,n(9,m)},async()=>{p>0?n(2,p--,p):n(2,p=u.length-1),ne(u[p]),await ee("FeedbackSelector: Traverse to previous feedback",u[p])},async()=>{p<u.length-1?n(2,p++,p):n(2,p=0),ne(u[p]),await ee("FeedbackSelector: Traverse to next feedback",u[p])},async e=>{te(e.start_timestamp,o),await ee("FeedbackSelector: Seeked to start timestamp",e.start_timestamp)},async e=>{te(e.end_timestamp,o),await ee("FeedbackSelector: Seeked to end timestamp",e.end_timestamp)},function(){c=this.value,n(4,c)},function(e){L[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},async e=>{n(4,c=e.target.files),await ee("FeedbackSelector: Select media file",c)},async()=>{n(8,g=!0),await h(),n(8,g=!1),await ee("FeedbackSelector: Upload media",d)},function(){r=this.value,n(6,r)},function(e){L[e?"unshift":"push"]((()=>{l=e,n(7,l)}))},async e=>{n(6,r=e.target.files),await ee("FeedbackSelector: Select transcript file",r)},async()=>{n(8,g=!0),await v(),n(8,g=!1),await ee("FeedbackSelector: Upload transcript",d)},async()=>{if(u.length>0){if(!window.confirm("Auto-detecting again will clear all feedback highlighted. Do you want to proceed?"))return}n(8,g=!0),n(10,f=0);let e=d.transcript_list,t=Math.ceil(e.length/4),o=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(9,m="Detecting feedback in transcript ...");for(let e=0;e<o.length;e++){let t=await Fe(o[e]);n(1,u=u.concat(t)),n(10,f=20*(e+1)),await X(250)}n(1,u),console.log(u);for(let e=0;e<u.length;e++){n(1,u[e].id=e+1,u);let t=u[e].dialogue_id,o=Te(d.transcript_list,t);n(1,u[e].excerpt_reference=o,u)}n(1,u),n(9,m="Highlighting feedback ..."),y(u),await X(500),n(10,f=100),console.log("Feedback: "+u[0]),n(8,g=!1),n(10,f=0),n(9,m=""),await ee("FeedbackSelector: Auto-detect feedback",u)},async()=>{let e=b("positive");await ee("FeedbackSelector: Add positive feedback",e)},async()=>{let e=b("critical");await ee("FeedbackSelector: Add critical feedback",e)},async()=>{let e=w();await ee("FeedbackSelector: Remove feedback",e)},function(e){L[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class je extends K{constructor(e){super(),Q(this,e,Oe,ke,s,{recording:0,feedback_list:1},null,[-1,-1,-1])}}function Me(t){let n,i,s,c,a,r,p;return{c(){n=g("div"),i=g("input"),s=f(),c=g("span"),a=m(t[0]),w(i,"type","range"),w(i,"min",t[1]),w(i,"max",t[2]),w(i,"step",t[3]),w(i,"id","rangeSlider"),w(i,"class","svelte-ohnqtn"),w(c,"id","sliderValue"),w(n,"class","centered spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),l(n,i),y(i,t[0]),l(n,s),l(n,c),l(c,a),r||(p=[v(i,"change",t[4]),v(i,"input",t[4])],r=!0)},p(e,[t]){2&t&&w(i,"min",e[1]),4&t&&w(i,"max",e[2]),8&t&&w(i,"step",e[3]),1&t&&y(i,e[0]),1&t&&k(a,e[0])},i:e,o:e,d(e){e&&u(n),r=!1,o(p)}}}function Ae(e,t,n){let{min:o=0}=t,{max:i=2}=t,{step:s=.1}=t,{value:c=1}=t;return e.$$set=e=>{"min"in e&&n(1,o=e.min),"max"in e&&n(2,i=e.max),"step"in e&&n(3,s=e.step),"value"in e&&n(0,c=e.value)},[c,o,i,s,function(){c=function(e){return""===e?null:+e}(this.value),n(0,c)}]}class He extends K{constructor(e){super(),Q(this,e,Ae,Me,s,{min:1,max:2,step:3,value:0})}}function Pe(e,t,n){const o=e.slice();return o[120]=t[n],o}function De(e,t,n){const o=e.slice();return o[123]=t[n],o[111]=n,o}function Ee(e,t,n){const o=e.slice();return o[123]=t[n],o[111]=n,o}function Re(e,t,n){const o=e.slice();return o[115]=t[n],o[111]=n,o}function Ue(e,t,n){const o=e.slice();return o[117]=t[n],o}function Ie(e,t,n){const o=e.slice();return o[112]=t[n],o}function Je(e,t,n){const o=e.slice();return o[109]=t[n],o[111]=n,o}function Ve(e,t,n){const o=e.slice();return o[126]=t[n],o[111]=n,o}function Be(e,t,n){const o=e.slice();return o[128]=t[n],o[111]=n,o}function ze(e,t,n){const o=e.slice();return o[128]=t[n],o[129]=t,o[111]=n,o}function Ge(e,t,n){const o=e.slice();return o[126]=t[n],o[111]=n,o}function We(e){let t,n,o,i,s=e[126]+"";function c(){return e[46](e[111])}return{c(){t=g("button"),n=m(s),w(t,"class","tab svelte-o0vqi5"),$(t,"active",e[111]===e[13]),$(t,"right-bordered",e[111]<e[32].length-1)},m(e,s){d(e,t,s),l(t,n),o||(i=v(t,"click",c),o=!0)},p(n,o){e=n,8192&o[0]&&$(t,"active",e[111]===e[13])},d(e){e&&u(t),o=!1,i()}}}function Ye(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=nt(Be(e,n,t));return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","grid svelte-o0vqi5"),_(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(6657&i[0]|16&i[1]){let s;for(n=e[0],s=0;s<n.length;s+=1){const c=Be(e,n,s);o[s]?o[s].p(c,i):(o[s]=nt(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function Qe(e){let t,n,i,s,c,a,m,h,b,k,y,x,$,q,F,T,L,S,C,N,O,j,M,A,H,P;function D(e,t){return e[28]&&"quote"===e[27]?it:ot}let E=D(e),R=E(e);function U(e,t){return e[28]&&"speaker"===e[27]?ct:st}let I=U(e),J=I(e),V=e[0],B=[];for(let t=0;t<V.length;t+=1)B[t]=ft(ze(e,V,t));return{c(){t=g("div"),n=g("div"),i=g("span"),i.innerHTML="<strong>ID</strong>",s=f(),c=g("span"),a=g("strong"),a.textContent="Feedback",m=f(),h=g("button"),R.c(),b=f(),k=g("span"),y=g("strong"),y.textContent="Speaker",x=f(),$=g("button"),J.c(),q=f(),F=g("span"),F.innerHTML="<strong>Actions</strong>",T=f(),L=g("span"),S=g("strong"),S.textContent="Done?",C=f(),N=g("button"),O=g("img"),A=f();for(let e=0;e<B.length;e+=1)B[e].c();w(i,"class","centered id-col svelte-o0vqi5"),w(h,"class","action-button"),w(c,"class","centered row spaced feedback-col svelte-o0vqi5"),w($,"class","action-button"),w(k,"class","centered row spaced speaker-col svelte-o0vqi5"),w(F,"id","feedback-buttons"),w(F,"class","centered row actions-col svelte-o0vqi5"),_(O,"height","1rem"),_(O,"width","1rem"),r(O.src,j=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||w(O,"src",j),w(O,"alt",M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending"),w(O,"class","mini-icon"),w(N,"class","action-button"),w(L,"class","centered row spaced done-col svelte-o0vqi5"),w(n,"class","feedback-header row svelte-o0vqi5"),w(t,"class","column"),_(t,"overflow-y","auto")},m(o,r){d(o,t,r),l(t,n),l(n,i),l(n,s),l(n,c),l(c,a),l(c,m),l(c,h),R.m(h,null),l(n,b),l(n,k),l(k,y),l(k,x),l(k,$),J.m($,null),l(n,q),l(n,F),l(n,T),l(n,L),l(L,S),l(L,C),l(L,N),l(N,O),l(t,A);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(t,null);H||(P=[v(h,"click",e[47]),v($,"click",e[48]),v(N,"click",e[49])],H=!0)},p(e,n){if(E!==(E=D(e))&&(R.d(1),R=E(e),R&&(R.c(),R.m(h,null))),I!==(I=U(e))&&(J.d(1),J=I(e),J&&(J.c(),J.m($,null))),402653184&n[0]&&!r(O.src,j=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&w(O,"src",j),402653184&n[0]&&M!==(M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending")&&w(O,"alt",M),39441&n[0]|280&n[1]){let o;for(V=e[0],o=0;o<V.length;o+=1){const i=ze(e,V,o);B[o]?B[o].p(i,n):(B[o]=ft(i),B[o].c(),B[o].m(t,null))}for(;o<B.length;o+=1)B[o].d(1);B.length=V.length}},d(e){e&&u(t),R.d(),J.d(),p(B,e),H=!1,o(P)}}}function Ke(e){let t,n,i,s,c,a,r,p,h,b,y,_,x,q,F,T,L,S,C=e[128].quote+"",N=e[128].speaker+"";function O(e,t){return"excerpt_reference"in e[128]?Ze:Xe}let j=O(e),M=j(e);function A(){return e[59](e[128])}function H(...t){return e[60](e[128],...t)}return{c(){t=g("div"),n=g("span"),M.c(),i=f(),s=g("br"),c=f(),a=g("p"),r=m('"'),p=m(C),h=m('"'),b=f(),y=g("br"),_=f(),x=g("span"),q=m("- "),F=m(N),T=f(),w(n,"class","timestamp svelte-o0vqi5"),w(t,"class","positive-feedback-note svelte-o0vqi5"),$(t,"selected",e[128]===e[11])},m(e,o){d(e,t,o),l(t,n),M.m(n,null),l(t,i),l(t,s),l(t,c),l(t,a),l(a,r),l(a,p),l(a,h),l(t,b),l(t,y),l(t,_),l(t,x),l(x,q),l(x,F),l(t,T),L||(S=[v(n,"click",A),v(t,"click",H)],L=!0)},p(o,i){j===(j=O(e=o))&&M?M.p(e,i):(M.d(1),M=j(e),M&&(M.c(),M.m(n,null))),1&i[0]&&C!==(C=e[128].quote+"")&&k(p,C),1&i[0]&&N!==(N=e[128].speaker+"")&&k(F,N),2049&i[0]&&$(t,"selected",e[128]===e[11])},d(e){e&&u(t),M.d(),L=!1,o(S)}}}function Xe(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Ze(e){let t;function n(e,t){return"start_timestamp"in e[128].excerpt_reference?tt:et}let o=n(e),i=o(e);return{c(){i.c(),t=h()},m(e,n){i.m(e,n),d(e,t,n)},p(e,s){o===(o=n(e))&&i?i.p(e,s):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function et(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function tt(e){let t,n,o,i=e[128].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(i),o=m("]")},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i)},p(e,t){1&t[0]&&i!==(i=e[128].excerpt_reference.start_timestamp+"")&&k(n,i)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function nt(e){let t,n="positive"===e[128].type&&Ke(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"positive"===e[128].type?n?n.p(e,o):(n=Ke(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function ot(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function it(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function st(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ct(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function at(e){let t,n,i,s,c,a,r,p,h,b,y,_,x,q,F,T,L,S,C,N,O,j,M,A,H,P,D,E=e[128].id+"",R=(e[128].speaker?e[128].speaker:"Unknown")+"";function U(e,t){return"excerpt_reference"in e[128]?lt:rt}let I=U(e),J=I(e);function V(){return e[50](e[128])}function B(e,t){return e[128].positivised_quote&&e[128].show_paraphrased?gt:pt}let z=B(e),G=z(e);function W(){return e[53](e[128],e[129],e[111])}function Y(){return e[54](e[128])}function Q(){return e[55](e[128])}function K(){return e[56](e[128])}function X(){e[57].call(A,e[129],e[111])}function Z(...t){return e[58](e[128],...t)}return{c(){t=g("div"),n=g("span"),i=g("strong"),s=m(E),c=f(),a=g("div"),r=g("span"),p=g("span"),J.c(),h=f(),G.c(),b=f(),y=g("span"),_=m(R),x=f(),q=g("div"),F=g("button"),F.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon"/>\n                                            Positivize',T=f(),L=g("button"),L.innerHTML='<img src="./logos/add-ellipse-svgrepo-com.svg" alt="Add feedback as context" class="action-icon"/>\n                                            Select Context',S=f(),C=g("button"),C.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Add Note',N=f(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Delete',j=f(),M=g("span"),A=g("input"),H=f(),w(n,"class","id-col svelte-o0vqi5"),w(p,"class","timestamp svelte-o0vqi5"),w(r,"class",""),w(a,"class","column feedback-col svelte-o0vqi5"),w(y,"class","centered speaker-col svelte-o0vqi5"),w(F,"class","action-button"),w(L,"class","action-button centered column"),w(C,"class","action-button"),w(O,"class","action-button"),w(q,"id","feedback-buttons"),w(q,"class","row centered spaced actions-col svelte-o0vqi5"),w(A,"type","checkbox"),w(M,"class","centered done-col svelte-o0vqi5"),w(t,"class","feedback-row row bordered padded svelte-o0vqi5"),$(t,"done",e[128].done),$(t,"selected",e[128]===e[11])},m(o,u){d(o,t,u),l(t,n),l(n,i),l(i,s),l(t,c),l(t,a),l(a,r),l(r,p),J.m(p,null),l(r,h),G.m(r,null),l(t,b),l(t,y),l(y,_),l(t,x),l(t,q),l(q,F),l(q,T),l(q,L),l(q,S),l(q,C),l(q,N),l(q,O),l(t,j),l(t,M),l(M,A),A.checked=e[128].done,l(t,H),P||(D=[v(p,"click",V),v(F,"click",W),v(L,"click",Y),v(C,"click",Q),v(O,"click",K),v(A,"change",X),v(t,"click",Z)],P=!0)},p(n,o){e=n,1&o[0]&&E!==(E=e[128].id+"")&&k(s,E),I===(I=U(e))&&J?J.p(e,o):(J.d(1),J=I(e),J&&(J.c(),J.m(p,null))),z===(z=B(e))&&G?G.p(e,o):(G.d(1),G=z(e),G&&(G.c(),G.m(r,null))),1&o[0]&&R!==(R=(e[128].speaker?e[128].speaker:"Unknown")+"")&&k(_,R),1&o[0]&&(A.checked=e[128].done),1&o[0]&&$(t,"done",e[128].done),2049&o[0]&&$(t,"selected",e[128]===e[11])},d(e){e&&u(t),J.d(),G.d(),P=!1,o(D)}}}function rt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function lt(e){let t;function n(e,t){return"start_timestamp"in e[128].excerpt_reference?ut:dt}let o=n(e),i=o(e);return{c(){i.c(),t=h()},m(e,n){i.m(e,n),d(e,t,n)},p(e,s){o===(o=n(e))&&i?i.p(e,s):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function dt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ut(e){let t,n,o,i=e[128].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(i),o=m("]")},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i)},p(e,t){1&t[0]&&i!==(i=e[128].excerpt_reference.start_timestamp+"")&&k(n,i)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function pt(e){let t,n,o,i,s=e[128].quote+"",c=e[128].positivised_quote&&!e[128].show_paraphrased&&mt(e);return{c(){t=m('"'),n=m(s),o=m('" '),c&&c.c(),i=h()},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s),c&&c.m(e,s),d(e,i,s)},p(e,t){1&t[0]&&s!==(s=e[128].quote+"")&&k(n,s),e[128].positivised_quote&&!e[128].show_paraphrased?c?c.p(e,t):(c=mt(e),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(e){e&&u(t),e&&u(n),e&&u(o),c&&c.d(e),e&&u(i)}}}function gt(e){let t,n,o,i,s,c,a,r=e[128].positivised_quote+"";function l(){return e[51](e[128])}return{c(){t=g("strong"),t.textContent="(Paraphrased Feedback)",n=m(' "'),o=m(r),i=m('" \n                                                '),s=g("span"),s.textContent="(View original quote)",w(s,"class","clickable svelte-o0vqi5")},m(e,r){d(e,t,r),d(e,n,r),d(e,o,r),d(e,i,r),d(e,s,r),c||(a=v(s,"click",l),c=!0)},p(t,n){e=t,1&n[0]&&r!==(r=e[128].positivised_quote+"")&&k(o,r)},d(e){e&&u(t),e&&u(n),e&&u(o),e&&u(i),e&&u(s),c=!1,a()}}}function mt(e){let t,n,o;function i(){return e[52](e[128])}return{c(){t=g("span"),t.textContent="(View paraphrased quote)",w(t,"class","clickable svelte-o0vqi5")},m(e,s){d(e,t,s),n||(o=v(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function ft(e){let t,n="critical"===e[128].type&&at(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"critical"===e[128].type?n?n.p(e,o):(n=at(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function ht(e){let t,n,o,i,s=e[126]+"";function c(){return e[61](e[111])}return{c(){t=g("button"),n=m(s),w(t,"class","tab svelte-o0vqi5"),$(t,"active",e[111]===e[12]),$(t,"right-bordered",e[111]<e[33].length-1)},m(e,s){d(e,t,s),l(t,n),o||(i=v(t,"click",c),o=!0)},p(n,o){e=n,4096&o[0]&&$(t,"active",e[111]===e[12])},d(e){e&&u(t),o=!1,i()}}}function vt(t){let n,i,s,c,a,r,p,m,h,b,k,y,x,q,F,T,L;function S(e,t){return e[3].length>0?yt:kt}let C=S(t),N=C(t),O=t[29]&&xt(t);function j(e,t){return 16&t[0]&&(F=null),null==F&&(F=!!(Object.keys(e[4]).length>0)),F?qt:$t}let M=j(t,[-1,-1,-1,-1,-1]),A=M(t);return{c(){n=g("div"),i=g("div"),s=g("div"),s.innerHTML='<span style="text-decoration: underline;"><strong>My Notes</strong></span>',c=f(),a=g("div"),N.c(),r=f(),O&&O.c(),p=f(),m=g("div"),h=g("button"),h.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                    Add Note',b=f(),k=g("button"),k.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                    Delete all',y=f(),x=g("div"),x.innerHTML='<span style="text-decoration: underline;"><strong>My Feedback Notes</strong></span>',q=f(),A.c(),w(s,"class","row centered"),_(s,"width","100%"),_(s,"height","auto"),w(a,"class","column bordered"),_(a,"width","100%"),_(a,"height","auto"),$(a,"centered",t[3].length<=0),w(h,"class","action-button centered column"),w(k,"class","action-button centered column"),w(m,"class","row centered spaced"),w(i,"class","column centered spaced padded"),_(i,"width","100%"),_(i,"height","auto"),w(x,"class","row centered"),_(x,"width","100%"),_(x,"height","auto"),w(n,"class","column spaced padded"),_(n,"width","100%"),_(n,"height","100%"),_(n,"overflow-y","auto")},m(e,o){d(e,n,o),l(n,i),l(i,s),l(i,c),l(i,a),N.m(a,null),l(a,r),O&&O.m(a,null),l(i,p),l(i,m),l(m,h),l(m,b),l(m,k),l(n,y),l(n,x),l(n,q),A.m(n,null),T||(L=[v(h,"click",t[98]),v(k,"click",t[99])],T=!0)},p(e,t){C===(C=S(e))&&N?N.p(e,t):(N.d(1),N=C(e),N&&(N.c(),N.m(a,r))),e[29]?O?O.p(e,t):(O=xt(e),O.c(),O.m(a,null)):O&&(O.d(1),O=null),8&t[0]&&$(a,"centered",e[3].length<=0),M===(M=j(e,t))&&A?A.p(e,t):(A.d(1),A=M(e),A&&(A.c(),A.m(n,null)))},i:e,o:e,d(e){e&&u(n),N.d(),O&&O.d(),A.d(),T=!1,o(L)}}}function bt(e){let t,n,o,i,s,c,a,p,m,h,b,k;const y=[Ot,Nt],x=[];function $(e,t){return e[5]?1:0}return p=$(e),m=x[p]=y[p](e),{c(){t=g("div"),n=g("div"),o=g("button"),i=g("img"),a=f(),m.c(),w(i,"class","action-icon"),r(i.src,s=e[5]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg")||w(i,"src",s),w(i,"alt",c=e[5]?"Exit hatbot settings":"Open chatbot settings"),_(i,"width","2.5rem"),_(i,"height","2.5rem"),w(o,"class","action-button"),w(n,"id","chatbot-header"),w(n,"class","padded row svelte-o0vqi5"),w(t,"id","chatbot-tab-content"),w(t,"class","column svelte-o0vqi5")},m(s,c){d(s,t,c),l(t,n),l(n,o),l(o,i),l(t,a),x[p].m(t,null),h=!0,b||(k=v(o,"click",e[67]),b=!0)},p(e,n){(!h||32&n[0]&&!r(i.src,s=e[5]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg"))&&w(i,"src",s),(!h||32&n[0]&&c!==(c=e[5]?"Exit hatbot settings":"Open chatbot settings"))&&w(i,"alt",c);let o=p;p=$(e),p===o?x[p].p(e,n):(U(),V(x[o],1,1,(()=>{x[o]=null})),I(),m=x[p],m?m.p(e,n):(m=x[p]=y[p](e),m.c()),J(m,1),m.m(t,null))},i(e){h||(J(m),h=!0)},o(e){V(m),h=!1},d(e){e&&u(t),x[p].d(),b=!1,k()}}}function wt(t){let n,o,i,s;function c(e,t){return e[2]&&e[2].video?Yt:e[2]&&e[2].audio?Wt:Gt}let a=c(t),r=a(t),p=t[2]&&t[2].transcript&&Qt(t);return{c(){n=g("div"),o=g("div"),r.c(),i=f(),s=g("div"),p&&p.c(),w(o,"id","media-player-area"),w(o,"class","bordered svelte-o0vqi5"),w(s,"id","transcript-area"),w(s,"class","column bordered spaced svelte-o0vqi5"),w(n,"class","column padded spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,t){d(e,n,t),l(n,o),r.m(o,null),l(n,i),l(n,s),p&&p.m(s,null)},p(e,t){a===(a=c(e))&&r?r.p(e,t):(r.d(1),r=a(e),r&&(r.c(),r.m(o,null))),e[2]&&e[2].transcript?p?p.p(e,t):(p=Qt(e),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&u(n),r.d(),p&&p.d()}}}function kt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded space-between centered")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function yt(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=_t(Ee(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(8&i[0]|8192&i[1]){let s;for(n=e[3],s=0;s<n.length;s+=1){const c=Ee(e,n,s);o[s]?o[s].p(c,i):(o[s]=_t(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function _t(e){let t,n,o,i,s,c,a,r,p,h=e[123]+"";function b(){return e[94](e[111],e[123])}return{c(){t=g("div"),n=g("p"),o=m(h),i=f(),s=g("div"),c=g("button"),c.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Delete note" class="mini-icon"/>',a=f(),w(c,"class","action-button"),w(s,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,i),l(t,s),l(s,c),l(t,a),r||(p=v(c,"click",b),r=!0)},p(t,n){e=t,8&n[0]&&h!==(h=e[123]+"")&&k(o,h)},d(e){e&&u(t),r=!1,p()}}}function xt(e){let t,n,i,s,c,a,r,p,m;return{c(){t=g("div"),n=g("input"),i=f(),s=g("div"),c=g("button"),c.textContent="Confirm",a=f(),r=g("button"),r.textContent="Cancel",w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action-button"),w(r,"class","action-button"),w(s,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),p||(m=[v(n,"input",e[95]),v(c,"click",e[96]),v(r,"click",e[97])],p=!0)},p(e,t){1073741824&t[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(m)}}}function $t(t){let n;return{c(){n=g("div"),n.innerHTML='<div class="row space-between centered" style="width:100%; height:auto;"><span>No feedback notes added. Feel free to add notes on your feedback by clicking &quot;Add Note&quot; on any of the critical feedback.</span></div>',w(n,"class","column centered spaced padded"),_(n,"width","100%"),_(n,"height","auto")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function qt(e){let t,n=Object.keys(e[4]).map(Number).sort(en),o=[];for(let t=0;t<n.length;t+=1)o[t]=Ct(Pe(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(1073741841&i[0]|24576&i[1]){let s;for(n=Object.keys(e[4]).map(Number).sort(en),s=0;s<n.length;s+=1){const c=Pe(e,n,s);o[s]?o[s].p(c,i):(o[s]=Ct(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Ft(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded centered space-between")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Tt(e){let t,n=e[4][e[120]].notes,o=[];for(let t=0;t<n.length;t+=1)o[t]=Lt(De(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(16&i[0]|8192&i[1]){let s;for(n=e[4][e[120]].notes,s=0;s<n.length;s+=1){const c=De(e,n,s);o[s]?o[s].p(c,i):(o[s]=Lt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Lt(e){let t,n,o,i,s,c,a,p,h,b,y,_,x=e[123]+"";function $(){return e[101](e[111],e[120],e[123])}return{c(){t=g("div"),n=g("p"),o=m(x),i=f(),s=g("div"),c=g("button"),a=g("img"),b=f(),r(a.src,p="./logos/delete-x-svgrepo-com.svg")||w(a,"src","./logos/delete-x-svgrepo-com.svg"),w(a,"alt",h="Delete note from Feedback ID"+e[120]),w(a,"class","mini-icon"),w(c,"class","action-button"),w(s,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(t,i),l(t,s),l(s,c),l(c,a),l(t,b),y||(_=v(c,"click",$),y=!0)},p(t,n){e=t,16&n[0]&&x!==(x=e[123]+"")&&k(o,x),16&n[0]&&h!==(h="Delete note from Feedback ID"+e[120])&&w(a,"alt",h)},d(e){e&&u(t),y=!1,_()}}}function St(e){let t,n,i,s,c,a,r,p,m;function h(){return e[103](e[120])}function b(){return e[104](e[120])}return{c(){t=g("div"),n=g("input"),i=f(),s=g("div"),c=g("button"),c.textContent="Confirm",a=f(),r=g("button"),r.textContent="Cancel",w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action=button"),w(r,"class","action=button"),w(s,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),p||(m=[v(n,"input",e[102]),v(c,"click",h),v(r,"click",b)],p=!0)},p(t,o){e=t,1073741824&o[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(m)}}}function Ct(e){let t,n,i,s,c,a,r,p,h,b,y,x,q,F,T,L,S,C,N,O,j,M,A,H,P=e[120]+"",D=e[0][e[120]-1].quote.slice(0,70)+"";function E(){return e[100](e[120])}function R(e,t){return e[4][e[120]].notes.length>0?Tt:Ft}let U=R(e),I=U(e),J=e[4][e[120]].is_adding&&St(e);function V(){return e[105](e[120])}function B(){return e[106](e[120])}return{c(){t=g("div"),n=g("div"),i=g("span"),s=g("strong"),c=m("Feedback #"),a=m(P),r=m(" Notes:"),p=f(),h=m(D),b=m("..."),y=f(),x=g("button"),x.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove feedback notes section" class="mini-icon"/>',q=f(),F=g("div"),I.c(),T=f(),J&&J.c(),L=f(),S=g("div"),C=g("button"),C.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                            Add Note',N=f(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                            Delete all',j=f(),w(x,"class","action-button"),w(n,"class","row space-between"),_(n,"width","100%"),_(n,"height","auto"),w(F,"class","column bordered"),_(F,"width","100%"),_(F,"height","auto"),$(F,"centered",e[4][e[120]].notes.length<=0),w(C,"class","action-button centered column"),w(O,"class","action-button centered column"),w(S,"class","row centered spaced"),w(t,"id",M="feedback-note-section-"+e[120]),w(t,"class","column centered spaced padded svelte-o0vqi5"),_(t,"width","100%"),_(t,"height","auto")},m(e,o){d(e,t,o),l(t,n),l(n,i),l(i,s),l(s,c),l(s,a),l(s,r),l(i,p),l(i,h),l(i,b),l(n,y),l(n,x),l(t,q),l(t,F),I.m(F,null),l(F,T),J&&J.m(F,null),l(t,L),l(t,S),l(S,C),l(S,N),l(S,O),l(t,j),A||(H=[v(x,"click",E),v(C,"click",V),v(O,"click",B)],A=!0)},p(n,o){e=n,16&o[0]&&P!==(P=e[120]+"")&&k(a,P),17&o[0]&&D!==(D=e[0][e[120]-1].quote.slice(0,70)+"")&&k(h,D),U===(U=R(e))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(F,T))),e[4][e[120]].is_adding?J?J.p(e,o):(J=St(e),J.c(),J.m(F,null)):J&&(J.d(1),J=null),16&o[0]&&$(F,"centered",e[4][e[120]].notes.length<=0),16&o[0]&&M!==(M="feedback-note-section-"+e[120])&&w(t,"id",M)},d(e){e&&u(t),I.d(),J&&J.d(),A=!1,o(H)}}}function Nt(e){let t,n,i,s,c,a,h,b,k,y,q,F,T,S,C,N,O,A,H,P,D,E,R,U,I,Y,Q,K,X,Z,ee,te,ne,oe,ie,ce,ae,re,le,de,ue,pe,ge,me,fe,he,ve=Object.keys(e[31]),be=[];for(let t=0;t<ve.length;t+=1)be[t]=jt(Ue(e,ve,t));function we(t){e[85](t)}let ke={min:"0.0",max:"2.0",step:"0.1"};function ye(t){e[86](t)}void 0!==e[7]&&(ke.value=e[7]),T=new He({props:ke}),L.push((()=>B(T,"value",we)));let _e={min:"10.0",max:"4095.0",step:"1.0"};function xe(t){e[87](t)}function $e(t){e[88](t)}void 0!==e[8]&&(_e.value=e[8]),H=new He({props:_e}),L.push((()=>B(H,"value",ye)));let qe={};function Fe(e,t){return e[1].length>0?At:Mt}void 0!==e[25]&&(qe.progress=e[25]),void 0!==e[24]&&(qe.status=e[24]),Q=new se({props:qe}),L.push((()=>B(Q,"progress",xe))),L.push((()=>B(Q,"status",$e)));let Te=Fe(e),Le=Te(e);return{c(){t=g("div"),n=g("div"),i=g("span"),i.innerHTML="<strong>Configurations</strong>",s=f(),c=g("div"),a=g("span"),a.textContent="Model:",h=f(),b=g("select");for(let e=0;e<be.length;e+=1)be[e].c();k=f(),y=g("div"),q=g("span"),q.textContent="Temperature:",F=f(),z(T.$$.fragment),C=f(),N=g("div"),O=g("span"),O.textContent="Max Output Tokens:",A=f(),z(H.$$.fragment),D=f(),E=g("div"),R=g("span"),R.innerHTML="<strong>Chatbot&#39;s Resources</strong>",U=f(),I=g("div"),Y=g("div"),z(Q.$$.fragment),Z=f(),Le.c(),ee=f(),te=g("div"),ne=g("input"),oe=f(),ie=g("button"),ce=g("img"),re=m("\n                                            Add Document"),le=f(),de=g("button"),ue=g("img"),ge=m("\n                                            Remove All"),void 0===e[6]&&j((()=>e[84].call(b))),w(c,"class","row spaced centered"),_(c,"height","auto"),_(c,"width","100%"),w(y,"class","row spaced"),_(y,"height","auto"),_(y,"width","100%"),w(N,"class","row spaced"),_(N,"height","auto"),_(N,"width","100%"),w(n,"id","chatbot-configurations"),w(n,"class","column centered spaced padded bordered"),w(Y,"class","overlay centered padded"),$(Y,"invisible",!1===e[26]),w(I,"id","chatbot-rag-sources"),w(I,"class","column centered spaced padded bordered"),_(I,"width","100%"),_(I,"height","auto"),_(I,"overflow-y","auto"),w(ne,"type","file"),w(ne,"id","document_file_input"),w(ne,"class","gone"),r(ce.src,ae="./logos/add-ellipse-svgrepo-com.svg")||w(ce,"src","./logos/add-ellipse-svgrepo-com.svg"),w(ce,"alt","Add document"),w(ce,"class","action-icon"),ie.disabled=e[26],w(ie,"class","centered spaced column action-button"),r(ue.src,pe="./logos/delete-svgrepo-com.svg")||w(ue,"src","./logos/delete-svgrepo-com.svg"),w(ue,"alt","Remove all documents"),w(ue,"class","action-icon"),de.disabled=e[26],w(de,"class","centered spaced column action-button"),w(te,"id","chatbot-rag-buttons"),w(te,"class","row centered padded spaced"),_(te,"width","100%"),_(te,"height","auto"),w(E,"id","chatbot-rag-panel"),w(E,"class","column centered spaced padded bordered"),w(t,"id","chatbot-settings"),w(t,"class","column padded spaced"),_(t,"width","100%"),_(t,"height","95%")},m(o,r){d(o,t,r),l(t,n),l(n,i),l(n,s),l(n,c),l(c,a),l(c,h),l(c,b);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(b,null);x(b,e[6],!0),l(n,k),l(n,y),l(y,q),l(y,F),G(T,y,null),l(n,C),l(n,N),l(N,O),l(N,A),G(H,N,null),l(t,D),l(t,E),l(E,R),l(E,U),l(E,I),l(I,Y),G(Q,Y,null),l(I,Z),Le.m(I,null),l(E,ee),l(E,te),l(te,ne),e[90](ne),l(te,oe),l(te,ie),l(ie,ce),l(ie,re),l(te,le),l(te,de),l(de,ue),l(de,ge),me=!0,fe||(he=[v(b,"change",e[84]),v(ne,"change",e[91]),v(ie,"click",e[92]),v(de,"click",e[93])],fe=!0)},p(e,t){if(1&t[1]){let n;for(ve=Object.keys(e[31]),n=0;n<ve.length;n+=1){const o=Ue(e,ve,n);be[n]?be[n].p(o,t):(be[n]=jt(o),be[n].c(),be[n].m(b,null))}for(;n<be.length;n+=1)be[n].d(1);be.length=ve.length}64&t[0]|1&t[1]&&x(b,e[6]);const n={};!S&&128&t[0]&&(S=!0,n.value=e[7],M((()=>S=!1))),T.$set(n);const o={};!P&&256&t[0]&&(P=!0,o.value=e[8],M((()=>P=!1))),H.$set(o);const i={};!K&&33554432&t[0]&&(K=!0,i.progress=e[25],M((()=>K=!1))),!X&&16777216&t[0]&&(X=!0,i.status=e[24],M((()=>X=!1))),Q.$set(i),(!me||67108864&t[0])&&$(Y,"invisible",!1===e[26]),Te===(Te=Fe(e))&&Le?Le.p(e,t):(Le.d(1),Le=Te(e),Le&&(Le.c(),Le.m(I,null))),(!me||67108864&t[0])&&(ie.disabled=e[26]),(!me||67108864&t[0])&&(de.disabled=e[26])},i(e){me||(J(T.$$.fragment,e),J(H.$$.fragment,e),J(Q.$$.fragment,e),me=!0)},o(e){V(T.$$.fragment,e),V(H.$$.fragment,e),V(Q.$$.fragment,e),me=!1},d(n){n&&u(t),p(be,n),W(T),W(H),W(Q),Le.d(),e[90](null),fe=!1,o(he)}}}function Ot(e){let t,n,i,s,c,a,m,h,k,x,q,F,T,S,C,N,O,j,A,H,P,D,E,R,U,I,Y,Q,K,X,Z,ee,te,ne,oe,ie,ce,ae,re,le,de,ue,pe,ge,me,fe,he,ve=e[14],be=[];for(let t=0;t<ve.length;t+=1)be[t]=It(Ie(e,ve,t));function we(t){e[71](t)}function ke(t){e[72](t)}let ye={};function _e(e,t){return e[15]?Vt:Jt}void 0!==e[23]&&(ye.progress=e[23]),void 0!==e[22]&&(ye.status=e[22]),h=new se({props:ye}),L.push((()=>B(h,"progress",we))),L.push((()=>B(h,"status",ke)));let xe=_e(e),$e=xe(e);function qe(e,t){return e[17]?zt:Bt}let Fe=qe(e),Te=Fe(e);return{c(){t=g("div"),n=g("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",i=f();for(let e=0;e<be.length;e+=1)be[e].c();s=f(),c=g("div"),a=g("p"),a.innerHTML="<strong>assistant:</strong>",m=f(),z(h.$$.fragment),q=f(),F=g("div"),T=f(),S=g("div"),C=g("div"),N=g("div"),O=g("span"),O.innerHTML="<strong>Feedback Context:</strong>",j=f(),$e.c(),H=f(),P=g("div"),D=g("span"),D.innerHTML="<strong>Suggested messages:</strong>",E=f(),R=g("div"),R.textContent="Explain feedback.",U=f(),I=g("div"),I.textContent="Brainstorm actions.",Q=f(),K=g("div"),Te.c(),Z=f(),ee=g("div"),te=g("div"),ne=g("label"),oe=f(),ie=g("input"),ce=f(),ae=g("button"),ae.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon"/>',re=f(),le=g("textarea"),de=f(),ue=g("button"),pe=g("img"),w(n,"class","assistant padded svelte-o0vqi5"),w(c,"class","assistant padded column svelte-o0vqi5"),$(c,"invisible",!1===e[21]),_(F,"height","20%"),_(F,"width","100%"),_(F,"background-color","white"),_(F,"color","white"),_(F,"cursor","default"),w(t,"id","chatbot-messages"),w(t,"class","column spaced bordered padded svelte-o0vqi5"),w(N,"id","contexts"),w(N,"class","column centered bordered svelte-o0vqi5"),w(N,"style",A=e[17]?"width:30%;":"width:45%;"),w(R,"class","suggested-message svelte-o0vqi5"),w(I,"class","suggested-message svelte-o0vqi5"),w(P,"id","suggested-messages"),w(P,"class","column centered bordered svelte-o0vqi5"),w(P,"style",Y=e[17]?"width:30%;":"width:45%;"),w(K,"id","visual-context"),w(K,"class","column centered bordered svelte-o0vqi5"),w(K,"style",X=e[17]?"width:30%;":"display:none;"),w(C,"id","chatbot-utilities"),w(C,"class","row centered spaced svelte-o0vqi5"),w(ne,"for","image_upload"),_(ne,"display","none"),w(ie,"accept","image/png, image/jpeg"),w(ie,"type","file"),_(ie,"display","none"),w(ie,"id","image_upload"),w(ie,"name","image_upload"),w(ae,"class","action-button centered column"),w(te,"class","column spaced"),_(le,"width","100%"),_(le,"height","100%"),w(le,"placeholder","Type your message here..."),w(le,"id","textarea"),r(pe.src,ge="./logos/send-svgrepo-com.svg")||w(pe,"src","./logos/send-svgrepo-com.svg"),w(pe,"alt","Send"),w(pe,"class","action-icon"),w(ue,"class","action-button centered column"),ue.disabled=e[21],w(ee,"id","chatbot-input"),w(ee,"class","row spaced centered svelte-o0vqi5"),w(S,"id","chatbot-actions"),w(S,"class","column padded spaced centered svelte-o0vqi5")},m(o,r){d(o,t,r),l(t,n),l(t,i);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(t,null);l(t,s),l(t,c),l(c,a),l(c,m),G(h,c,null),l(t,q),l(t,F),d(o,T,r),d(o,S,r),l(S,C),l(C,N),l(N,O),l(N,j),$e.m(N,null),l(C,H),l(C,P),l(P,D),l(P,E),l(P,R),l(P,U),l(P,I),l(C,Q),l(C,K),Te.m(K,null),l(S,Z),l(S,ee),l(ee,te),l(te,ne),l(te,oe),l(te,ie),e[78](ie),l(te,ce),l(te,ae),l(ee,re),l(ee,le),y(le,e[10]),l(ee,de),l(ee,ue),l(ue,pe),me=!0,fe||(he=[v(R,"click",b(e[74])),v(I,"click",b(e[75])),v(ie,"change",e[77]),v(ie,"change",e[79]),v(ae,"click",b(e[80])),v(le,"input",e[81]),v(le,"keydown",e[82]),v(ue,"click",b(e[83]))],fe=!0)},p(e,n){if(20480&n[0]|4096&n[1]){let o;for(ve=e[14],o=0;o<ve.length;o+=1){const i=Ie(e,ve,o);be[o]?be[o].p(i,n):(be[o]=It(i),be[o].c(),be[o].m(t,s))}for(;o<be.length;o+=1)be[o].d(1);be.length=ve.length}const o={};!k&&8388608&n[0]&&(k=!0,o.progress=e[23],M((()=>k=!1))),!x&&4194304&n[0]&&(x=!0,o.status=e[22],M((()=>x=!1))),h.$set(o),(!me||2097152&n[0])&&$(c,"invisible",!1===e[21]),xe===(xe=_e(e))&&$e?$e.p(e,n):($e.d(1),$e=xe(e),$e&&($e.c(),$e.m(N,null))),(!me||131072&n[0]&&A!==(A=e[17]?"width:30%;":"width:45%;"))&&w(N,"style",A),(!me||131072&n[0]&&Y!==(Y=e[17]?"width:30%;":"width:45%;"))&&w(P,"style",Y),Fe===(Fe=qe(e))&&Te?Te.p(e,n):(Te.d(1),Te=Fe(e),Te&&(Te.c(),Te.m(K,null))),(!me||131072&n[0]&&X!==(X=e[17]?"width:30%;":"display:none;"))&&w(K,"style",X),1024&n[0]&&y(le,e[10]),(!me||2097152&n[0])&&(ue.disabled=e[21])},i(e){me||(J(h.$$.fragment,e),me=!0)},o(e){V(h.$$.fragment,e),me=!1},d(n){n&&u(t),p(be,n),W(h),n&&u(T),n&&u(S),$e.d(),Te.d(),e[78](null),fe=!1,o(he)}}}function jt(t){let n,o,i=t[117]+"";return{c(){n=g("option"),o=m(i),n.__value=t[117],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Mt(t){let n;return{c(){n=g("span"),n.textContent="No resources available."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function At(e){let t,n=e[1],o=[];for(let t=0;t<n.length;t+=1)o[t]=Ht(Re(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(117440514&i[0]|1024&i[1]){let s;for(n=e[1],s=0;s<n.length;s+=1){const c=Re(e,n,s);o[s]?o[s].p(c,i):(o[s]=Ht(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Ht(e){let t,n,o,i,s,c,a,p,h,y=e[115]+"";function _(){return e[89](e[115],e[111])}return{c(){t=g("div"),n=m(y),o=f(),i=g("button"),s=g("img"),a=f(),r(s.src,c="./logos/delete-x-svgrepo-com.svg")||w(s,"src","./logos/delete-x-svgrepo-com.svg"),w(s,"alt","Remove document"),w(s,"class","mini-icon"),i.disabled=e[26],w(i,"class","action-button"),w(t,"class","row centered spaced bordered centered")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,i),l(i,s),l(t,a),p||(h=v(i,"click",b(_)),p=!0)},p(t,o){e=t,2&o[0]&&y!==(y=e[115]+"")&&k(n,y),67108864&o[0]&&(i.disabled=e[26])},d(e){e&&u(t),p=!1,h()}}}function Pt(e){let t,n,i,s,c,a,r,p,h,b,y,_,x,$,q,F,T,L,S,C,N,O,j,M=e[112].role+"",A=e[112].content+"",H="context"in e[112]&&Dt(e),P="image"in e[112]&&Et(e);function D(){return e[68](e[112])}let E="context"in e[112]&&Rt(e);function R(){return e[70](e[112])}let U="image"in e[112]&&"user"===e[112].role&&Ut(e);return{c(){t=g("div"),n=g("div"),i=g("div"),H&&H.c(),s=f(),P&&P.c(),c=f(),a=g("div"),r=g("button"),r.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add to my notes" class="mini-icon"/>',p=f(),E&&E.c(),h=f(),b=g("button"),b.innerHTML='<img src="./logos/copy-svgrepo-com.svg" alt="Copy note" class="mini-icon"/>',_=f(),x=g("div"),$=g("p"),q=g("strong"),F=m(M),T=m(":"),L=f(),S=m(A),C=f(),U&&U.c(),w(i,"class","row spaced"),w(r,"class","action-button column centered"),w(b,"class","action-button column centered"),w(a,"class","row spaced"),w(n,"class",y="message-header row "+("context"in e[112]||"image"in e[112]?"with-context":"no-context")+" svelte-o0vqi5"),w(x,"class","row"),w(t,"class",N=e[112].role+" padded column spaced svelte-o0vqi5")},m(e,o){d(e,t,o),l(t,n),l(n,i),H&&H.m(i,null),l(i,s),P&&P.m(i,null),l(n,c),l(n,a),l(a,r),l(a,p),E&&E.m(a,null),l(a,h),l(a,b),l(t,_),l(t,x),l(x,$),l($,q),l(q,F),l(q,T),l($,L),l($,S),l(t,C),U&&U.m(t,null),O||(j=[v(r,"click",D),v(b,"click",R)],O=!0)},p(o,c){"context"in(e=o)[112]?H?H.p(e,c):(H=Dt(e),H.c(),H.m(i,s)):H&&(H.d(1),H=null),"image"in e[112]?P?P.p(e,c):(P=Et(e),P.c(),P.m(i,null)):P&&(P.d(1),P=null),"context"in e[112]?E?E.p(e,c):(E=Rt(e),E.c(),E.m(a,h)):E&&(E.d(1),E=null),16384&c[0]&&y!==(y="message-header row "+("context"in e[112]||"image"in e[112]?"with-context":"no-context")+" svelte-o0vqi5")&&w(n,"class",y),16384&c[0]&&M!==(M=e[112].role+"")&&k(F,M),16384&c[0]&&A!==(A=e[112].content+"")&&k(S,A),"image"in e[112]&&"user"===e[112].role?U?U.p(e,c):(U=Ut(e),U.c(),U.m(t,null)):U&&(U.d(1),U=null),16384&c[0]&&N!==(N=e[112].role+" padded column spaced svelte-o0vqi5")&&w(t,"class",N)},d(e){e&&u(t),H&&H.d(),P&&P.d(),E&&E.d(),U&&U.d(),O=!1,o(j)}}}function Dt(e){let t,n,o,i,s,c,a=e[112].context.id+"",r=(e[112].context.quote.length>40?e[112].context.quote.slice(0,40)+"...":e[112].context.quote)+"";return{c(){t=g("div"),n=g("small"),o=m("Context: F#"),i=m(a),s=f(),c=m(r),w(t,"class","context-tag feedback svelte-o0vqi5")},m(e,a){d(e,t,a),l(t,n),l(n,o),l(n,i),l(n,s),l(n,c)},p(e,t){16384&t[0]&&a!==(a=e[112].context.id+"")&&k(i,a),16384&t[0]&&r!==(r=(e[112].context.quote.length>40?e[112].context.quote.slice(0,40)+"...":e[112].context.quote)+"")&&k(c,r)},d(e){e&&u(t)}}}function Et(e){let t,n,o,i="user"===e[112].role?"Attached image":"Response to image";return{c(){t=g("div"),n=g("small"),o=m(i),w(t,"class","context-tag image svelte-o0vqi5")},m(e,i){d(e,t,i),l(t,n),l(n,o)},p(e,t){16384&t[0]&&i!==(i="user"===e[112].role?"Attached image":"Response to image")&&k(o,i)},d(e){e&&u(t)}}}function Rt(e){let t,n,o;function i(){return e[69](e[112])}return{c(){t=g("button"),t.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add feedback note" class="mini-icon"/>',w(t,"class","action-button column centered")},m(e,s){d(e,t,s),n||(o=v(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function Ut(e){let t,n,o;return{c(){t=g("div"),n=g("img"),r(n.src,o=e[112].image)||w(n,"src",o),w(n,"alt","Visual context"),_(n,"width","50%"),_(n,"height","auto"),w(t,"class","column centered"),_(t,"width","100%")},m(e,o){d(e,t,o),l(t,n)},p(e,t){16384&t[0]&&!r(n.src,o=e[112].image)&&w(n,"src",o)},d(e){e&&u(t)}}}function It(e){let t,n="system"!=e[112].role&&Pt(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"system"!=e[112].role?n?n.p(e,o):(n=Pt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function Jt(t){let n;return{c(){n=g("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Vt(e){let t,n,o,i,s,c,a,r,p,h,y,_=e[15].id+"",x=e[15].quote.slice(0,30)+"";return{c(){t=g("div"),n=g("span"),o=m("F#"),i=m(_),s=m(":"),c=m(x),a=m("..."),r=f(),p=g("button"),p.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon"/>',w(t,"class","suggested-message row  svelte-o0vqi5")},m(u,g){d(u,t,g),l(t,n),l(n,o),l(n,i),l(n,s),l(n,c),l(n,a),l(t,r),l(t,p),h||(y=v(p,"click",b(e[73])),h=!0)},p(e,t){32768&t[0]&&_!==(_=e[15].id+"")&&k(i,_),32768&t[0]&&x!==(x=e[15].quote.slice(0,30)+"")&&k(c,x)},d(e){e&&u(t),h=!1,y()}}}function Bt(t){return{c:e,m:e,p:e,d:e}}function zt(e){let t,n,o,i,s,c,a,p,m;return{c(){t=g("span"),t.innerHTML="<strong>Attached image:</strong>",n=f(),o=g("div"),i=g("img"),c=f(),a=g("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove image" class="mini-icon"/>',r(i.src,s=e[17])||w(i,"src",s),w(i,"alt","Visual context"),_(i,"width","100%"),_(i,"height","100%"),w(o,"class","row"),_(o,"width","100%"),_(o,"height","100%")},m(s,r){d(s,t,r),d(s,n,r),d(s,o,r),l(o,i),l(o,c),l(o,a),p||(m=v(a,"click",b(e[76])),p=!0)},p(e,t){131072&t[0]&&!r(i.src,s=e[17])&&w(i,"src",s)},d(e){e&&u(t),e&&u(n),e&&u(o),p=!1,m()}}}function Gt(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[64](n)},p:e,d(e){e&&u(n),t[64](null)}}}function Wt(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[2].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[63](t)},p(e,o){4&o[0]&&!r(t.src,n=e[2].audio)&&w(t,"src",n)},d(n){n&&u(t),e[63](null)}}}function Yt(e){let t,n,o,i;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,i=e[2].video)||w(t,"src",i),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,i){d(o,t,i),l(t,n),e[62](t)},p(e,n){4&n[0]&&!r(t.src,i=e[2].video)&&w(t,"src",i)},d(n){n&&u(t),e[62](null)}}}function Qt(e){let t,n=e[2].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=Kt(Je(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(516&i[0]){let s;for(n=e[2].transcript_list,s=0;s<n.length;s+=1){const c=Je(e,n,s);o[s]?o[s].p(c,i):(o[s]=Kt(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function Kt(e){let t,n,i,s,c,a,r,p,h,b,y,_,x,$,q,F,T,L,S,C,N,O=e[109].start_timestamp+"",j=e[109].end_timestamp+"",M=e[109].speaker?e[109].speaker+":":"",A=e[109].dialogue+"";function H(){return e[65](e[109])}function P(){return e[66](e[109])}return{c(){t=g("span"),n=m("["),i=m(O),s=m("]"),c=m(" - "),a=g("span"),r=m("["),p=m(j),h=m("]"),b=f(),y=g("br"),_=f(),x=m(M),$=f(),q=g("span"),T=f(),L=g("br"),S=g("br"),w(t,"class","timestamp svelte-o0vqi5"),w(a,"class","timestamp svelte-o0vqi5"),w(q,"id",F=e[109].id),w(q,"class","svelte-o0vqi5")},m(e,o){d(e,t,o),l(t,n),l(t,i),l(t,s),d(e,c,o),d(e,a,o),l(a,r),l(a,p),l(a,h),d(e,b,o),d(e,y,o),d(e,_,o),d(e,x,o),d(e,$,o),d(e,q,o),q.innerHTML=A,d(e,T,o),d(e,L,o),d(e,S,o),C||(N=[v(t,"click",H),v(a,"click",P)],C=!0)},p(t,n){e=t,4&n[0]&&O!==(O=e[109].start_timestamp+"")&&k(i,O),4&n[0]&&j!==(j=e[109].end_timestamp+"")&&k(p,j),4&n[0]&&M!==(M=e[109].speaker?e[109].speaker+":":"")&&k(x,M),4&n[0]&&A!==(A=e[109].dialogue+"")&&(q.innerHTML=A),4&n[0]&&F!==(F=e[109].id)&&w(q,"id",F)},d(e){e&&u(t),e&&u(c),e&&u(a),e&&u(b),e&&u(y),e&&u(_),e&&u(x),e&&u($),e&&u(q),e&&u(T),e&&u(L),e&&u(S),C=!1,o(N)}}}function Xt(e){let t,n,o,i,s,c,a,r,m,h,b,k,y,x,$,q,F,T=e[32],L=[];for(let t=0;t<T.length;t+=1)L[t]=We(Ge(e,T,t));function S(e,t){return 0===e[13]?Qe:1===e[13]?Ye:void 0}let C=S(e),N=C&&C(e),O=e[33],j=[];for(let t=0;t<O.length;t+=1)j[t]=ht(Ve(e,O,t));const M=[wt,bt,vt],A=[];function H(e,t){return 0===e[12]?0:1===e[12]?1:2===e[12]?2:-1}return~(y=H(e))&&(x=A[y]=M[y](e)),{c(){t=g("div"),n=g("div"),o=g("div"),i=g("div");for(let e=0;e<L.length;e+=1)L[e].c();s=f(),c=g("div"),N&&N.c(),a=f(),r=g("div"),m=g("div"),h=g("div");for(let e=0;e<j.length;e+=1)j[e].c();b=f(),k=g("div"),x&&x.c(),w(i,"class","tab-header svelte-o0vqi5"),w(c,"class","tab-content padded svelte-o0vqi5"),_(c,"overflow-y","auto"),w(o,"class","tabbed-area bordered svelte-o0vqi5"),w(n,"id","left-panel"),w(n,"class","column svelte-o0vqi5"),w(h,"class","tab-header svelte-o0vqi5"),w(k,"class","tab-content column svelte-o0vqi5"),w(m,"class","tabbed-area bordered svelte-o0vqi5"),w(r,"id","right-panel"),w(r,"class","column  svelte-o0vqi5"),w(t,"id","feedback-list-page"),w(t,"class","spaced svelte-o0vqi5")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(o,i);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(i,null);l(o,s),l(o,c),N&&N.m(c,null),l(t,a),l(t,r),l(r,m),l(m,h);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(h,null);l(m,b),l(m,k),~y&&A[y].m(k,null),$=!0,q||(F=v(t,"window:click",e[36]),q=!0)},p(e,t){if(8192&t[0]|2&t[1]){let n;for(T=e[32],n=0;n<T.length;n+=1){const o=Ge(e,T,n);L[n]?L[n].p(o,t):(L[n]=We(o),L[n].c(),L[n].m(i,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=T.length}if(C===(C=S(e))&&N?N.p(e,t):(N&&N.d(1),N=C&&C(e),N&&(N.c(),N.m(c,null))),4096&t[0]|4&t[1]){let n;for(O=e[33],n=0;n<O.length;n+=1){const o=Ve(e,O,n);j[n]?j[n].p(o,t):(j[n]=ht(o),j[n].c(),j[n].m(h,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=O.length}let n=y;y=H(e),y===n?~y&&A[y].p(e,t):(x&&(U(),V(A[n],1,1,(()=>{A[n]=null})),I()),~y?(x=A[y],x?x.p(e,t):(x=A[y]=M[y](e),x.c()),J(x,1),x.m(k,null)):x=null)},i(e){$||(J(x),$=!0)},o(e){V(x),$=!1},d(e){e&&u(t),p(L,e),N&&N.d(),p(j,e),~y&&A[y].d(),q=!1,F()}}}function Zt(e,t=!0){e.show_paraphrased=t}const en=(e,t)=>e-t;function tn(e,t,n){let o,i,s,c,a,r,l,d,{feedback_list:u}=t,{recording:p}=t,{documents:g=[]}=t,m=[],f={1:{notes:["This is a note","This is another note"],is_adding:!1},2:{notes:["This is a note","This is another note"],is_adding:!1},3:{notes:["This is a note","This is another note"],is_adding:!1}},h=!1,v={"GPT-4o":"gpt-4o","Interior Designer GPT":"ft:gpt-3.5-turbo-0125:im-lab:int-des-full:9b2qf12W"},b="GPT-4o",w=0,k=256,y="",_=0,x=0,$=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}],q=["Critical Feedback","Positive Feedback"],F=["Transcript","Chatbot","Notes"],T=!1,S="",C=0,N="",O=0,j=!1;function M(e){i===e&&n(11,i=null),n(0,u=u.filter((t=>t!==e))),n(0,u)}function A(e,t){n(11,i=e),t.stopPropagation()}let H=null,P=!0;function D(e){H===e?n(28,P=!P):(n(27,H=e),n(28,P=!0)),u.sort(((t,n)=>t[e]<n[e]?P?-1:1:t[e]>n[e]?P?1:-1:0)),n(0,u)}async function E(e,t=null){let o=e.slice();if(T)return void alert("Please wait for the current message to be processed.");if(n(21,T=!0),""===e.trim())return void alert("Please enter a message.");let i={role:"user",content:e};if(t){i.context=t;let e="\n\nHere is the piece of feedback as context.";e+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',o+=e}let s={message:o,image_data:null,max_output_tokens:k,temperature:w,model:v[b]};if(a&&(i.image=a),c){n(22,S="Uploading image..."),n(23,C=30);let e=await async function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)}))}(c);s.image_data=e}$.push(i),n(14,$),console.log($),n(0,u),n(22,S="Thinking..."),n(23,C=50);const r=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error("Failed to send message");let l=(await r.json()).chatbot_response;n(22,S="Done!"),n(23,C=100),await X(1200),await ee("FeedbackList: Sent message",[e,t,a]);let d={role:"assistant",content:l};t&&(d.context=t),a&&(d.image=a),$.push(d),n(14,$),n(0,u),n(21,T=!1),n(23,C=0)}function R(e){s===e?alert("This feedback is already added as context."):n(15,s=e)}async function U(e){const t=e.target.files;if(t)for(const e of t){const t=new FormData;t.append("file",e),n(25,O=50),n(24,N="Adding document... (this may take a while)");const o=await fetch("/add_document",{method:"POST",body:t});if(!o.ok)return null;let i=(await o.json()).document_name;g.push(i),n(1,g),n(24,N="Done!"),n(25,O=100),await X(1200)}}async function I(e,t){return(await fetch("/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})).ok?(n(1,g=g.splice(t,1)),n(1,g),e):"failed"}async function J(){n(24,N="Removing all documents...");for(let e=0;e<g.length;e++){let t=g[e];n(25,O=e/g.length*100),await I(t,e)}n(24,N="Done!"),n(25,O=100),await X(1e3),n(25,O=0)}let V=!1,B="";async function z(e,t=null,o=null){""!=e.trim()?t?t in f?(f[t].notes.push(e),n(4,f)):n(4,f[t]={notes:[e],is_adding:!1},f):(m.push(e),n(3,m)):alert("Please enter a note.")}async function G(e,t=null){t?(f[t].notes.splice(e,1),n(4,f)):(m.splice(e,1),n(3,m))}async function W(e=null){n(29,V=!1),z(B,e),n(30,B="")}return e.$$set=e=>{"feedback_list"in e&&n(0,u=e.feedback_list),"recording"in e&&n(2,p=e.recording),"documents"in e&&n(1,g=e.documents)},[u,g,p,m,f,h,b,w,k,o,y,i,_,x,$,s,c,a,r,l,d,T,S,C,N,O,j,H,P,V,B,v,q,F,M,A,function(){n(11,i=null)},D,E,R,U,I,J,z,G,W,async e=>{n(13,x=e),await ee("FeedbackList: Switched left panel tab",q[x])},async()=>{D("quote"),await ee("FeedbackList: Sorted feedback","quote")},async()=>{D("speaker"),await ee("FeedbackList: Sorted feedback","speaker")},async()=>{D("done"),await ee("FeedbackList: Sorted feedback","done")},async e=>{n(12,_=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(te(e.excerpt_reference.start_timestamp,o),await ee("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{Zt(e,!1),await ee("FeedbackList: Show original quote",e.original_quote)},async e=>{Zt(e,!0),await ee("FeedbackList: Show paraphrased quote",e.positivised_quote)},async(e,t,o)=>{n(0,t[o].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),u),Zt(e,!0),n(0,u),await ee("FeedbackList: Positivize Quote",e)},async e=>{R(e),await ee("FeedbackList: Add as context",s)},async e=>{n(12,_=2),e.id in f?n(4,f[e.id].is_adding=!0,f):n(4,f[e.id]={notes:[],is_adding:!0},f)},async e=>{M(e),await ee("FeedbackList: Remove feedback",e)},function(e,t){e[t].done=this.checked,n(0,u)},async(e,t)=>{A(e,t),ne(e),await ee("FeedbackList: Selected feedback",e)},async e=>{n(12,_=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(te(e.excerpt_reference.start_timestamp,o),await ee("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async(e,t)=>{A(e,t),ne(e),await ee("FeedbackList: Selected feedback",e)},async e=>{n(12,_=e),await ee("FeedbackList: Switched right panel tab",F[_])},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},async e=>{te(e.start_timestamp,o),await ee("FeedbackList: Seek to start timestamp",e.start_timestamp)},async e=>{te(e.end_timestamp,o),await ee("FeedbackList: Seek to end timestamp",e.end_timestamp)},async()=>{n(5,h=!h),await ee("FeedbackList: Toggled chatbot settings",h)},async e=>{n(12,_=2),z(e.role+": "+e.content),await ee("FeedbackList: Added note to My Notes",e)},async e=>{n(12,_=2),z(e.role+": "+e.content,"id"in e.context?e.context.id:null),await ee("FeedbackList: Added note to Feedback ID"+e.context.id,e)},async e=>{navigator.clipboard.writeText(e.role+": "+e.content),await ee("FeedbackList: Copied message",e)},function(e){C=e,n(23,C)},function(e){S=e,n(22,S)},async()=>{await ee("FeedbackList: Removed context",s),n(15,s=null)},async()=>{T||await E("Can you paraphrase the following feedback positively?",s)},async()=>{T||await E("Can you suggest a task to address the following feedback?",s)},async()=>{await ee("FeedbackList: Removed image",a),n(17,a=null),n(16,c=null)},function(){r=this.value,n(18,r)},function(e){L[e?"unshift":"push"]((()=>{l=e,n(19,l)}))},async()=>{n(18,r=l.files),n(17,[a,c]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return[URL.createObjectURL(t),t];alert("Please select an image file.")}else console.log("No image selected.");return null}(r),a,n(16,c)),await ee(a?"FeedbackList: Uploaded image":"FeedbackList: Canceled uploading image",a)},async()=>{l.click()},function(){y=this.value,n(10,y)},e=>"Enter"===e.key&&E(y,s),async()=>{await E(y,s),n(10,y="")},function(){b=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(6,b),n(31,v)},function(e){w=e,n(7,w)},function(e){k=e,n(8,k)},function(e){O=e,n(25,O)},function(e){N=e,n(24,N)},async(e,t)=>{if(!window.confirm("Are you sure you want to delete this document? This cannot be undone."))return;n(26,j=!0),n(25,O=50),n(24,N="Removing document...");let o=await I(e,t);n(24,N="Done!"),n(25,O=100),n(26,j=!1),ee("FeedbackList: Removed document",o)},function(e){L[e?"unshift":"push"]((()=>{d=e,n(20,d)}))},async e=>{n(26,j=!0),await U(e),n(26,j=!1),ee("FeedbackList: Added document",e.target.files)},async()=>{window.confirm("Adding a new document will take a long time, since its information will be extracted. Do you want to proceed?")&&(document.getElementById("document_file_input").click(),await ee("FeedbackList: Added document","Document"))},async()=>{window.confirm("Are you sure you want to remove all documents? This cannot be undone.")&&(n(26,j=!0),await J(),n(26,j=!1),await ee("FeedbackList: Removed all documents",g))},async(e,t)=>{G(e),await ee("FeedbackList: Removed note",t)},function(){B=this.value,n(30,B)},async()=>{W(),n(29,V=!1),await ee("FeedbackList: Added note to My Notes",B)},async()=>{n(29,V=!1),n(30,B=""),await ee("FeedbackList: Cancelled adding note to My Notes",B)},async()=>{n(29,V=!0),await ee("FeedbackList: Clicked on My Notes' Add Note button",V)},async()=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(3,m=[]),n(3,m),await ee("FeedbackList: Removed all notes from My Notes",m))},async e=>{let t="Are you sure you want to delete this feedback notes section? This cannot be undone";f[e].notes.length>0&&(t="Are you sure you want to delete this feedback notes section? This will delete all notes and cannot be undone."),window.confirm(t)&&(delete f[e],n(4,f),await ee("FeedbackList: Removed feedback notes section","Feedback ID"+e))},async(e,t,n)=>{G(e,t),await ee("FeedbackList: Removed note from Feedback ID"+t,n)},function(){B=this.value,n(30,B)},async e=>{W(e),n(4,f[e].is_adding=!1,f),await ee("FeedbackList: Added note to Feedback ID"+e,B)},async e=>{n(4,f[e].is_adding=!1,f),await ee("FeedbackList: Cancelled adding note to Feedback ID"+e,B),n(30,B="")},async e=>{n(4,f[e].is_adding=!0,f),await ee("FeedbackList: Clicked on Feedback ID"+e+"'s Add Note button",f[e].is_adding)},async e=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(4,f[e].notes=[],f),n(4,f),await ee("FeedbackList: Removed all notes from Feedback ID"+e,f[e].notes))}]}class nn extends K{constructor(e){super(),Q(this,e,tn,Xt,s,{feedback_list:0,recording:2,documents:1},null,[-1,-1,-1,-1,-1])}}function on(e){let t,n,i,s,c,a,p,h,b,k,x,q,F,T,S,C,N,O,j,A,H,P,D,E,R,U,I,Y,Q,K,X,Z,ee,te,ne,oe,ie,se,ce;function ae(t){e[10](t)}function re(t){e[11](t)}let le={};function de(t){e[12](t)}function ue(t){e[13](t)}function pe(t){e[14](t)}void 0!==e[2]&&(le.recording=e[2]),void 0!==e[3]&&(le.feedback_list=e[3]),S=new je({props:le}),L.push((()=>B(S,"recording",ae))),L.push((()=>B(S,"feedback_list",re)));let ge={};return void 0!==e[4]&&(ge.documents=e[4]),void 0!==e[3]&&(ge.feedback_list=e[3]),void 0!==e[2]&&(ge.recording=e[2]),A=new nn({props:ge}),L.push((()=>B(A,"documents",de))),L.push((()=>B(A,"feedback_list",ue))),L.push((()=>B(A,"recording",pe))),{c(){t=g("main"),n=g("div"),i=g("div"),s=g("div"),c=g("label"),c.textContent="Enter your username",a=f(),p=g("input"),h=f(),b=g("div"),k=g("button"),k.textContent="Register",x=f(),q=g("button"),q.textContent="Login",F=f(),T=g("div"),z(S.$$.fragment),O=f(),j=g("div"),z(A.$$.fragment),E=f(),R=g("div"),U=g("button"),I=g("img"),Q=m("\n                Select Feedback"),X=f(),Z=g("button"),ee=m("View Feedback List\n                "),te=g("img"),w(c,"for","username"),w(p,"type","text"),w(p,"name","username"),w(p,"id","username"),w(k,"class","svelte-qf1jde"),w(q,"class","svelte-qf1jde"),w(b,"class","row"),w(s,"class","column centered spaced"),_(s,"width","75%"),_(s,"height","75%"),w(i,"class","centered spaced"),_(i,"width","100%"),_(i,"height","100%"),$(i,"gone",0!=e[0]),_(T,"width","100%"),_(T,"height","100%"),$(T,"gone",1!=e[0]),_(j,"width","100%"),_(j,"height","100%"),$(j,"gone",2!=e[0]),w(n,"class","carousel-container svelte-qf1jde"),r(I.src,Y="./logos/move-to-the-prev-page-symbol-svgrepo-com.svg")||w(I,"src","./logos/move-to-the-prev-page-symbol-svgrepo-com.svg"),w(I,"alt","Previous page"),w(I,"class","mini-icon"),w(U,"class","action-button row centered svelte-qf1jde"),U.disabled=K=0===e[0],$(U,"invisible",2!=e[0]||0==e[0]),r(te.src,ne="./logos/move-to-the-next-page-symbol-svgrepo-com.svg")||w(te,"src","./logos/move-to-the-next-page-symbol-svgrepo-com.svg"),w(te,"alt","Next page"),w(te,"class","mini-icon"),w(Z,"class","action-button row centered svelte-qf1jde"),Z.disabled=oe=e[0]===sn.length-1||e[3].length<=0,$(Z,"invisible",1!=e[0]||0==e[0]),w(R,"class","navigation centered spaced bordered row svelte-qf1jde")},m(o,r){d(o,t,r),l(t,n),l(n,i),l(i,s),l(s,c),l(s,a),l(s,p),y(p,e[1]),l(s,h),l(s,b),l(b,k),l(b,x),l(b,q),l(n,F),l(n,T),G(S,T,null),l(n,O),l(n,j),G(A,j,null),l(t,E),l(t,R),l(R,U),l(U,I),l(U,Q),l(R,X),l(R,Z),l(Z,ee),l(Z,te),ie=!0,se||(ce=[v(p,"input",e[7]),v(k,"click",e[8]),v(q,"click",e[9]),v(U,"click",e[15]),v(Z,"click",e[16])],se=!0)},p(e,[t]){2&t&&p.value!==e[1]&&y(p,e[1]),(!ie||1&t)&&$(i,"gone",0!=e[0]);const n={};!C&&4&t&&(C=!0,n.recording=e[2],M((()=>C=!1))),!N&&8&t&&(N=!0,n.feedback_list=e[3],M((()=>N=!1))),S.$set(n),(!ie||1&t)&&$(T,"gone",1!=e[0]);const o={};!H&&16&t&&(H=!0,o.documents=e[4],M((()=>H=!1))),!P&&8&t&&(P=!0,o.feedback_list=e[3],M((()=>P=!1))),!D&&4&t&&(D=!0,o.recording=e[2],M((()=>D=!1))),A.$set(o),(!ie||1&t)&&$(j,"gone",2!=e[0]),(!ie||1&t&&K!==(K=0===e[0]))&&(U.disabled=K),(!ie||1&t)&&$(U,"invisible",2!=e[0]||0==e[0]),(!ie||9&t&&oe!==(oe=e[0]===sn.length-1||e[3].length<=0))&&(Z.disabled=oe),(!ie||1&t)&&$(Z,"invisible",1!=e[0]||0==e[0])},i(e){ie||(J(S.$$.fragment,e),J(A.$$.fragment,e),ie=!0)},o(e){V(S.$$.fragment,e),V(A.$$.fragment,e),ie=!1},d(e){e&&u(t),W(S),W(A),se=!1,o(ce)}}}let sn=3;function cn(e,t,n){let o=0,i="",s="",c={},a=[],r=[];async function l(){if(null==i||""==i)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i})});const t=await e.json();e.ok?e.ok&&(alert(t.message),s=t.user_id,Z("username",i,30),Z("user_id",s,30),n(4,r=await fetch("/get_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s})}).then((e=>e.json())).then((e=>e.documents))),n(0,o=1)):alert(t.message)}async function d(){if(null==i||""==i)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i})});const t=await e.json();e.ok?e.ok&&(alert(t.message),s=t.user_id,Z("username",i,30),Z("user_id",s,30),n(4,r=await fetch("/get_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s})}).then((e=>e.json())).then((e=>e.documents))),n(0,o=1)):alert(t.message)}F((async()=>{}));return[o,i,c,a,r,l,d,function(){i=this.value,n(1,i)},async()=>{await l()},async()=>{await d()},function(e){c=e,n(2,c)},function(e){a=e,n(3,a)},function(e){r=e,n(4,r)},function(e){a=e,n(3,a)},function(e){c=e,n(2,c)},()=>{n(0,o=1)},()=>{n(0,o=2)}]}return new class extends K{constructor(e){super(),Q(this,e,cn,on,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
