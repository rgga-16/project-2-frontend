var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,a;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function f(){return m("")}function v(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function _(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function T(e){const t=e.querySelector(":checked");return t&&t.__value}function $(e,t,n){e.classList[n?"add":"remove"](t)}function F(e){a=e}function S(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const L=[],C=[];let j=[];const O=[],N=Promise.resolve();let E=!1;function M(e){j.push(e)}function P(e){O.push(e)}const A=new Set;let H=0;function R(){if(0!==H)return;const e=a;do{try{for(;H<L.length;){const e=L[H];H++,F(e),q(e.$$)}}catch(e){throw L.length=0,H=0,e}for(F(null),L.length=0,H=0;C.length;)C.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];A.has(t)||(A.add(t),t())}j.length=0}while(L.length);for(;O.length;)O.pop()();E=!1,A.clear(),F(e)}function q(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const D=new Set;let U;function I(){U={r:0,c:[],p:U}}function J(){U.r||o(U.c),U=U.p}function G(e,t){e&&e.i&&(D.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(D.has(e))return;D.add(e),U.c.push((()=>{D.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function z(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function B(e){e&&e.c()}function Y(e,n,i,c){const{fragment:a,after_update:r}=e.$$;a&&a.m(n,i),c||M((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),r.forEach(M)}function W(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];j.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),j=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(L.push(e),E||(E=!0,N.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,s,i,c,r,l,d,g=[-1]){const p=a;F(t);const m=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:s.target||p.$$.root};d&&d(m.root);let h=!1;if(m.ctx=i?i(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),h&&Q(t,e)),n})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();s.intro&&G(t.$$.fragment),Y(t,s.target,s.anchor,s.customElement),R()}F(p)}class X{$destroy(){W(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function Z(e){return new Promise((t=>setTimeout(t,e)))}function ee(e,t,n){var o="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}async function te(e,t){const n=await fetch("/log_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:t})});if(!n.ok)throw new Error("Failed to log action");const o=await n.json();console.log(o.message)}function ne(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function oe(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function se(e){!function(e){try{return navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const o=document.getSelection(),s=o?o.rangeCount>0&&o.getRangeAt(0):null;document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length,document.execCommand("copy"),document.body.removeChild(t),s&&o&&(o.removeAllRanges(),o.addRange(s)),n&&n.focus()}}(e)}function ie(t){let n,o,s,i,c,a,r,g,f;return{c(){n=p("div"),o=p("span"),s=m("["),i=m(t[0]),c=m("%] "),a=m(t[1]),r=h(),g=p("div"),f=p("div"),w(o,"class","status-text svelte-e99ivy"),w(f,"class","loading-bar-progress svelte-e99ivy"),_(f,"width",t[0]+"%"),w(g,"class","loading-bar-container svelte-e99ivy"),w(n,"class","container column centered spaced svelte-e99ivy")},m(e,t){d(e,n,t),l(n,o),l(o,s),l(o,i),l(o,c),l(o,a),l(n,r),l(n,g),l(g,f)},p(e,[t]){1&t&&k(i,e[0]),2&t&&k(a,e[1]),1&t&&_(f,"width",e[0]+"%")},i:e,o:e,d(e){e&&u(n)}}}function ce(e,t,n){let{progress:o=0}=t,{status:s=""}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress),"status"in e&&n(1,s=e.status)},[o,s]}class ae extends X{constructor(e){super(),K(this,e,ce,ie,i,{progress:0,status:1})}}async function re(e){const t=await fetch("/save_recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recording:e})});if(!t.ok)throw new Error("Failed to save recording");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function le(e){const t=await fetch("/save_feedback_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_list:e})});if(!t.ok)throw new Error("Failed to save feedback list");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function de(e){const t=await fetch("/save_display_chatbot_messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_chatbot_messages:e})});if(!t.ok)throw new Error("Failed to save display chatbot messages");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function ue(e){const t=await fetch("/save_my_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({my_notes:e})});if(!t.ok)throw new Error("Failed to save my notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function ge(e){const t=await fetch("/save_feedback_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_notes:e})});if(!t.ok)throw new Error("Failed to save my feedback notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}function pe(e,t,n){const o=e.slice();return o[60]=t[n][0],o[61]=t[n][1],o}function me(e,t,n){const o=e.slice();return o[64]=t[n],o[66]=n,o}function he(t){let n;return{c(){n=p("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function fe(e){let t,n,o,s,i,c=e[2]+1+"",a=e[1].length+"";return{c(){t=p("span"),n=m(c),o=m(" of "),s=m(a),i=m(" feedback moments highlighted")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,s),l(t,i)},p(e,t){4&t[0]&&c!==(c=e[2]+1+"")&&k(n,c),2&t[0]&&a!==(a=e[1].length+"")&&k(s,a)},d(e){e&&u(t)}}}function ve(t){let n;return{c(){n=p("div"),n.innerHTML="<span>No discussion transcript loaded. Please first record or upload your discussion.</span>",w(n,"class","centered"),_(n,"height","100%"),_(n,"width","100%")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function be(e){let t,n=e[0].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=we(me(e,n,t));return{c(){t=p("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(9&s[0]){let i;for(n=e[0].transcript_list,i=0;i<n.length;i+=1){const c=me(e,n,i);o[i]?o[i].p(c,s):(o[i]=we(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),g(o,e)}}}function we(e){let t,n,s,i,c,a,r,g,f,b,y,_,x,T,$,F,S,L,C,j,O,N,E,M=e[64].start_timestamp+"",P=e[64].end_timestamp+"",A=e[64].speaker?e[64].speaker+":":"",H=e[64].dialogue+"";function R(){return e[21](e[64])}function q(){return e[22](e[64])}return{c(){t=p("div"),n=p("span"),s=m("["),i=m(M),c=m("]"),a=m(" \n                            - \n                            "),r=p("span"),g=m("["),f=m(P),b=m("]"),y=h(),_=p("br"),x=h(),T=m(A),$=h(),F=p("span"),L=h(),C=p("br"),j=p("br"),O=h(),w(n,"class","timestamp svelte-ir33lb"),w(r,"class","timestamp svelte-ir33lb"),w(F,"id",S=e[64].id),w(F,"class","svelte-ir33lb"),w(t,"class","spaced")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(n,i),l(n,c),l(t,a),l(t,r),l(r,g),l(r,f),l(r,b),l(t,y),l(t,_),l(t,x),l(t,T),l(t,$),l(t,F),F.innerHTML=H,l(t,L),l(t,C),l(t,j),l(t,O),N||(E=[v(n,"click",R),v(r,"click",q)],N=!0)},p(t,n){e=t,1&n[0]&&M!==(M=e[64].start_timestamp+"")&&k(i,M),1&n[0]&&P!==(P=e[64].end_timestamp+"")&&k(f,P),1&n[0]&&A!==(A=e[64].speaker?e[64].speaker+":":"")&&k(T,A),1&n[0]&&H!==(H=e[64].dialogue+"")&&(F.innerHTML=H),1&n[0]&&S!==(S=e[64].id)&&w(F,"id",S)},d(e){e&&u(t),N=!1,o(E)}}}function ke(t){let n,o;return{c(){n=p("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[38](n)},p:e,d(e){e&&u(n),t[38](null)}}}function ye(e){let t,n;return{c(){t=p("audio"),r(t.src,n=e[0].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[37](t)},p(e,o){1&o[0]&&!r(t.src,n=e[0].audio)&&w(t,"src",n)},d(n){n&&u(t),e[37](null)}}}function _e(e){let t,n,o,s;return{c(){t=p("video"),n=p("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[0].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[36](t)},p(e,n){1&n[0]&&!r(t.src,s=e[0].video)&&w(t,"src",s)},d(n){n&&u(t),e[36](null)}}}function xe(e){let t,n,o="speaker"in e[0].transcript_list[0]&&Te(e),s=e[1]&&Fe(e);return{c(){o&&o.c(),t=h(),s&&s.c(),n=f()},m(e,i){o&&o.m(e,i),d(e,t,i),s&&s.m(e,i),d(e,n,i)},p(e,i){"speaker"in e[0].transcript_list[0]?o?o.p(e,i):(o=Te(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[1]?s?s.p(e,i):(s=Fe(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){o&&o.d(e),e&&u(t),s&&s.d(e),e&&u(n)}}}function Te(e){let t,n,o,s,i,c,a,r,f,v=Object.keys(e[0].transcript_list.reduce(Pe,{})).length+"",b=Object.entries(e[0].transcript_list.reduce(Ae,{})),w=[];for(let t=0;t<b.length;t+=1)w[t]=$e(pe(e,b,t));return{c(){t=p("strong"),n=m("Number of participants: "),o=m(v),s=h(),i=p("br"),c=h(),a=p("ul");for(let e=0;e<w.length;e+=1)w[e].c();r=h(),f=p("br")},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),d(e,c,u),d(e,a,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(a,null);d(e,r,u),d(e,f,u)},p(e,t){if(1&t[0]&&v!==(v=Object.keys(e[0].transcript_list.reduce(Pe,{})).length+"")&&k(o,v),1&t[0]){let n;for(b=Object.entries(e[0].transcript_list.reduce(Ae,{})),n=0;n<b.length;n+=1){const o=pe(e,b,n);w[n]?w[n].p(o,t):(w[n]=$e(o),w[n].c(),w[n].m(a,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}},d(e){e&&u(t),e&&u(s),e&&u(i),e&&u(c),e&&u(a),g(w,e),e&&u(r),e&&u(f)}}}function $e(e){let t,n,o,s,i,c,a,r=e[60]+"",g=e[61]+"";return{c(){t=p("li"),n=m("- "),o=m(r),s=m(": "),i=m(g),c=m(" utterances"),a=h()},m(e,r){d(e,t,r),l(t,n),l(t,o),l(t,s),l(t,i),l(t,c),d(e,a,r)},p(e,t){1&t[0]&&r!==(r=e[60]+"")&&k(o,r),1&t[0]&&g!==(g=e[61]+"")&&k(i,g)},d(e){e&&u(t),e&&u(a)}}}function Fe(e){let t,n,o,s,i,c,a,r,g,f,v,b,w=e[1].length+"",y=e[1].filter(He).length+"",_=e[1].filter(Re).length+"";return{c(){t=p("strong"),n=m("Number of feedback utterances: "),o=m(w),s=h(),i=p("ul"),c=p("li"),a=m("- Number of positive feedback: "),r=m(y),g=h(),f=p("li"),v=m("- Number of critical feedback: "),b=m(_)},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),l(i,c),l(c,a),l(c,r),l(i,g),l(i,f),l(f,v),l(f,b)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&k(o,w),2&t[0]&&y!==(y=e[1].filter(He).length+"")&&k(r,y),2&t[0]&&_!==(_=e[1].filter(Re).length+"")&&k(b,_)},d(e){e&&u(t),e&&u(s),e&&u(i)}}}function Se(e){let t,n,s,i,c,a,g,f,b,k,y,x,T,F,S,L,j,O,N,E,M,A,H,R,q,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,ge,pe,me,we,Te,$e,Fe,Se,Le,Ce,je,Oe,Ne,Ee,Me,Pe,Ae,He,Re,qe,De,Ue,Ie,Je,Ge,Ve,ze,Be,Ye,We,Qe,Ke,Xe,Ze,et,tt,nt,ot,st,it,ct,at,rt,lt,dt,ut,gt,pt,mt,ht,ft,vt,bt,wt,kt,yt,_t,xt,Tt,$t,Ft;function St(t){e[17](t)}function Lt(t){e[18](t)}let Ct={};function jt(e,t){return e[1]&&e[1].length>0?fe:he}void 0!==e[10]&&(Ct.progress=e[10]),void 0!==e[9]&&(Ct.status=e[9]),c=new ae({props:Ct}),C.push((()=>z(c,"progress",St))),C.push((()=>z(c,"status",Lt)));let Ot=jt(e),Nt=Ot(e);function Et(e,t){return e[0]&&e[0].transcript_list?be:ve}let Mt=Et(e),Pt=Mt(e);function At(e,t){return e[0]&&e[0].video?_e:e[0]&&e[0].audio?ye:ke}let Ht=At(e),Rt=Ht(e),qt=e[0]&&e[0].transcript_list&&xe(e);return{c(){t=p("div"),n=p("div"),s=p("div"),i=p("div"),B(c.$$.fragment),f=h(),b=p("div"),Nt.c(),k=h(),y=p("button"),x=p("img"),S=h(),L=p("button"),j=p("img"),E=h(),Pt.c(),M=h(),A=p("div"),H=p("div"),R=p("span"),R.textContent="Step 1: Upload your discussion.",q=h(),D=p("div"),U=p("div"),I=p("div"),J=p("label"),J.textContent="Upload your own video or audio:",Q=h(),K=p("div"),X=p("input"),Z=h(),ee=p("button"),te=p("img"),oe=m("\n                                    Upload file"),ie=h(),ce=p("div"),re=p("label"),re.textContent="Upload your own transcript (in .srt only):",le=h(),de=p("div"),ue=p("input"),ge=h(),pe=p("button"),me=p("img"),Te=m("\n                                    Upload file"),Fe=h(),Se=p("div"),Le=p("span"),Le.textContent="Step 2: Highlight feedback in the discussion's transcript.",Ce=h(),je=p("div"),Oe=p("div"),Ne=p("button"),Ee=p("img"),Pe=m("\n                            Auto-detect "),Ae=p("br"),He=m(" Feedback"),qe=h(),De=p("button"),Ue=p("img"),Je=m("\n                            Highlight "),Ge=p("br"),Ve=m(" Positive"),Be=h(),Ye=p("button"),We=p("img"),Ke=m("\n                            Highlight "),Xe=p("br"),Ze=m(" Critical"),tt=h(),nt=p("button"),ot=p("img"),it=m("\n                            Remove "),ct=p("br"),at=m(" Feedback"),lt=h(),dt=p("button"),ut=p("img"),pt=m("\n                            Remove all "),mt=p("br"),ht=m(" Feedback"),vt=h(),bt=p("div"),wt=p("div"),Rt.c(),kt=h(),yt=p("div"),_t=p("h3"),_t.textContent="Discussion Transcript Details",xt=h(),qt&&qt.c(),w(i,"class","overlay centered padded"),$(i,"invisible",!1===e[8]),r(x.src,T="./logos/up-arrow-5-svgrepo-com.svg")||w(x,"src","./logos/up-arrow-5-svgrepo-com.svg"),w(x,"alt","Prev feedback"),w(x,"class","logo"),_(x,"width","1.5rem"),_(x,"height","1.5rem"),y.disabled=F=!e[1]||e[1].length<=0,r(j.src,O="./logos/down-arrow-5-svgrepo-com.svg")||w(j,"src","./logos/down-arrow-5-svgrepo-com.svg"),w(j,"alt","Next feedback"),w(j,"class","logo"),_(j,"width","1.5rem"),_(j,"height","1.5rem"),L.disabled=N=!e[1]||e[1].length<=0,w(b,"id","traverse-feedback-area"),w(b,"class","bordered spaced svelte-ir33lb"),w(s,"id","transcript-area"),w(s,"class","column bordered spaced svelte-ir33lb"),_(R,"font-weight","bold"),_(R,"text-decoration","underline"),_(R,"margin-left","1rem"),w(J,"for","file_upload"),_(X,"width","50%"),w(X,"name","mediafile_upload"),w(X,"type","file"),w(X,"id","mediafile_upload"),w(X,"accept","video/*, audio/*"),r(te.src,ne="./logos/upload-svgrepo-com.svg")||w(te,"src","./logos/upload-svgrepo-com.svg"),w(te,"alt","Upload file"),w(te,"class","mini-icon"),w(ee,"class","action-button centered column  svelte-ir33lb"),ee.disabled=se=e[8]||!e[4]||0===e[4].length,w(K,"class","row centered spaced"),w(I,"class","column spaced centered"),w(re,"for","file_upload"),w(ue,"name","transcirptfile_upload"),w(ue,"type","file"),w(ue,"id","transcriptfile_upload"),w(ue,"accept"," .srt"),r(me.src,we="./logos/upload-svgrepo-com.svg")||w(me,"src","./logos/upload-svgrepo-com.svg"),w(me,"alt","Upload file"),w(me,"class","mini-icon"),w(pe,"class","action-button centered column  svelte-ir33lb"),pe.disabled=$e=e[8]||!e[6]||0===e[6].length,w(de,"class","row centered"),w(ce,"class","column spaced centered"),w(U,"class","row centered spaced"),w(D,"class","row centered spaced"),w(H,"id","capture-feedback-panel"),w(H,"class","column bordered padded centered spaced svelte-ir33lb"),_(Le,"font-weight","bold"),_(Le,"text-decoration","underline"),_(Le,"margin-left","1rem"),r(Ee.src,Me="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||w(Ee,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),w(Ee,"alt","Auto-detect Feedback"),w(Ee,"class","logo"),w(Ne,"class","action-button svelte-ir33lb"),Ne.disabled=Re=!e[0]||!e[0].transcript_list||e[8],r(Ue.src,Ie="./logos/highlight-green-svgrepo-com.svg")||w(Ue,"src","./logos/highlight-green-svgrepo-com.svg"),w(Ue,"alt","Highlight Positive Feedback"),w(Ue,"class","logo"),w(De,"class","action-button svelte-ir33lb"),De.disabled=ze=!e[0]||!e[0].transcript_list||e[8],r(We.src,Qe="./logos/highlight-red-svgrepo-com.svg")||w(We,"src","./logos/highlight-red-svgrepo-com.svg"),w(We,"alt","Highlight Critical Feedback"),w(We,"class","logo"),w(Ye,"class","action-button svelte-ir33lb"),Ye.disabled=et=!e[0]||!e[0].transcript_list||e[8],r(ot.src,st="./logos/erase-svgrepo-com.svg")||w(ot,"src","./logos/erase-svgrepo-com.svg"),w(ot,"alt","De-highlight Feedback"),w(ot,"class","logo"),w(nt,"class","action-button svelte-ir33lb"),nt.disabled=rt=!e[0]||!e[0].transcript_list||e[8],r(ut.src,gt="./logos/delete-svgrepo-com.svg")||w(ut,"src","./logos/delete-svgrepo-com.svg"),w(ut,"alt","Delete all Feedback"),w(ut,"class","logo"),w(dt,"class","action-button svelte-ir33lb"),dt.disabled=ft=!e[0]||!e[0].transcript_list||e[8],w(Oe,"class","row centered spaced"),w(je,"class","centered"),_(je,"height","100%"),_(je,"width","100%"),w(Se,"id","feedback-highlight-panel"),w(Se,"class","column bordered spaced padded  svelte-ir33lb"),w(A,"id","transcript-buttons-area"),w(A,"class","row centered spaced svelte-ir33lb"),w(n,"id","left-panel"),w(n,"class","column spaced svelte-ir33lb"),w(wt,"id","media-player-area"),w(wt,"class","bordered centered svelte-ir33lb"),_(_t,"font-weight","bold"),_(_t,"text-decoration","underline"),w(yt,"id","feedback-details-area"),w(yt,"class","bordered padded spaced svelte-ir33lb"),_(yt,"overflow-y","auto"),w(bt,"id","right-panel"),w(bt,"class","column spaced svelte-ir33lb"),w(t,"div",""),w(t,"class","row spaced svelte-ir33lb"),w(t,"id","feedback-selector-page")},m(o,a){d(o,t,a),l(t,n),l(n,s),l(s,i),Y(c,i,null),l(s,f),l(s,b),Nt.m(b,null),l(b,k),l(b,y),l(y,x),l(b,S),l(b,L),l(L,j),l(s,E),Pt.m(s,null),l(n,M),l(n,A),l(A,H),l(H,R),l(H,q),l(H,D),l(D,U),l(U,I),l(I,J),l(I,Q),l(I,K),l(K,X),e[24](X),l(K,Z),l(K,ee),l(ee,te),l(ee,oe),l(U,ie),l(U,ce),l(ce,re),l(ce,le),l(ce,de),l(de,ue),e[28](ue),l(de,ge),l(de,pe),l(pe,me),l(pe,Te),l(A,Fe),l(A,Se),l(Se,Le),l(Se,Ce),l(Se,je),l(je,Oe),l(Oe,Ne),l(Ne,Ee),l(Ne,Pe),l(Ne,Ae),l(Ne,He),l(Oe,qe),l(Oe,De),l(De,Ue),l(De,Je),l(De,Ge),l(De,Ve),l(Oe,Be),l(Oe,Ye),l(Ye,We),l(Ye,Ke),l(Ye,Xe),l(Ye,Ze),l(Oe,tt),l(Oe,nt),l(nt,ot),l(nt,it),l(nt,ct),l(nt,at),l(Oe,lt),l(Oe,dt),l(dt,ut),l(dt,pt),l(dt,mt),l(dt,ht),l(t,vt),l(t,bt),l(bt,wt),Rt.m(wt,null),l(bt,kt),l(bt,yt),l(yt,_t),l(yt,xt),qt&&qt.m(yt,null),Tt=!0,$t||(Ft=[v(y,"click",e[19]),v(L,"click",e[20]),v(X,"change",e[23]),v(X,"change",e[25]),v(ee,"click",e[26]),v(ue,"change",e[27]),v(ue,"change",e[29]),v(pe,"click",e[30]),v(Ne,"click",e[31]),v(De,"click",e[32]),v(Ye,"click",e[33]),v(nt,"click",e[34]),v(dt,"click",e[35])],$t=!0)},p(e,t){const n={};!a&&1024&t[0]&&(a=!0,n.progress=e[10],P((()=>a=!1))),!g&&512&t[0]&&(g=!0,n.status=e[9],P((()=>g=!1))),c.$set(n),(!Tt||256&t[0])&&$(i,"invisible",!1===e[8]),Ot===(Ot=jt(e))&&Nt?Nt.p(e,t):(Nt.d(1),Nt=Ot(e),Nt&&(Nt.c(),Nt.m(b,k))),(!Tt||2&t[0]&&F!==(F=!e[1]||e[1].length<=0))&&(y.disabled=F),(!Tt||2&t[0]&&N!==(N=!e[1]||e[1].length<=0))&&(L.disabled=N),Mt===(Mt=Et(e))&&Pt?Pt.p(e,t):(Pt.d(1),Pt=Mt(e),Pt&&(Pt.c(),Pt.m(s,null))),(!Tt||272&t[0]&&se!==(se=e[8]||!e[4]||0===e[4].length))&&(ee.disabled=se),(!Tt||320&t[0]&&$e!==($e=e[8]||!e[6]||0===e[6].length))&&(pe.disabled=$e),(!Tt||257&t[0]&&Re!==(Re=!e[0]||!e[0].transcript_list||e[8]))&&(Ne.disabled=Re),(!Tt||257&t[0]&&ze!==(ze=!e[0]||!e[0].transcript_list||e[8]))&&(De.disabled=ze),(!Tt||257&t[0]&&et!==(et=!e[0]||!e[0].transcript_list||e[8]))&&(Ye.disabled=et),(!Tt||257&t[0]&&rt!==(rt=!e[0]||!e[0].transcript_list||e[8]))&&(nt.disabled=rt),(!Tt||257&t[0]&&ft!==(ft=!e[0]||!e[0].transcript_list||e[8]))&&(dt.disabled=ft),Ht===(Ht=At(e))&&Rt?Rt.p(e,t):(Rt.d(1),Rt=Ht(e),Rt&&(Rt.c(),Rt.m(wt,null))),e[0]&&e[0].transcript_list?qt?qt.p(e,t):(qt=xe(e),qt.c(),qt.m(yt,null)):qt&&(qt.d(1),qt=null)},i(e){Tt||(G(c.$$.fragment,e),Tt=!0)},o(e){V(c.$$.fragment,e),Tt=!1},d(n){n&&u(t),W(c),Nt.d(),Pt.d(),e[24](null),e[28](null),Rt.d(),qt&&qt.d(),$t=!1,o(Ft)}}}async function Le(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function Ce(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function je(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const o=await n.json();return[o.audiopath,o.videopath]}async function Oe(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function Ne(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function Ee(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let o=e[n],s=o.id,i=o.start_timestamp,c=o.end_timestamp,a=o.dialogue;"speaker"in o&&""!=o.speaker?t+=`${s}\n${i} --\x3e ${c}\n${o.speaker}: ${a}\n\n`:t+=`${s}\n${i} --\x3e ${c}\n${a}\n\n`}return t}(e);const o=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!o.ok)throw new Error("Failed to detect feedback");return t=(await o.json()).feedback_list,console.log(t),t}function Me(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let o=e[n];if(o.id===t)return o}return console.log("Error: Can't find excerpt with id",t),null}const Pe=(e,t)=>(e[t.speaker]=!0,e),Ae=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),He=e=>"positive"===e.type,Re=e=>"critical"===e.type;function qe(e,t,n){let o,s,i,c,a,r,l,{recording:d={}}=t,{feedback_list:u=[]}=t,g=0,p=!1,m="",h=0;async function f(){let e=await fetch("/delete_recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recording:d})});n(0,d={});let t=await e.json();return"message"in t&&console.log(t.message),t.message}async function v(){if(c){for(const e of c)if(console.log(e.type),e.type.includes("video")){if((d||"video"in d||"audio"in d||"transcript_list"in d)&&(d.video||d.audio||d.transcript_list)){if(!window.confirm("Uploading a new video will overwrite this recording. Do you want to proceed?"))return;await f()}let t=URL.createObjectURL(e);if(n(9,m="Uploading video..."),n(10,h=50),[i,s]=await je(e),!i||!s)throw i=null,s=null,new Error("Failed to extract audio from video");let o=await Le(i),c=null,a=null;n(9,m="Done!"),n(10,h=100),Z(1500),n(10,h=0),n(0,d={video:t,video_path:s,audio:o,audio_path:i,transcript:c,transcript_list:a}),i=null,s=null}else if(e.type.includes("audio")){if((d||"audio"in d||"video"in d||"transcript_list"in d)&&(d.audio||d.video||d.transcript_list)){if(!window.confirm("Uploading a new audio will overwrite this recording. Do you want to proceed?"))return;await f()}let t=URL.createObjectURL(e);n(9,m="Uploading audio..."),n(10,h=50);const o=new FormData;o.append("audio",e);const c=await fetch("/download_mic",{method:"POST",body:o});if(!c.ok)throw i=null,s=null,new Error("Failed to save uploaded audio");let a=await c.json();i=a.filepath;let r=null,l=null;n(9,m="Done!"),n(10,h=100),await Z(1500),n(10,h=0),n(0,d={video:null,video_path:null,audio:t,audio_path:i,transcript:r,transcript_list:l}),i=null,s=null}n(4,c=null),n(5,a.value="",a)}console.log("Recording",d),n(10,h=0),n(9,m="")}async function b(){if(r){for(const e of r)if(console.log(e.type),e.name.endsWith(".srt")){if((d||"transcript"in d||"transcript_list"in d)&&(d.transcript||d.transcript_list)){if(!window.confirm("Uploading a new transcript will overwrite the current transcript. Do you want to proceed?"))return;await f()}let t=new FileReader;t.onload=async function(e){console.log(undefined),n(8,p=!0);let t=e.target.result;console.log(t),n(9,m="Cleaning transcript..."),n(10,h=30);let o=await Oe(t);await Z(1500);let s=await Ne(o),i={video:null,video_path:null,audio:null,audio_path:null,transcript:o,transcript_list:s};d&&("video"in d&&d.video||"audio"in d&&d.audio)?(n(0,d.transcript_list=s,d),n(0,d),n(0,d.transcript=o,d),n(0,d),n(0,d),n(0,d)):n(0,d=i),n(9,m="Saving transcript as a database (this may take a while) ... "),n(10,h=60),await Ce(s),await re(d),console.log("Transcript list embedded"),n(9,m="Done!"),n(10,h=100),await Z(500),n(10,h=0),n(8,p=!1)},t.readAsText(e)}n(6,r=null),n(7,l.value="",l)}console.log("Recording",d),n(10,h=0),n(9,m="")}function w(e){const t=window.getSelection().toString();if(""===t.trim())return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted";if(t){let o={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},s=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let o=e[n],s=o.dialogue;if(o.speaker&&(s=o.speaker+": "+s),s.includes(t))return o}return null}(d.transcript_list,t);return s?(o.id=u.length+1,o.dialogue_id=s.id,o.speaker=s.speaker,o.excerpt_reference=s,o.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],u.push(o),n(1,u),n(0,d),x([o]),o):(console.log("Error: Corresponding transcript excerpt not found"),alert("Error: Corresponding transcript excerpt not found. Feedback not added."),"Error: Corresponding transcript excerpt not found for selection: "+t)}return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted"}function k(){const e=window.getSelection().toString();if(""===e.trim())return alert("Please highlight the feedback you want to remove using your mouse."),"Error: No text highlighted";if(e)for(let t=0;t<u.length;t++){let o=u[t];if(o.quote.includes(e)){let e=parseInt(o.dialogue_id),s=o.quote;return u.splice(t,1),n(1,u),_(e,s),o}}return"Error: Feedback not found for selection: "+e}function y(){for(let e=0;e<u.length;e++){let t=u[e];_(parseInt(t.dialogue_id),t.quote),u.splice(e,1),n(1,u)}}function _(e,t){for(let o=0;o<d.transcript_list.length;o++){let s=d.transcript_list[o];if(s.id===e){let e=s.dialogue,o=e.indexOf("<mark"),i=e.indexOf("</mark>")+7,c=e.slice(0,o)+t+e.slice(i);s.dialogue=c,s.dialogue=s.dialogue,n(0,d);break}}}function x(e){for(let t=0;t<e.length;t++){let n=e[t],o=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let s,i=parseInt(n.dialogue_id);for(let e=0;e<d.transcript_list.length;e++){let t=d.transcript_list[e];if(t.id===i){s=t;break}}if(!s){console.log("Error: Corresponding transcript excerpt not found");continue}let c=s.dialogue,a=c.indexOf(n.quote),r=a+n.quote.length,l=c.slice(0,a)+`<mark class="${o}" style="background-color:${"positive"===o?"lightgreen":"lightcoral"};">${n.quote}</mark>`+c.slice(r);s.dialogue=l}n(0,d)}S((async()=>{console.log(d)}));return e.$$set=e=>{"recording"in e&&n(0,d=e.recording),"feedback_list"in e&&n(1,u=e.feedback_list)},[d,u,g,o,c,a,r,l,p,m,h,v,b,w,k,y,x,function(e){h=e,n(10,h)},function(e){m=e,n(9,m)},async()=>{g>0?n(2,g--,g):n(2,g=u.length-1),oe(u[g]),await te("FeedbackSelector: Traverse to previous feedback",u[g])},async()=>{g<u.length-1?n(2,g++,g):n(2,g=0),oe(u[g]),await te("FeedbackSelector: Traverse to next feedback",u[g])},async e=>{ne(e.start_timestamp,o),await te("FeedbackSelector: Seeked to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackSelector: Seeked to end timestamp",e.end_timestamp)},function(){c=this.value,n(4,c)},function(e){C[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},async e=>{n(4,c=e.target.files),console.log(c),await te("FeedbackSelector: Select media file",c)},async()=>{n(8,p=!0),await v(),n(8,p=!1),await re(d),await te("FeedbackSelector: Upload media",d)},function(){r=this.value,n(6,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(7,l)}))},async e=>{n(6,r=e.target.files),await te("FeedbackSelector: Select transcript file",r)},async()=>{n(8,p=!0),await b(),n(8,p=!1),console.log(d),await te("FeedbackSelector: Upload transcript",d)},async()=>{if(u.length>0){if(!window.confirm("Auto-detecting again will clear all feedback highlighted. Do you want to proceed?"))return}n(8,p=!0),n(10,h=0);let e=d.transcript_list,t=Math.ceil(e.length/4),o=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(9,m="Detecting feedback in transcript ...");for(let e=0;e<o.length;e++){let t=await Ee(o[e]);n(1,u=u.concat(t)),n(10,h=20*(e+1)),await Z(250)}n(1,u),console.log(u);for(let e=0;e<u.length;e++){n(1,u[e].id=e+1,u);let t=u[e].dialogue_id,o=Me(d.transcript_list,t);n(1,u[e].excerpt_reference=o,u)}n(1,u),n(9,m="Highlighting feedback ..."),x(u),await le(u),await re(d),await Z(500),n(10,h=100),console.log("Feedback: "+u[0]),n(8,p=!1),n(10,h=0),n(9,m=""),await te("FeedbackSelector: Auto-detect feedback",u)},async()=>{let e=w("positive");await le(u),await re(d),await te("FeedbackSelector: Add positive feedback",e)},async()=>{let e=w("critical");await le(u),await re(d),await te("FeedbackSelector: Add critical feedback",e)},async()=>{let e=k();await le(u),await re(d),await te("FeedbackSelector: Remove feedback",e)},async()=>{y(),await le(u),await re(d),await te("FeedbackSelector: Removed all feedback",u)},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class De extends X{constructor(e){super(),K(this,e,qe,Se,i,{recording:0,feedback_list:1},null,[-1,-1,-1])}}function Ue(t){let n,s,i,c,a,r,g;return{c(){n=p("div"),s=p("input"),i=h(),c=p("span"),a=m(t[0]),w(s,"type","range"),w(s,"min",t[1]),w(s,"max",t[2]),w(s,"step",t[3]),w(s,"id","rangeSlider"),w(s,"class","svelte-ohnqtn"),w(c,"id","sliderValue"),w(n,"class","centered spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),l(n,s),y(s,t[0]),l(n,i),l(n,c),l(c,a),r||(g=[v(s,"change",t[4]),v(s,"input",t[4])],r=!0)},p(e,[t]){2&t&&w(s,"min",e[1]),4&t&&w(s,"max",e[2]),8&t&&w(s,"step",e[3]),1&t&&y(s,e[0]),1&t&&k(a,e[0])},i:e,o:e,d(e){e&&u(n),r=!1,o(g)}}}function Ie(e,t,n){let{min:o=0}=t,{max:s=2}=t,{step:i=.1}=t,{value:c=1}=t;return e.$$set=e=>{"min"in e&&n(1,o=e.min),"max"in e&&n(2,s=e.max),"step"in e&&n(3,i=e.step),"value"in e&&n(0,c=e.value)},[c,o,s,i,function(){c=function(e){return""===e?null:+e}(this.value),n(0,c)}]}class Je extends X{constructor(e){super(),K(this,e,Ie,Ue,i,{min:1,max:2,step:3,value:0})}}function Ge(e,t,n){const o=e.slice();return o[127]=t[n],o}function Ve(e,t,n){const o=e.slice();return o[130]=t[n],o[116]=n,o}function ze(e,t,n){const o=e.slice();return o[130]=t[n],o[116]=n,o}function Be(e,t,n){const o=e.slice();return o[120]=t[n],o[116]=n,o}function Ye(e,t,n){const o=e.slice();return o[122]=t[n],o}function We(e,t,n){const o=e.slice();return o[117]=t[n],o}function Qe(e,t,n){const o=e.slice();return o[122]=t[n],o}function Ke(e,t,n){const o=e.slice();return o[114]=t[n],o[116]=n,o}function Xe(e,t,n){const o=e.slice();return o[133]=t[n],o[116]=n,o}function Ze(e,t,n){const o=e.slice();return o[135]=t[n],o[116]=n,o}function et(e,t,n){const o=e.slice();return o[135]=t[n],o[136]=t,o[116]=n,o}function tt(e,t,n){const o=e.slice();return o[133]=t[n],o[116]=n,o}function nt(e){let t,n,o,s,i=e[133]+"";function c(){return e[46](e[116])}return{c(){t=p("button"),n=m(i),w(t,"class","tab svelte-gsx2hw"),$(t,"active",e[116]===e[14]),$(t,"right-bordered",e[116]<e[32].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=v(t,"click",c),o=!0)},p(n,o){e=n,16384&o[0]&&$(t,"active",e[116]===e[14])},d(e){e&&u(t),o=!1,s()}}}function ot(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=dt(Ze(e,n,t));return{c(){t=p("div");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","grid svelte-gsx2hw"),_(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(46097&s[0]|280&s[1]){let i;for(n=e[0],i=0;i<n.length;i+=1){const c=Ze(e,n,i);o[i]?o[i].p(c,s):(o[i]=dt(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),g(o,e)}}}function st(e){let t,n,s,i,c,a,m,f,b,k,y,x,T,$,F,S,L,C,j,O,N,E,M,P,A,H;function R(e,t){return e[28]&&"quote"===e[27]?gt:ut}let q=R(e),D=q(e);function U(e,t){return e[28]&&"speaker"===e[27]?mt:pt}let I=U(e),J=I(e),G=e[0],V=[];for(let t=0;t<G.length;t+=1)V[t]=xt(et(e,G,t));return{c(){t=p("div"),n=p("div"),s=p("span"),s.innerHTML="<strong>ID</strong>",i=h(),c=p("span"),a=p("strong"),a.textContent="Feedback",m=h(),f=p("button"),D.c(),b=h(),k=p("span"),y=p("strong"),y.textContent="Speaker",x=h(),T=p("button"),J.c(),$=h(),F=p("span"),F.innerHTML="<strong>Actions</strong>",S=h(),L=p("span"),C=p("strong"),C.textContent="Done?",j=h(),O=p("button"),N=p("img"),P=h();for(let e=0;e<V.length;e+=1)V[e].c();w(s,"class","centered id-col svelte-gsx2hw"),w(f,"class","action-button"),w(c,"class","centered row spaced feedback-col svelte-gsx2hw"),w(T,"class","action-button"),w(k,"class","centered row spaced speaker-col svelte-gsx2hw"),w(F,"id","feedback-buttons"),w(F,"class","centered row actions-col svelte-gsx2hw"),_(N,"height","1rem"),_(N,"width","1rem"),r(N.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||w(N,"src",E),w(N,"alt",M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending"),w(N,"class","mini-icon"),w(O,"class","action-button"),w(L,"class","centered row spaced done-col svelte-gsx2hw"),w(n,"class","feedback-header row svelte-gsx2hw"),w(t,"class","column"),_(t,"overflow-y","auto")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,c),l(c,a),l(c,m),l(c,f),D.m(f,null),l(n,b),l(n,k),l(k,y),l(k,x),l(k,T),J.m(T,null),l(n,$),l(n,F),l(n,S),l(n,L),l(L,C),l(L,j),l(L,O),l(O,N),l(t,P);for(let e=0;e<V.length;e+=1)V[e]&&V[e].m(t,null);A||(H=[v(f,"click",e[47]),v(T,"click",e[48]),v(O,"click",e[49])],A=!0)},p(e,n){if(q!==(q=R(e))&&(D.d(1),D=q(e),D&&(D.c(),D.m(f,null))),I!==(I=U(e))&&(J.d(1),J=I(e),J&&(J.c(),J.m(T,null))),402653184&n[0]&&!r(N.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&w(N,"src",E),402653184&n[0]&&M!==(M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending")&&w(N,"alt",M),46097&n[0]|280&n[1]){let o;for(G=e[0],o=0;o<G.length;o+=1){const s=et(e,G,o);V[o]?V[o].p(s,n):(V[o]=xt(s),V[o].c(),V[o].m(t,null))}for(;o<V.length;o+=1)V[o].d(1);V.length=G.length}},d(e){e&&u(t),D.d(),J.d(),g(V,e),A=!1,o(H)}}}function it(e){let t,n,s,i,c,a,r,g,f,b,y,_,x,T,F,S,L,C,j,O,N,E,M,P,A,H,R=e[135].quote+"",q=e[135].speaker+"";function D(e,t){return"excerpt_reference"in e[135]?at:ct}let U=D(e),I=U(e);function J(){return e[59](e[135])}function G(){return e[60](e[135])}function V(){return e[61](e[135])}function z(){return e[62](e[135])}function B(...t){return e[63](e[135],...t)}return{c(){t=p("div"),n=p("div"),s=p("small"),I.c(),i=h(),c=p("div"),a=p("button"),a.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 2.3rem; width: 2.3rem;"/>',r=h(),g=p("button"),g.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add note" class="mini-icon"/>',f=h(),b=p("button"),b.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Paraphrase positively" style="height: 2rem; width: 2rem;"/>',y=h(),_=p("br"),x=h(),T=p("p"),F=m('"'),S=m(R),L=m('"'),C=h(),j=p("br"),O=h(),N=p("span"),E=m("- "),M=m(q),P=h(),w(s,"class","timestamp svelte-gsx2hw"),w(a,"class","action-button"),w(g,"class","action-button"),w(b,"class","action-button"),w(c,"class","row spaced"),w(n,"class","note-header row space-between"),w(t,"class","positive-feedback-note svelte-gsx2hw"),$(t,"selected",e[135]===e[12])},m(e,o){d(e,t,o),l(t,n),l(n,s),I.m(s,null),l(n,i),l(n,c),l(c,a),l(c,r),l(c,g),l(c,f),l(c,b),l(t,y),l(t,_),l(t,x),l(t,T),l(T,F),l(T,S),l(T,L),l(t,C),l(t,j),l(t,O),l(t,N),l(N,E),l(N,M),l(t,P),A||(H=[v(s,"click",J),v(a,"click",G),v(g,"click",V),v(b,"click",z),v(t,"click",B)],A=!0)},p(n,o){U===(U=D(e=n))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(s,null))),1&o[0]&&R!==(R=e[135].quote+"")&&k(S,R),1&o[0]&&q!==(q=e[135].speaker+"")&&k(M,q),4097&o[0]&&$(t,"selected",e[135]===e[12])},d(e){e&&u(t),I.d(),A=!1,o(H)}}}function ct(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function at(e){let t;function n(e,t){return"start_timestamp"in e[135].excerpt_reference?lt:rt}let o=n(e),s=o(e);return{c(){s.c(),t=f()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function rt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function lt(e){let t,n,o,s=e[135].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(s),o=m("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[135].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function dt(e){let t,n="positive"===e[135].type&&it(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"positive"===e[135].type?n?n.p(e,o):(n=it(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function ut(e){let t,n;return{c(){t=p("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function gt(e){let t,n;return{c(){t=p("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function pt(e){let t,n;return{c(){t=p("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function mt(e){let t,n;return{c(){t=p("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ht(e){let t,n,s,i,c,a,r,g,f,b,y,_,x,T,F,S,L,C,j,O,N,E,M,P,A,H,R,q=e[135].id+"",D=(e[135].speaker?e[135].speaker:"Unknown")+"";function U(e,t){return"excerpt_reference"in e[135]?vt:ft}let I=U(e),J=I(e);function G(){return e[50](e[135])}function V(e,t){return e[135].positivised_quote&&e[135].show_paraphrased?yt:kt}let z=V(e),B=z(e);function Y(){return e[53](e[135],e[136],e[116])}function W(){return e[54](e[135])}function Q(){return e[55](e[135])}function K(){return e[56](e[135])}function X(){e[57].call(P,e[136],e[116])}function Z(...t){return e[58](e[135],...t)}return{c(){t=p("div"),n=p("span"),s=p("strong"),i=m(q),c=h(),a=p("div"),r=p("span"),g=p("span"),J.c(),f=h(),B.c(),b=h(),y=p("span"),_=m(D),x=h(),T=p("div"),F=p("button"),F.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon"/>\n                                            Positivize',S=h(),L=p("button"),L.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 3.3rem; width: 3.3rem;"/>\n                                            Select Context',C=h(),j=p("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Add Note',O=h(),N=p("button"),N.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Delete',E=h(),M=p("span"),P=p("input"),A=h(),w(n,"class","id-col svelte-gsx2hw"),w(g,"class","timestamp svelte-gsx2hw"),w(r,"class",""),w(a,"class","column feedback-col svelte-gsx2hw"),w(y,"class","centered speaker-col svelte-gsx2hw"),w(F,"class","action-button"),w(L,"class","action-button centered column"),w(j,"class","action-button"),w(N,"class","action-button"),w(T,"id","feedback-buttons"),w(T,"class","row centered spaced actions-col svelte-gsx2hw"),w(P,"type","checkbox"),w(M,"class","centered done-col svelte-gsx2hw"),w(t,"class","feedback-row row bordered padded svelte-gsx2hw"),$(t,"done",e[135].done),$(t,"selected",e[135]===e[12])},m(o,u){d(o,t,u),l(t,n),l(n,s),l(s,i),l(t,c),l(t,a),l(a,r),l(r,g),J.m(g,null),l(r,f),B.m(r,null),l(t,b),l(t,y),l(y,_),l(t,x),l(t,T),l(T,F),l(T,S),l(T,L),l(T,C),l(T,j),l(T,O),l(T,N),l(t,E),l(t,M),l(M,P),P.checked=e[135].done,l(t,A),H||(R=[v(g,"click",G),v(F,"click",Y),v(L,"click",W),v(j,"click",Q),v(N,"click",K),v(P,"change",X),v(t,"click",Z)],H=!0)},p(n,o){e=n,1&o[0]&&q!==(q=e[135].id+"")&&k(i,q),I===(I=U(e))&&J?J.p(e,o):(J.d(1),J=I(e),J&&(J.c(),J.m(g,null))),z===(z=V(e))&&B?B.p(e,o):(B.d(1),B=z(e),B&&(B.c(),B.m(r,null))),1&o[0]&&D!==(D=(e[135].speaker?e[135].speaker:"Unknown")+"")&&k(_,D),1&o[0]&&(P.checked=e[135].done),1&o[0]&&$(t,"done",e[135].done),4097&o[0]&&$(t,"selected",e[135]===e[12])},d(e){e&&u(t),J.d(),B.d(),H=!1,o(R)}}}function ft(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function vt(e){let t;function n(e,t){return"start_timestamp"in e[135].excerpt_reference?wt:bt}let o=n(e),s=o(e);return{c(){s.c(),t=f()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function bt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function wt(e){let t,n,o,s=e[135].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(s),o=m("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[135].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function kt(e){let t,n,o,s,i=e[135].quote+"",c=e[135].positivised_quote&&!e[135].show_paraphrased&&_t(e);return{c(){t=m('"'),n=m(i),o=m('" '),c&&c.c(),s=f()},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i),c&&c.m(e,i),d(e,s,i)},p(e,t){1&t[0]&&i!==(i=e[135].quote+"")&&k(n,i),e[135].positivised_quote&&!e[135].show_paraphrased?c?c.p(e,t):(c=_t(e),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(e){e&&u(t),e&&u(n),e&&u(o),c&&c.d(e),e&&u(s)}}}function yt(e){let t,n,o,s,i,c,a,r=e[135].positivised_quote+"";function l(){return e[51](e[135])}return{c(){t=p("strong"),t.textContent="(Paraphrased Feedback)",n=m(' "'),o=m(r),s=m('" \n                                                '),i=p("span"),i.textContent="(View original quote)",w(i,"class","clickable svelte-gsx2hw")},m(e,r){d(e,t,r),d(e,n,r),d(e,o,r),d(e,s,r),d(e,i,r),c||(a=v(i,"click",l),c=!0)},p(t,n){e=t,1&n[0]&&r!==(r=e[135].positivised_quote+"")&&k(o,r)},d(e){e&&u(t),e&&u(n),e&&u(o),e&&u(s),e&&u(i),c=!1,a()}}}function _t(e){let t,n,o;function s(){return e[52](e[135])}return{c(){t=p("span"),t.textContent="(View paraphrased quote)",w(t,"class","clickable svelte-gsx2hw")},m(e,i){d(e,t,i),n||(o=v(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function xt(e){let t,n="critical"===e[135].type&&ht(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"critical"===e[135].type?n?n.p(e,o):(n=ht(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function Tt(e){let t,n,o,s,i=e[133]+"";function c(){return e[64](e[116])}return{c(){t=p("button"),n=m(i),w(t,"class","tab svelte-gsx2hw"),$(t,"active",e[116]===e[13]),$(t,"right-bordered",e[116]<e[33].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=v(t,"click",c),o=!0)},p(n,o){e=n,8192&o[0]&&$(t,"active",e[116]===e[13])},d(e){e&&u(t),o=!1,s()}}}function $t(t){let n,s,i,c,a,r,g,m,f,b,k,y,x,T,F,S,L;function C(e,t){return e[3].length>0?Ct:Lt}let j=C(t),O=j(t),N=t[29]&&Ot(t);function E(e,t){return 16&t[0]&&(F=null),null==F&&(F=!!(Object.keys(e[4]).length>0)),F?Et:Nt}let M=E(t,[-1,-1,-1,-1,-1]),P=M(t);return{c(){n=p("div"),s=p("div"),i=p("div"),i.innerHTML='<span style="text-decoration: underline;"><strong>My Notes</strong></span>',c=h(),a=p("div"),O.c(),r=h(),N&&N.c(),g=h(),m=p("div"),f=p("button"),f.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                    Add Note',b=h(),k=p("button"),k.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                    Delete all',y=h(),x=p("div"),x.innerHTML='<span style="text-decoration: underline;"><strong>My Feedback Notes</strong></span>',T=h(),P.c(),w(i,"class","row centered"),_(i,"width","100%"),_(i,"height","auto"),w(a,"class","column bordered"),_(a,"width","100%"),_(a,"height","auto"),$(a,"centered",t[3].length<=0),w(f,"class","action-button centered column"),w(k,"class","action-button centered column"),w(m,"class","row centered spaced"),w(s,"class","column centered spaced padded"),_(s,"width","100%"),_(s,"height","auto"),w(x,"class","row centered"),_(x,"width","100%"),_(x,"height","auto"),w(n,"class","column spaced padded"),_(n,"width","100%"),_(n,"height","100%"),_(n,"overflow-y","auto")},m(e,o){d(e,n,o),l(n,s),l(s,i),l(s,c),l(s,a),O.m(a,null),l(a,r),N&&N.m(a,null),l(s,g),l(s,m),l(m,f),l(m,b),l(m,k),l(n,y),l(n,x),l(n,T),P.m(n,null),S||(L=[v(f,"click",t[103]),v(k,"click",t[104])],S=!0)},p(e,t){j===(j=C(e))&&O?O.p(e,t):(O.d(1),O=j(e),O&&(O.c(),O.m(a,r))),e[29]?N?N.p(e,t):(N=Ot(e),N.c(),N.m(a,null)):N&&(N.d(1),N=null),8&t[0]&&$(a,"centered",e[3].length<=0),M===(M=E(e,t))&&P?P.p(e,t):(P.d(1),P=M(e),P&&(P.c(),P.m(n,null)))},i:e,o:e,d(e){e&&u(n),O.d(),N&&N.d(),P.d(),S=!1,o(L)}}}function Ft(e){let t,n,s,i,c,a,m,f,b,k,y,T,F,S,L,C,j,O=Object.keys(e[31]),N=[];for(let t=0;t<O.length;t+=1)N[t]=qt(Qe(e,O,t));const E=[Ut,Dt],P=[];function A(e,t){return e[6]?1:0}return F=A(e),S=P[F]=E[F](e),{c(){t=p("div"),n=p("div"),s=p("div"),i=p("span"),i.textContent="Model:",c=h(),a=p("select");for(let e=0;e<N.length;e+=1)N[e].c();m=h(),f=p("button"),b=p("img"),T=h(),S.c(),void 0===e[7]&&M((()=>e[70].call(a))),w(s,"class","row spaced centered"),_(s,"height","auto"),_(s,"width","100%"),$(s,"gone",e[6]),w(b,"class","action-icon"),r(b.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg")||w(b,"src",k),w(b,"alt",y=e[6]?"Exit chatbot settings":"Open chatbot settings"),_(b,"width","2.5rem"),_(b,"height","2.5rem"),w(f,"class","action-button"),w(n,"id","chatbot-header"),w(n,"class","padded row space-between svelte-gsx2hw"),w(t,"id","chatbot-tab-content"),w(t,"class","column svelte-gsx2hw")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,c),l(s,a);for(let e=0;e<N.length;e+=1)N[e]&&N[e].m(a,null);x(a,e[7],!0),l(n,m),l(n,f),l(f,b),l(t,T),P[F].m(t,null),L=!0,C||(j=[v(a,"change",e[70]),v(f,"click",e[71])],C=!0)},p(e,n){if(1&n[1]){let t;for(O=Object.keys(e[31]),t=0;t<O.length;t+=1){const o=Qe(e,O,t);N[t]?N[t].p(o,n):(N[t]=qt(o),N[t].c(),N[t].m(a,null))}for(;t<N.length;t+=1)N[t].d(1);N.length=O.length}128&n[0]|1&n[1]&&x(a,e[7]),(!L||64&n[0])&&$(s,"gone",e[6]),(!L||64&n[0]&&!r(b.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg"))&&w(b,"src",k),(!L||64&n[0]&&y!==(y=e[6]?"Exit chatbot settings":"Open chatbot settings"))&&w(b,"alt",y);let o=F;F=A(e),F===o?P[F].p(e,n):(I(),V(P[o],1,1,(()=>{P[o]=null})),J(),S=P[F],S?S.p(e,n):(S=P[F]=E[F](e),S.c()),G(S,1),S.m(t,null))},i(e){L||(G(S),L=!0)},o(e){V(S),L=!1},d(e){e&&u(t),g(N,e),P[F].d(),C=!1,o(j)}}}function St(t){let n,o,s,i;function c(e,t){return e[5]&&e[5].video?cn:e[5]&&e[5].audio?sn:on}let a=c(t),r=a(t),g=t[5]&&t[5].transcript&&an(t);return{c(){n=p("div"),o=p("div"),r.c(),s=h(),i=p("div"),g&&g.c(),w(o,"id","media-player-area"),w(o,"class","bordered svelte-gsx2hw"),w(i,"id","transcript-area"),w(i,"class","column bordered spaced svelte-gsx2hw"),w(n,"class","column padded spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,t){d(e,n,t),l(n,o),r.m(o,null),l(n,s),l(n,i),g&&g.m(i,null)},p(e,t){a===(a=c(e))&&r?r.p(e,t):(r.d(1),r=a(e),r&&(r.c(),r.m(o,null))),e[5]&&e[5].transcript?g?g.p(e,t):(g=an(e),g.c(),g.m(i,null)):g&&(g.d(1),g=null)},i:e,o:e,d(e){e&&u(n),r.d(),g&&g.d()}}}function Lt(t){let n;return{c(){n=p("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded space-between centered")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Ct(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=jt(ze(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(8&s[0]|8192&s[1]){let i;for(n=e[3],i=0;i<n.length;i+=1){const c=ze(e,n,i);o[i]?o[i].p(c,s):(o[i]=jt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){g(o,e),e&&u(t)}}}function jt(e){let t,n,o,s,i,c,a,r,g,f=e[130]+"";function b(){return e[99](e[116],e[130])}return{c(){t=p("div"),n=p("p"),o=m(f),s=h(),i=p("div"),c=p("button"),c.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Delete note" class="mini-icon"/>',a=h(),w(c,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,s),l(t,i),l(i,c),l(t,a),r||(g=v(c,"click",b),r=!0)},p(t,n){e=t,8&n[0]&&f!==(f=e[130]+"")&&k(o,f)},d(e){e&&u(t),r=!1,g()}}}function Ot(e){let t,n,s,i,c,a,r,g,m;return{c(){t=p("div"),n=p("input"),s=h(),i=p("div"),c=p("button"),c.innerHTML='<img src="./logos/check-svgrepo-com.svg" alt="Confirm adding note" class="mini-icon"/>',a=h(),r=p("button"),r.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Cancel adding note" class="mini-icon"/>',w(n,"class","note-input svelte-gsx2hw"),w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action-button"),w(r,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,c),l(i,a),l(i,r),g||(m=[v(n,"input",e[100]),v(c,"click",e[101]),v(r,"click",e[102])],g=!0)},p(e,t){1073741824&t[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),g=!1,o(m)}}}function Nt(t){let n;return{c(){n=p("div"),n.innerHTML='<div class="row space-between centered" style="width:100%; height:auto;"><span>No feedback notes added. Feel free to add notes on your feedback by clicking &quot;Add Note&quot; on any of the critical feedback.</span></div>',w(n,"class","column centered spaced padded"),_(n,"width","100%"),_(n,"height","auto")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Et(e){let t,n=Object.keys(e[4]).map(Number).sort(un),o=[];for(let t=0;t<n.length;t+=1)o[t]=Rt(Ge(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(1073741841&s[0]|24576&s[1]){let i;for(n=Object.keys(e[4]).map(Number).sort(un),i=0;i<n.length;i+=1){const c=Ge(e,n,i);o[i]?o[i].p(c,s):(o[i]=Rt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){g(o,e),e&&u(t)}}}function Mt(t){let n;return{c(){n=p("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded centered space-between")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Pt(e){let t,n=e[4][e[127]].notes,o=[];for(let t=0;t<n.length;t+=1)o[t]=At(Ve(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(16&s[0]|8192&s[1]){let i;for(n=e[4][e[127]].notes,i=0;i<n.length;i+=1){const c=Ve(e,n,i);o[i]?o[i].p(c,s):(o[i]=At(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){g(o,e),e&&u(t)}}}function At(e){let t,n,o,s,i,c,a,g,f,b,y,_,x=e[130]+"";function T(){return e[106](e[116],e[127],e[130])}return{c(){t=p("div"),n=p("p"),o=m(x),s=h(),i=p("div"),c=p("button"),a=p("img"),b=h(),r(a.src,g="./logos/delete-x-svgrepo-com.svg")||w(a,"src","./logos/delete-x-svgrepo-com.svg"),w(a,"alt",f="Delete note from Feedback ID"+e[127]),w(a,"class","mini-icon"),w(c,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(t,s),l(t,i),l(i,c),l(c,a),l(t,b),y||(_=v(c,"click",T),y=!0)},p(t,n){e=t,16&n[0]&&x!==(x=e[130]+"")&&k(o,x),16&n[0]&&f!==(f="Delete note from Feedback ID"+e[127])&&w(a,"alt",f)},d(e){e&&u(t),y=!1,_()}}}function Ht(e){let t,n,s,i,c,a,r,g,m;function f(){return e[108](e[127])}function b(){return e[109](e[127])}return{c(){t=p("div"),n=p("input"),s=h(),i=p("div"),c=p("button"),c.innerHTML='<img src="./logos/check-svgrepo-com.svg" alt="Confirm adding note" class="mini-icon"/>',a=h(),r=p("button"),r.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Cancel adding note" class="mini-icon"/>',w(n,"class","note-input svelte-gsx2hw"),w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action-button"),w(r,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,c),l(i,a),l(i,r),g||(m=[v(n,"input",e[107]),v(c,"click",f),v(r,"click",b)],g=!0)},p(t,o){e=t,1073741824&o[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),g=!1,o(m)}}}function Rt(e){let t,n,s,i,c,a,r,g,f,b,y,x,T,F,S,L,C,j,O,N,E,M,P,A,H=e[127]+"",R=e[0][e[127]-1].quote.slice(0,70)+"";function q(){return e[105](e[127])}function D(e,t){return e[4][e[127]].notes.length>0?Pt:Mt}let U=D(e),I=U(e),J=e[4][e[127]].is_adding&&Ht(e);function G(){return e[110](e[127])}function V(){return e[111](e[127])}return{c(){t=p("div"),n=p("div"),s=p("span"),i=p("strong"),c=m("Feedback #"),a=m(H),r=m(" Notes:"),g=h(),f=m(R),b=m("..."),y=h(),x=p("button"),x.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove feedback notes section" class="mini-icon"/>',T=h(),F=p("div"),I.c(),S=h(),J&&J.c(),L=h(),C=p("div"),j=p("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                            Add Note',O=h(),N=p("button"),N.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                            Delete all',E=h(),w(x,"class","action-button"),w(n,"class","row space-between"),_(n,"width","100%"),_(n,"height","auto"),w(F,"class","column bordered"),_(F,"width","100%"),_(F,"height","auto"),$(F,"centered",e[4][e[127]].notes.length<=0),w(j,"class","action-button centered column"),w(N,"class","action-button centered column"),w(C,"class","row centered spaced"),w(t,"id",M="feedback-note-section-"+e[127]),w(t,"class","column centered spaced padded svelte-gsx2hw"),_(t,"width","100%"),_(t,"height","auto")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(s,i),l(i,c),l(i,a),l(i,r),l(s,g),l(s,f),l(s,b),l(n,y),l(n,x),l(t,T),l(t,F),I.m(F,null),l(F,S),J&&J.m(F,null),l(t,L),l(t,C),l(C,j),l(C,O),l(C,N),l(t,E),P||(A=[v(x,"click",q),v(j,"click",G),v(N,"click",V)],P=!0)},p(n,o){e=n,16&o[0]&&H!==(H=e[127]+"")&&k(a,H),17&o[0]&&R!==(R=e[0][e[127]-1].quote.slice(0,70)+"")&&k(f,R),U===(U=D(e))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(F,S))),e[4][e[127]].is_adding?J?J.p(e,o):(J=Ht(e),J.c(),J.m(F,null)):J&&(J.d(1),J=null),16&o[0]&&$(F,"centered",e[4][e[127]].notes.length<=0),16&o[0]&&M!==(M="feedback-note-section-"+e[127])&&w(t,"id",M)},d(e){e&&u(t),I.d(),J&&J.d(),P=!1,o(A)}}}function qt(t){let n,o,s=t[122]+"";return{c(){n=p("option"),o=m(s),n.__value=t[122],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Dt(e){let t,n,s,i,c,a,f,b,k,y,T,F,S,L,j,O,N,E,A,H,R,q,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,ge,pe,me,he,fe,ve=Object.keys(e[31]),be=[];for(let t=0;t<ve.length;t+=1)be[t]=It(Ye(e,ve,t));function we(t){e[90](t)}let ke={min:"0.0",max:"2.0",step:"0.1"};function ye(t){e[91](t)}void 0!==e[8]&&(ke.value=e[8]),S=new Je({props:ke}),C.push((()=>z(S,"value",we)));let _e={min:"10.0",max:"4095.0",step:"1.0"};function xe(t){e[92](t)}function Te(t){e[93](t)}void 0!==e[9]&&(_e.value=e[9]),A=new Je({props:_e}),C.push((()=>z(A,"value",ye)));let $e={};function Fe(e,t){return e[1].length>0?Gt:Jt}void 0!==e[25]&&($e.progress=e[25]),void 0!==e[24]&&($e.status=e[24]),Q=new ae({props:$e}),C.push((()=>z(Q,"progress",xe))),C.push((()=>z(Q,"status",Te)));let Se=Fe(e),Le=Se(e);return{c(){t=p("div"),n=p("div"),s=p("span"),s.innerHTML="<strong>Configurations</strong>",i=h(),c=p("div"),a=p("span"),a.textContent="Model:",f=h(),b=p("select");for(let e=0;e<be.length;e+=1)be[e].c();k=h(),y=p("div"),T=p("span"),T.textContent="Temperature:",F=h(),B(S.$$.fragment),j=h(),O=p("div"),N=p("span"),N.textContent="Max Output Tokens:",E=h(),B(A.$$.fragment),R=h(),q=p("div"),D=p("span"),D.innerHTML="<strong>Chatbot&#39;s Resources</strong>",U=h(),I=p("div"),J=p("div"),B(Q.$$.fragment),Z=h(),Le.c(),ee=h(),te=p("div"),ne=p("input"),oe=h(),se=p("button"),ie=p("img"),re=m("\n                                            Add Document"),le=h(),de=p("button"),ue=p("img"),pe=m("\n                                            Remove All"),void 0===e[7]&&M((()=>e[89].call(b))),w(c,"class","row spaced centered"),_(c,"height","auto"),_(c,"width","100%"),w(y,"class","row spaced"),_(y,"height","auto"),_(y,"width","100%"),w(O,"class","row spaced"),_(O,"height","auto"),_(O,"width","100%"),w(n,"id","chatbot-configurations"),w(n,"class","column centered spaced padded bordered"),w(J,"class","overlay centered padded"),$(J,"invisible",!1===e[26]),w(I,"id","chatbot-rag-sources"),w(I,"class","column centered spaced padded bordered"),_(I,"width","100%"),_(I,"height","auto"),_(I,"overflow-y","auto"),w(ne,"type","file"),w(ne,"id","document_file_input"),w(ne,"class","gone"),r(ie.src,ce="./logos/add-ellipse-svgrepo-com.svg")||w(ie,"src","./logos/add-ellipse-svgrepo-com.svg"),w(ie,"alt","Add document"),w(ie,"class","action-icon"),se.disabled=e[26],w(se,"class","centered spaced column action-button"),r(ue.src,ge="./logos/delete-svgrepo-com.svg")||w(ue,"src","./logos/delete-svgrepo-com.svg"),w(ue,"alt","Remove all documents"),w(ue,"class","action-icon"),de.disabled=e[26],w(de,"class","centered spaced column action-button"),w(te,"id","chatbot-rag-buttons"),w(te,"class","row centered padded spaced"),_(te,"width","100%"),_(te,"height","auto"),w(q,"id","chatbot-rag-panel"),w(q,"class","column centered spaced padded bordered"),w(t,"id","chatbot-settings"),w(t,"class","column padded spaced"),_(t,"width","100%"),_(t,"height","95%")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,c),l(c,a),l(c,f),l(c,b);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(b,null);x(b,e[7],!0),l(n,k),l(n,y),l(y,T),l(y,F),Y(S,y,null),l(n,j),l(n,O),l(O,N),l(O,E),Y(A,O,null),l(t,R),l(t,q),l(q,D),l(q,U),l(q,I),l(I,J),Y(Q,J,null),l(I,Z),Le.m(I,null),l(q,ee),l(q,te),l(te,ne),e[95](ne),l(te,oe),l(te,se),l(se,ie),l(se,re),l(te,le),l(te,de),l(de,ue),l(de,pe),me=!0,he||(fe=[v(b,"change",e[89]),v(ne,"change",e[96]),v(se,"click",e[97]),v(de,"click",e[98])],he=!0)},p(e,t){if(1&t[1]){let n;for(ve=Object.keys(e[31]),n=0;n<ve.length;n+=1){const o=Ye(e,ve,n);be[n]?be[n].p(o,t):(be[n]=It(o),be[n].c(),be[n].m(b,null))}for(;n<be.length;n+=1)be[n].d(1);be.length=ve.length}128&t[0]|1&t[1]&&x(b,e[7]);const n={};!L&&256&t[0]&&(L=!0,n.value=e[8],P((()=>L=!1))),S.$set(n);const o={};!H&&512&t[0]&&(H=!0,o.value=e[9],P((()=>H=!1))),A.$set(o);const s={};!K&&33554432&t[0]&&(K=!0,s.progress=e[25],P((()=>K=!1))),!X&&16777216&t[0]&&(X=!0,s.status=e[24],P((()=>X=!1))),Q.$set(s),(!me||67108864&t[0])&&$(J,"invisible",!1===e[26]),Se===(Se=Fe(e))&&Le?Le.p(e,t):(Le.d(1),Le=Se(e),Le&&(Le.c(),Le.m(I,null))),(!me||67108864&t[0])&&(se.disabled=e[26]),(!me||67108864&t[0])&&(de.disabled=e[26])},i(e){me||(G(S.$$.fragment,e),G(A.$$.fragment,e),G(Q.$$.fragment,e),me=!0)},o(e){V(S.$$.fragment,e),V(A.$$.fragment,e),V(Q.$$.fragment,e),me=!1},d(n){n&&u(t),g(be,n),W(S),W(A),W(Q),Le.d(),e[95](null),he=!1,o(fe)}}}function Ut(e){let t,n,s,i,c,a,m,f,k,x,T,F,S,L,j,O,N,E,M,A,H,R,q,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,ge,pe,me,he,fe,ve=e[2],be=[];for(let t=0;t<ve.length;t+=1)be[t]=Xt(We(e,ve,t));function we(t){e[76](t)}function ke(t){e[77](t)}let ye={};function _e(e,t){return e[15]?en:Zt}void 0!==e[23]&&(ye.progress=e[23]),void 0!==e[22]&&(ye.status=e[22]),f=new ae({props:ye}),C.push((()=>z(f,"progress",we))),C.push((()=>z(f,"status",ke)));let xe=_e(e),Te=xe(e);function $e(e,t){return e[17]?nn:tn}let Fe=$e(e),Se=Fe(e);return{c(){t=p("div"),n=p("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",s=h();for(let e=0;e<be.length;e+=1)be[e].c();i=h(),c=p("div"),a=p("p"),a.innerHTML="<strong>assistant:</strong>",m=h(),B(f.$$.fragment),T=h(),F=p("div"),S=h(),L=p("div"),j=p("div"),O=p("div"),N=p("span"),N.innerHTML="<strong>Feedback Context:</strong>",E=h(),Te.c(),A=h(),H=p("div"),R=p("span"),R.innerHTML="<strong>Suggested messages:</strong>",q=h(),D=p("div"),D.textContent="Explain feedback.",U=h(),I=p("div"),I.textContent="Brainstorm actions.",Q=h(),K=p("div"),Se.c(),Z=h(),ee=p("div"),te=p("div"),ne=p("label"),oe=h(),se=p("input"),ie=h(),ce=p("button"),ce.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon"/>',re=h(),le=p("textarea"),de=h(),ue=p("button"),ge=p("img"),w(n,"class","assistant padded svelte-gsx2hw"),w(c,"class","assistant padded column svelte-gsx2hw"),$(c,"invisible",!1===e[21]),_(F,"height","20%"),_(F,"width","100%"),_(F,"background-color","white"),_(F,"color","white"),_(F,"cursor","default"),w(t,"id","chatbot-messages"),w(t,"class","column spaced bordered padded svelte-gsx2hw"),w(O,"id","contexts"),w(O,"class","column centered bordered svelte-gsx2hw"),w(O,"style",M=e[17]?"width:30%;":"width:45%;"),w(D,"class","suggested-message svelte-gsx2hw"),w(I,"class","suggested-message svelte-gsx2hw"),w(H,"id","suggested-messages"),w(H,"class","column centered bordered svelte-gsx2hw"),w(H,"style",J=e[17]?"width:30%;":"width:45%;"),w(K,"id","visual-context"),w(K,"class","column centered bordered svelte-gsx2hw"),w(K,"style",X=e[17]?"width:30%;":"display:none;"),w(j,"id","chatbot-utilities"),w(j,"class","row centered spaced svelte-gsx2hw"),w(ne,"for","image_upload"),_(ne,"display","none"),w(se,"accept","image/png, image/jpeg"),w(se,"type","file"),_(se,"display","none"),w(se,"id","image_upload"),w(se,"name","image_upload"),w(ce,"class","action-button centered column"),w(te,"class","column spaced"),_(le,"width","100%"),_(le,"height","100%"),w(le,"placeholder","Type your message here..."),w(le,"id","textarea"),r(ge.src,pe="./logos/send-svgrepo-com.svg")||w(ge,"src","./logos/send-svgrepo-com.svg"),w(ge,"alt","Send"),w(ge,"class","action-icon"),w(ue,"class","action-button centered column"),ue.disabled=e[21],w(ee,"id","chatbot-input"),w(ee,"class","row spaced centered svelte-gsx2hw"),w(L,"id","chatbot-actions"),w(L,"class","column padded spaced centered svelte-gsx2hw")},m(o,r){d(o,t,r),l(t,n),l(t,s);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(t,null);l(t,i),l(t,c),l(c,a),l(c,m),Y(f,c,null),l(t,T),l(t,F),d(o,S,r),d(o,L,r),l(L,j),l(j,O),l(O,N),l(O,E),Te.m(O,null),l(j,A),l(j,H),l(H,R),l(H,q),l(H,D),l(H,U),l(H,I),l(j,Q),l(j,K),Se.m(K,null),l(L,Z),l(L,ee),l(ee,te),l(te,ne),l(te,oe),l(te,se),e[83](se),l(te,ie),l(te,ce),l(ee,re),l(ee,le),y(le,e[11]),l(ee,de),l(ee,ue),l(ue,ge),me=!0,he||(fe=[v(D,"click",b(e[79])),v(I,"click",b(e[80])),v(se,"change",e[82]),v(se,"change",e[84]),v(ce,"click",b(e[85])),v(le,"input",e[86]),v(le,"keydown",e[87]),v(ue,"click",b(e[88]))],he=!0)},p(e,n){if(2105372&n[0]|4096&n[1]){let o;for(ve=e[2],o=0;o<ve.length;o+=1){const s=We(e,ve,o);be[o]?be[o].p(s,n):(be[o]=Xt(s),be[o].c(),be[o].m(t,i))}for(;o<be.length;o+=1)be[o].d(1);be.length=ve.length}const o={};!k&&8388608&n[0]&&(k=!0,o.progress=e[23],P((()=>k=!1))),!x&&4194304&n[0]&&(x=!0,o.status=e[22],P((()=>x=!1))),f.$set(o),(!me||2097152&n[0])&&$(c,"invisible",!1===e[21]),xe===(xe=_e(e))&&Te?Te.p(e,n):(Te.d(1),Te=xe(e),Te&&(Te.c(),Te.m(O,null))),(!me||131072&n[0]&&M!==(M=e[17]?"width:30%;":"width:45%;"))&&w(O,"style",M),(!me||131072&n[0]&&J!==(J=e[17]?"width:30%;":"width:45%;"))&&w(H,"style",J),Fe===(Fe=$e(e))&&Se?Se.p(e,n):(Se.d(1),Se=Fe(e),Se&&(Se.c(),Se.m(K,null))),(!me||131072&n[0]&&X!==(X=e[17]?"width:30%;":"display:none;"))&&w(K,"style",X),2048&n[0]&&y(le,e[11]),(!me||2097152&n[0])&&(ue.disabled=e[21])},i(e){me||(G(f.$$.fragment,e),me=!0)},o(e){V(f.$$.fragment,e),me=!1},d(n){n&&u(t),g(be,n),W(f),n&&u(S),n&&u(L),Te.d(),Se.d(),e[83](null),he=!1,o(fe)}}}function It(t){let n,o,s=t[122]+"";return{c(){n=p("option"),o=m(s),n.__value=t[122],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Jt(t){let n;return{c(){n=p("span"),n.textContent="No resources available."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Gt(e){let t,n=e[1],o=[];for(let t=0;t<n.length;t+=1)o[t]=Vt(Be(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(117440514&s[0]|1024&s[1]){let i;for(n=e[1],i=0;i<n.length;i+=1){const c=Be(e,n,i);o[i]?o[i].p(c,s):(o[i]=Vt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){g(o,e),e&&u(t)}}}function Vt(e){let t,n,o,s,i,c,a,g,f,y=e[120]+"";function _(){return e[94](e[120],e[116])}return{c(){t=p("div"),n=m(y),o=h(),s=p("button"),i=p("img"),a=h(),r(i.src,c="./logos/delete-x-svgrepo-com.svg")||w(i,"src","./logos/delete-x-svgrepo-com.svg"),w(i,"alt","Remove document"),w(i,"class","mini-icon"),s.disabled=e[26],w(s,"class","action-button"),w(t,"class","row centered spaced bordered centered")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,s),l(s,i),l(t,a),g||(f=v(s,"click",b(_)),g=!0)},p(t,o){e=t,2&o[0]&&y!==(y=e[120]+"")&&k(n,y),67108864&o[0]&&(s.disabled=e[26])},d(e){e&&u(t),g=!1,f()}}}function zt(e){let t,n,s,i,c,a,r,g,f,b,y,_,x,T,$,F,S,L,C,j,O,N,E,M,P,A=e[117].role+"",H=e[117].content+"",R="context"in e[117]&&Bt(e),q="image"in e[117]&&Yt(e);function D(){return e[72](e[117])}let U="context"in e[117]&&Wt(e);function I(){return e[74](e[117])}let J="user"===e[117].role&&Qt(e),G="image"in e[117]&&"user"===e[117].role&&Kt(e);return{c(){t=p("div"),n=p("div"),s=p("div"),R&&R.c(),i=h(),q&&q.c(),c=h(),a=p("div"),r=p("button"),r.innerHTML='<small>Add to My Notes</small> \n                                                        <img src="./logos/note-svgrepo-com.svg" alt="Add to my notes" class="mini-icon"/>',g=h(),U&&U.c(),f=h(),b=p("div"),y=p("button"),y.innerHTML='<img src="./logos/copy-svgrepo-com.svg" alt="Copy note" class="mini-icon"/>',_=h(),J&&J.c(),T=h(),$=p("div"),F=p("strong"),S=m(A),L=m(":"),C=h(),j=p("md-block"),O=m(H),N=h(),G&&G.c(),w(s,"class","row spaced"),w(r,"class","action-button row spaced centered"),w(y,"class","action-button column centered"),w(b,"class","row"),w(a,"class","row spaced"),w(n,"class",x="message-header row "+("context"in e[117]||"image"in e[117]?"with-context":"no-context")+" svelte-gsx2hw"),w($,"class","row"),w(t,"class",E=e[117].role+" padded column spaced svelte-gsx2hw")},m(e,o){d(e,t,o),l(t,n),l(n,s),R&&R.m(s,null),l(s,i),q&&q.m(s,null),l(n,c),l(n,a),l(a,r),l(a,g),U&&U.m(a,null),l(a,f),l(a,b),l(b,y),l(b,_),J&&J.m(b,null),l(t,T),l(t,$),l($,F),l(F,S),l(F,L),l($,C),l($,j),l(j,O),l(t,N),G&&G.m(t,null),M||(P=[v(r,"click",D),v(y,"click",I)],M=!0)},p(o,c){"context"in(e=o)[117]?R?R.p(e,c):(R=Bt(e),R.c(),R.m(s,i)):R&&(R.d(1),R=null),"image"in e[117]?q?q.p(e,c):(q=Yt(e),q.c(),q.m(s,null)):q&&(q.d(1),q=null),"context"in e[117]?U?U.p(e,c):(U=Wt(e),U.c(),U.m(a,f)):U&&(U.d(1),U=null),"user"===e[117].role?J?J.p(e,c):(J=Qt(e),J.c(),J.m(b,null)):J&&(J.d(1),J=null),4&c[0]&&x!==(x="message-header row "+("context"in e[117]||"image"in e[117]?"with-context":"no-context")+" svelte-gsx2hw")&&w(n,"class",x),4&c[0]&&A!==(A=e[117].role+"")&&k(S,A),4&c[0]&&H!==(H=e[117].content+"")&&k(O,H),"image"in e[117]&&"user"===e[117].role?G?G.p(e,c):(G=Kt(e),G.c(),G.m(t,null)):G&&(G.d(1),G=null),4&c[0]&&E!==(E=e[117].role+" padded column spaced svelte-gsx2hw")&&w(t,"class",E)},d(e){e&&u(t),R&&R.d(),q&&q.d(),U&&U.d(),J&&J.d(),G&&G.d(),M=!1,o(P)}}}function Bt(e){let t,n,o,s,i,c,a=e[117].context.id+"",r=(e[117].context.quote.length>40?e[117].context.quote.slice(0,40)+"...":e[117].context.quote)+"";return{c(){t=p("div"),n=p("small"),o=m("Context: F#"),s=m(a),i=h(),c=m(r),w(t,"class","context-tag feedback svelte-gsx2hw")},m(e,a){d(e,t,a),l(t,n),l(n,o),l(n,s),l(n,i),l(n,c)},p(e,t){4&t[0]&&a!==(a=e[117].context.id+"")&&k(s,a),4&t[0]&&r!==(r=(e[117].context.quote.length>40?e[117].context.quote.slice(0,40)+"...":e[117].context.quote)+"")&&k(c,r)},d(e){e&&u(t)}}}function Yt(e){let t,n,o,s="user"===e[117].role?"Attached image":"Response to image";return{c(){t=p("div"),n=p("small"),o=m(s),w(t,"class","context-tag image svelte-gsx2hw")},m(e,s){d(e,t,s),l(t,n),l(n,o)},p(e,t){4&t[0]&&s!==(s="user"===e[117].role?"Attached image":"Response to image")&&k(o,s)},d(e){e&&u(t)}}}function Wt(e){let t,n,o,s,i,c,a,g,f,b,y=e[117].context.id+"";function _(){return e[73](e[117])}return{c(){t=p("button"),n=p("small"),o=m("Add to F#"),s=m(y),i=m(" Notes"),c=h(),a=p("img"),r(a.src,g="./logos/note-svgrepo-com.svg")||w(a,"src","./logos/note-svgrepo-com.svg"),w(a,"alt","Add feedback note"),w(a,"class","mini-icon"),w(t,"class","action-button row spaced centered")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(n,s),l(n,i),l(t,c),l(t,a),f||(b=v(t,"click",_),f=!0)},p(t,n){e=t,4&n[0]&&y!==(y=e[117].context.id+"")&&k(s,y)},d(e){e&&u(t),f=!1,b()}}}function Qt(e){let t,n,o,s,i;function c(){return e[75](e[117])}return{c(){t=p("button"),n=p("img"),r(n.src,o="./logos/delete-x-svgrepo-com.svg")||w(n,"src","./logos/delete-x-svgrepo-com.svg"),w(n,"alt","Delete message"),w(n,"class","mini-icon"),t.disabled=e[21],w(t,"class","action-button column centered")},m(e,o){d(e,t,o),l(t,n),s||(i=v(t,"click",c),s=!0)},p(n,o){e=n,2097152&o[0]&&(t.disabled=e[21])},d(e){e&&u(t),s=!1,i()}}}function Kt(e){let t,n,o;return{c(){t=p("div"),n=p("img"),r(n.src,o=e[117].image)||w(n,"src",o),w(n,"alt","Visual context"),_(n,"width","50%"),_(n,"height","auto"),w(t,"class","column centered"),_(t,"width","100%")},m(e,o){d(e,t,o),l(t,n)},p(e,t){4&t[0]&&!r(n.src,o=e[117].image)&&w(n,"src",o)},d(e){e&&u(t)}}}function Xt(e){let t,n="system"!=e[117].role&&zt(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"system"!=e[117].role?n?n.p(e,o):(n=zt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function Zt(t){let n;return{c(){n=p("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function en(e){let t,n,o,s,i,c,a,r,g,f,y,_=e[15].id+"",x=e[15].quote.slice(0,30)+"";return{c(){t=p("div"),n=p("span"),o=m("F#"),s=m(_),i=m(":"),c=m(x),a=m("..."),r=h(),g=p("button"),g.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon"/>',w(t,"class","suggested-message row  svelte-gsx2hw")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(n,s),l(n,i),l(n,c),l(n,a),l(t,r),l(t,g),f||(y=v(g,"click",b(e[78])),f=!0)},p(e,t){32768&t[0]&&_!==(_=e[15].id+"")&&k(s,_),32768&t[0]&&x!==(x=e[15].quote.slice(0,30)+"")&&k(c,x)},d(e){e&&u(t),f=!1,y()}}}function tn(t){return{c:e,m:e,p:e,d:e}}function nn(e){let t,n,o,s,i,c,a,g,m;return{c(){t=p("span"),t.innerHTML="<strong>Attached image:</strong>",n=h(),o=p("div"),s=p("img"),c=h(),a=p("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove image" class="mini-icon"/>',r(s.src,i=e[17])||w(s,"src",i),w(s,"alt","Visual context"),_(s,"width","100%"),_(s,"height","100%"),w(o,"class","row"),_(o,"width","100%"),_(o,"height","100%")},m(i,r){d(i,t,r),d(i,n,r),d(i,o,r),l(o,s),l(o,c),l(o,a),g||(m=v(a,"click",b(e[81])),g=!0)},p(e,t){131072&t[0]&&!r(s.src,i=e[17])&&w(s,"src",i)},d(e){e&&u(t),e&&u(n),e&&u(o),g=!1,m()}}}function on(t){let n,o;return{c(){n=p("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[67](n)},p:e,d(e){e&&u(n),t[67](null)}}}function sn(e){let t,n;return{c(){t=p("audio"),r(t.src,n=e[5].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[66](t)},p(e,o){32&o[0]&&!r(t.src,n=e[5].audio)&&w(t,"src",n)},d(n){n&&u(t),e[66](null)}}}function cn(e){let t,n,o,s;return{c(){t=p("video"),n=p("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[5].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[65](t)},p(e,n){32&n[0]&&!r(t.src,s=e[5].video)&&w(t,"src",s)},d(n){n&&u(t),e[65](null)}}}function an(e){let t,n=e[5].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=rn(Ke(e,n,t));return{c(){t=p("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(1056&s[0]){let i;for(n=e[5].transcript_list,i=0;i<n.length;i+=1){const c=Ke(e,n,i);o[i]?o[i].p(c,s):(o[i]=rn(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),g(o,e)}}}function rn(e){let t,n,s,i,c,a,r,g,f,b,y,_,x,T,$,F,S,L,C,j,O,N=e[114].start_timestamp+"",E=e[114].end_timestamp+"",M=e[114].speaker?e[114].speaker+":":"",P=e[114].dialogue+"";function A(){return e[68](e[114])}function H(){return e[69](e[114])}return{c(){t=p("span"),n=m("["),s=m(N),i=m("]"),c=m(" - "),a=p("span"),r=m("["),g=m(E),f=m("]"),b=h(),y=p("br"),_=h(),x=m(M),T=h(),$=p("span"),S=h(),L=p("br"),C=p("br"),w(t,"class","timestamp svelte-gsx2hw"),w(a,"class","timestamp svelte-gsx2hw"),w($,"id",F=e[114].id),w($,"class","svelte-gsx2hw")},m(e,o){d(e,t,o),l(t,n),l(t,s),l(t,i),d(e,c,o),d(e,a,o),l(a,r),l(a,g),l(a,f),d(e,b,o),d(e,y,o),d(e,_,o),d(e,x,o),d(e,T,o),d(e,$,o),$.innerHTML=P,d(e,S,o),d(e,L,o),d(e,C,o),j||(O=[v(t,"click",A),v(a,"click",H)],j=!0)},p(t,n){e=t,32&n[0]&&N!==(N=e[114].start_timestamp+"")&&k(s,N),32&n[0]&&E!==(E=e[114].end_timestamp+"")&&k(g,E),32&n[0]&&M!==(M=e[114].speaker?e[114].speaker+":":"")&&k(x,M),32&n[0]&&P!==(P=e[114].dialogue+"")&&($.innerHTML=P),32&n[0]&&F!==(F=e[114].id)&&w($,"id",F)},d(e){e&&u(t),e&&u(c),e&&u(a),e&&u(b),e&&u(y),e&&u(_),e&&u(x),e&&u(T),e&&u($),e&&u(S),e&&u(L),e&&u(C),j=!1,o(O)}}}function ln(e){let t,n,o,s,i,c,a,r,m,f,b,k,y,x,T,$,F,S=e[32],L=[];for(let t=0;t<S.length;t+=1)L[t]=nt(tt(e,S,t));function C(e,t){return 0===e[14]?st:1===e[14]?ot:void 0}let j=C(e),O=j&&j(e),N=e[33],E=[];for(let t=0;t<N.length;t+=1)E[t]=Tt(Xe(e,N,t));const M=[St,Ft,$t],P=[];function A(e,t){return 0===e[13]?0:1===e[13]?1:2===e[13]?2:-1}return~(y=A(e))&&(x=P[y]=M[y](e)),{c(){t=p("div"),n=p("div"),o=p("div"),s=p("div");for(let e=0;e<L.length;e+=1)L[e].c();i=h(),c=p("div"),O&&O.c(),a=h(),r=p("div"),m=p("div"),f=p("div");for(let e=0;e<E.length;e+=1)E[e].c();b=h(),k=p("div"),x&&x.c(),w(s,"class","tab-header svelte-gsx2hw"),w(c,"class","tab-content padded svelte-gsx2hw"),_(c,"overflow-y","auto"),w(o,"class","tabbed-area bordered svelte-gsx2hw"),w(n,"id","left-panel"),w(n,"class","column svelte-gsx2hw"),w(f,"class","tab-header svelte-gsx2hw"),w(k,"class","tab-content column svelte-gsx2hw"),w(m,"class","tabbed-area bordered svelte-gsx2hw"),w(r,"id","right-panel"),w(r,"class","column  svelte-gsx2hw"),w(t,"id","feedback-list-page"),w(t,"class","spaced svelte-gsx2hw")},m(u,g){d(u,t,g),l(t,n),l(n,o),l(o,s);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(s,null);l(o,i),l(o,c),O&&O.m(c,null),l(t,a),l(t,r),l(r,m),l(m,f);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(f,null);l(m,b),l(m,k),~y&&P[y].m(k,null),T=!0,$||(F=v(t,"window:click",e[36]),$=!0)},p(e,t){if(16384&t[0]|2&t[1]){let n;for(S=e[32],n=0;n<S.length;n+=1){const o=tt(e,S,n);L[n]?L[n].p(o,t):(L[n]=nt(o),L[n].c(),L[n].m(s,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=S.length}if(j===(j=C(e))&&O?O.p(e,t):(O&&O.d(1),O=j&&j(e),O&&(O.c(),O.m(c,null))),8192&t[0]|4&t[1]){let n;for(N=e[33],n=0;n<N.length;n+=1){const o=Xe(e,N,n);E[n]?E[n].p(o,t):(E[n]=Tt(o),E[n].c(),E[n].m(f,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=N.length}let n=y;y=A(e),y===n?~y&&P[y].p(e,t):(x&&(I(),V(P[n],1,1,(()=>{P[n]=null})),J()),~y?(x=P[y],x?x.p(e,t):(x=P[y]=M[y](e),x.c()),G(x,1),x.m(k,null)):x=null)},i(e){T||(G(x),T=!0)},o(e){V(x),T=!1},d(e){e&&u(t),g(L,e),O&&O.d(),g(E,e),~y&&P[y].d(),$=!1,F()}}}function dn(e,t=!0){e.show_paraphrased=t}const un=(e,t)=>e-t;function gn(e,t,n){let o,s,i,c,a,r,l,d,{feedback_list:u}=t,{recording:g}=t,{documents:p=[]}=t,{chatbot_messages:m=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]}=t,{my_notes:h=[]}=t,{feedback_notes:f={}}=t,v=!1,b={"GPT-4o":"gpt-4o","GPT-4o Mini":"gpt-4o-mini","Interior Designer GPT":"ft:gpt-3.5-turbo-0125:im-lab:int-des-full:9b2qf12W"},w="GPT-4o Mini",k=0,y=256,_="",x=0,$=0,F=["Critical Feedback","Positive Feedback"],S=["Transcript","Chatbot","Notes"],L=!1,j="",O=0,N="",E=0,M=!1;function P(e){s===e&&n(12,s=null),n(0,u=u.filter((t=>t!==e))),n(0,u)}function A(e,t){n(12,s=e),t.stopPropagation()}let H=null,R=!0;function q(e){H===e?n(28,R=!R):(n(27,H=e),n(28,R=!0)),u.sort(((t,n)=>t[e]<n[e]?R?-1:1:t[e]>n[e]?R?1:-1:0)),n(0,u)}async function D(e,t=null){let o=e.slice();if(L)return void alert("Please wait for the current message to be processed.");if(n(21,L=!0),""===e.trim())return void alert("Please enter a message.");let s={role:"user",content:e};if(t){s.context=t;let e="\n\nHere is the piece of feedback as context.";e+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',o+=e}let i={message:o,image_data:null,max_output_tokens:y,temperature:k,model:b[w]};if(a&&(s.image=a),c){n(22,j="Uploading image..."),n(23,O=30);let e=await async function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)}))}(c);i.image_data=e,s.image_path=await async function(e){const t=await fetch("/save_image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_data:e})});if(!t.ok)throw new Error("Failed to save image");return(await t.json()).image_path}(e)}m.push(s),n(2,m),console.log(m),n(0,u),await de(m),n(22,j="Thinking..."),n(23,O=50);const r=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!r.ok)throw new Error("Failed to send message");let l=(await r.json()).chatbot_response;n(22,j="Done!"),n(23,O=100),await Z(1200),await te("FeedbackList: Sent message",[e,t,a]);let d={role:"assistant",content:l};t&&(d.context=t),a&&(d.image=a),m.push(d),n(2,m),n(0,u),await de(m),n(21,L=!1),n(23,O=0)}function U(e){i===e?alert("This feedback is already added as context."):n(15,i=e)}async function I(e){const t=e.target.files;if(t)for(const e of t){const t=new FormData;t.append("file",e),n(25,E=50),n(24,N="Adding document... (this may take a while)");const o=await fetch("/add_document",{method:"POST",body:t});if(!o.ok)return null;let s=(await o.json()).document_name;p.push(s),n(1,p),n(24,N="Done!"),n(25,E=100),await Z(1200)}}async function J(e,t){return(await fetch("/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})).ok?(p.splice(t,1),n(1,p),e):console.log(`Failed to delete document ${e}`)}async function G(){n(24,N="Removing all documents...");for(let e=0;e<p.length;e++){let t=p[e];n(25,E=e/p.length*100);try{await J(t,e)}catch(e){console.error(`Error deleting document ${t}:`,e)}}1===p.length&&await J(p[0],0),n(24,N="Done!"),n(25,E=100),await Z(1e3),n(25,E=0)}let V=!1,z="";async function B(e,t=null,o=null){""!=e.trim()?t?t in f?(f[t].notes.push(e),n(4,f)):n(4,f[t]={notes:[e],is_adding:!1},f):(h.push(e),n(3,h)):alert("Please enter a note.")}async function Y(e,t=null){t?(f[t].notes.splice(e,1),n(4,f)):(h.splice(e,1),n(3,h))}async function W(e=null){n(29,V=!1),B(z,e),n(30,z="")}return e.$$set=e=>{"feedback_list"in e&&n(0,u=e.feedback_list),"recording"in e&&n(5,g=e.recording),"documents"in e&&n(1,p=e.documents),"chatbot_messages"in e&&n(2,m=e.chatbot_messages),"my_notes"in e&&n(3,h=e.my_notes),"feedback_notes"in e&&n(4,f=e.feedback_notes)},[u,p,m,h,f,g,v,w,k,y,o,_,s,x,$,i,c,a,r,l,d,L,j,O,N,E,M,H,R,V,z,b,F,S,P,A,function(){n(12,s=null)},q,D,U,I,J,G,B,Y,W,async e=>{n(14,$=e),await te("FeedbackList: Switched left panel tab",F[$])},async()=>{q("quote"),await te("FeedbackList: Sorted feedback","quote")},async()=>{q("speaker"),await te("FeedbackList: Sorted feedback","speaker")},async()=>{q("done"),await te("FeedbackList: Sorted feedback","done")},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{dn(e,!1),await te("FeedbackList: Show original quote",e.original_quote)},async e=>{dn(e,!0),await te("FeedbackList: Show paraphrased quote",e.positivised_quote)},async(e,t,o)=>{n(0,t[o].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),u),dn(e,!0),n(0,u),await te("FeedbackList: Positivize Quote",e)},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in f?n(4,f[e.id].is_adding=!0,f):n(4,f[e.id]={notes:[],is_adding:!0},f)},async e=>{window.confirm("Are you sure you want to delete this feedback? This cannot be undone.")&&(P(e),await le(u),await te("FeedbackList: Remove critical feedback",e))},function(e,t){e[t].done=this.checked,n(0,u)},async(e,t)=>{A(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in f?n(4,f[e.id].is_adding=!0,f):n(4,f[e.id]={notes:[],is_adding:!0},f)},async e=>{P(e),await le(u),await te("FeedbackList: Remove positive feedback",e)},async(e,t)=>{A(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=e),await te("FeedbackList: Switched right panel tab",S[x])},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},async e=>{ne(e.start_timestamp,o),await te("FeedbackList: Seek to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackList: Seek to end timestamp",e.end_timestamp)},function(){w=T(this),n(7,w),n(31,b)},async()=>{n(6,v=!v),await te("FeedbackList: Toggled chatbot settings",v)},async e=>{n(13,x=2),B(e.role+": "+e.content),await ue(h),await te("FeedbackList: Added note to My Notes",e)},async e=>{n(13,x=2),B(e.role+": "+e.content,"id"in e.context?e.context.id:null),await ge(f),await te("FeedbackList: Added note to Feedback ID"+e.context.id,e)},async e=>{se(e.role+": "+e.content),await te("FeedbackList: Copied message",e)},async e=>{if(!window.confirm("Are you sure you want to delete this message? This cannot be undone."))return;let t=m.indexOf(e),o=t+1,s=m[o];await fetch("/remove_from_backend_chatbot_messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message_idx:t,assistant_message_idx:o})}),n(2,m=m.filter((t=>t!==e))),"assistant"===s.role&&n(2,m=m.filter((e=>e!==s))),n(2,m),await de(m),await te("FeedbackList: Removed message",e)},function(e){O=e,n(23,O)},function(e){j=e,n(22,j)},async()=>{await te("FeedbackList: Removed context",i),n(15,i=null)},async()=>{L||await D("Can you paraphrase the following feedback positively?",i)},async()=>{L||await D("Can you brainstorm a set of actions to address the following feedback?",i)},async()=>{await te("FeedbackList: Removed image",a),n(17,a=null),n(16,c=null)},function(){r=this.value,n(18,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(19,l)}))},async()=>{n(18,r=l.files),n(17,[a,c]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return console.log(t),[URL.createObjectURL(t),t];alert("Please select an image file.")}else console.log("No image selected.");return null}(r),a,n(16,c)),await te(a?"FeedbackList: Uploaded image":"FeedbackList: Canceled uploading image",a)},async()=>{l.click()},function(){_=this.value,n(11,_)},e=>"Enter"===e.key&&D(_,i),async()=>{await D(_,i),n(11,_="")},function(){w=T(this),n(7,w),n(31,b)},function(e){k=e,n(8,k)},function(e){y=e,n(9,y)},function(e){E=e,n(25,E)},function(e){N=e,n(24,N)},async(e,t)=>{if(!window.confirm("Are you sure you want to delete this document? This cannot be undone."))return;n(26,M=!0),n(25,E=50),n(24,N="Removing document...");let o=await J(e,t);n(24,N="Done!"),n(25,E=100),n(26,M=!1),te("FeedbackList: Removed document",o)},function(e){C[e?"unshift":"push"]((()=>{d=e,n(20,d)}))},async e=>{n(26,M=!0),await I(e),n(26,M=!1),await te("FeedbackList: Added document",e.target.files)},async()=>{window.confirm("Adding a new document will take a long time, since its information will be extracted. Do you want to proceed?")&&(document.getElementById("document_file_input").click(),await te("FeedbackList: Added document","Document"))},async()=>{window.confirm("Are you sure you want to remove all documents? This cannot be undone.")&&(n(26,M=!0),await G(),n(26,M=!1),await te("FeedbackList: Removed all documents",p))},async(e,t)=>{Y(e),await ue(h),await te("FeedbackList: Removed note",t)},function(){z=this.value,n(30,z)},async()=>{W(),n(29,V=!1),await ue(h),await te("FeedbackList: Added note to My Notes",z)},async()=>{n(29,V=!1),n(30,z=""),await te("FeedbackList: Cancelled adding note to My Notes",z)},async()=>{n(29,V=!0),await te("FeedbackList: Clicked on My Notes' Add Note button",V)},async()=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(3,h=[]),n(3,h),await ue(h),await te("FeedbackList: Removed all notes from My Notes",h))},async e=>{let t="Are you sure you want to delete this feedback notes section? This cannot be undone";f[e].notes.length>0&&(t="Are you sure you want to delete this feedback notes section? This will delete all notes and cannot be undone."),window.confirm(t)&&(delete f[e],n(4,f),await ge(f),await te("FeedbackList: Removed feedback notes section","Feedback ID"+e))},async(e,t,n)=>{Y(e,t),await ge(f),await te("FeedbackList: Removed note from Feedback ID"+t,n)},function(){z=this.value,n(30,z)},async e=>{W(e),n(4,f[e].is_adding=!1,f),await ge(f),await te("FeedbackList: Added note to Feedback ID"+e,z)},async e=>{n(4,f[e].is_adding=!1,f),await te("FeedbackList: Cancelled adding note to Feedback ID"+e,z),n(30,z="")},async e=>{n(4,f[e].is_adding=!0,f),await te("FeedbackList: Clicked on Feedback ID"+e+"'s Add Note button",f[e].is_adding)},async e=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(4,f[e].notes=[],f),n(4,f),await ge(f),await te("FeedbackList: Removed all notes from Feedback ID"+e,f[e].notes))}]}class pn extends X{constructor(e){super(),K(this,e,gn,ln,i,{feedback_list:0,recording:5,documents:1,chatbot_messages:2,my_notes:3,feedback_notes:4},null,[-1,-1,-1,-1,-1])}}function mn(e){let t,n,o,s,i;function c(t){e[15](t)}function a(t){e[16](t)}let r={};return void 0!==e[2]&&(r.recording=e[2]),void 0!==e[3]&&(r.feedback_list=e[3]),n=new De({props:r}),C.push((()=>z(n,"recording",c))),C.push((()=>z(n,"feedback_list",a))),{c(){t=p("div"),B(n.$$.fragment),_(t,"width","100%"),_(t,"height","100%"),$(t,"gone",1!=e[0])},m(e,o){d(e,t,o),Y(n,t,null),i=!0},p(e,c){const a={};!o&&4&c&&(o=!0,a.recording=e[2],P((()=>o=!1))),!s&&8&c&&(s=!0,a.feedback_list=e[3],P((()=>s=!1))),n.$set(a),(!i||1&c)&&$(t,"gone",1!=e[0])},i(e){i||(G(n.$$.fragment,e),i=!0)},o(e){V(n.$$.fragment,e),i=!1},d(e){e&&u(t),W(n)}}}function hn(e){let t,n,s,i,c,a,g,f,b,x,T,F,S,L,j,O,N,E,M,A,H,R,q,D,U,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,ae,re,le,de,ue,ge,pe,me,he,fe=1===e[0]&&mn(e);function ve(t){e[17](t)}function be(t){e[18](t)}function we(t){e[19](t)}function ke(t){e[20](t)}function ye(t){e[21](t)}function _e(t){e[22](t)}let xe={};return void 0!==e[5]&&(xe.chatbot_messages=e[5]),void 0!==e[4]&&(xe.documents=e[4]),void 0!==e[3]&&(xe.feedback_list=e[3]),void 0!==e[2]&&(xe.recording=e[2]),void 0!==e[6]&&(xe.my_notes=e[6]),void 0!==e[7]&&(xe.feedback_notes=e[7]),q=new pn({props:xe}),C.push((()=>z(q,"chatbot_messages",ve))),C.push((()=>z(q,"documents",be))),C.push((()=>z(q,"feedback_list",we))),C.push((()=>z(q,"recording",ke))),C.push((()=>z(q,"my_notes",ye))),C.push((()=>z(q,"feedback_notes",_e))),{c(){t=p("main"),n=p("div"),s=p("h5"),i=m("Welcome, "),c=m(e[1]),a=h(),g=p("button"),g.textContent="Logout",f=h(),b=p("div"),x=p("div"),T=p("div"),F=p("label"),F.textContent="Enter your username",S=h(),L=p("input"),j=h(),O=p("div"),N=p("button"),N.textContent="Register",E=h(),M=p("button"),M.textContent="Login",A=h(),fe&&fe.c(),H=h(),R=p("div"),B(q.$$.fragment),ee=h(),te=p("div"),ne=p("button"),oe=p("img"),ie=m("\n                Select Feedback"),ae=h(),re=p("button"),le=m("View Feedback List\n                "),de=p("img"),w(g,"class","row mini-padded svelte-lde6tu"),w(n,"class","header spaced bordered row padded svelte-lde6tu"),$(n,"gone",0==e[0]),w(F,"for","username"),w(L,"type","text"),w(L,"name","username"),w(L,"id","username"),w(N,"class","svelte-lde6tu"),w(M,"class","svelte-lde6tu"),w(O,"class","row"),w(T,"class","column centered spaced"),_(T,"width","75%"),_(T,"height","75%"),w(x,"class","centered spaced"),_(x,"width","100%"),_(x,"height","100%"),$(x,"gone",0!=e[0]),_(R,"width","100%"),_(R,"height","100%"),$(R,"gone",2!=e[0]),w(b,"class","carousel-container svelte-lde6tu"),r(oe.src,se="./logos/move-to-the-prev-page-symbol-svgrepo-com.svg")||w(oe,"src","./logos/move-to-the-prev-page-symbol-svgrepo-com.svg"),w(oe,"alt","Previous page"),w(oe,"class","mini-icon"),w(ne,"class","action-button row centered svelte-lde6tu"),ne.disabled=ce=0===e[0],$(ne,"invisible",2!=e[0]||0==e[0]),r(de.src,ue="./logos/move-to-the-next-page-symbol-svgrepo-com.svg")||w(de,"src","./logos/move-to-the-next-page-symbol-svgrepo-com.svg"),w(de,"alt","Next page"),w(de,"class","mini-icon"),w(re,"class","action-button row centered svelte-lde6tu"),re.disabled=ge=e[0]===fn.length-1||e[3].length<=0,$(re,"invisible",1!=e[0]||0==e[0]),w(te,"class","navigation centered spaced bordered row svelte-lde6tu")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,c),l(n,a),l(n,g),l(t,f),l(t,b),l(b,x),l(x,T),l(T,F),l(T,S),l(T,L),y(L,e[1]),l(T,j),l(T,O),l(O,N),l(O,E),l(O,M),l(b,A),fe&&fe.m(b,null),l(b,H),l(b,R),Y(q,R,null),l(t,ee),l(t,te),l(te,ne),l(ne,oe),l(ne,ie),l(te,ae),l(te,re),l(re,le),l(re,de),pe=!0,me||(he=[v(g,"click",e[11]),v(L,"input",e[12]),v(N,"click",e[13]),v(M,"click",e[14]),v(ne,"click",e[23]),v(re,"click",e[24])],me=!0)},p(e,[t]){(!pe||2&t)&&k(c,e[1]),(!pe||1&t)&&$(n,"gone",0==e[0]),2&t&&L.value!==e[1]&&y(L,e[1]),(!pe||1&t)&&$(x,"gone",0!=e[0]),1===e[0]?fe?(fe.p(e,t),1&t&&G(fe,1)):(fe=mn(e),fe.c(),G(fe,1),fe.m(b,H)):fe&&(I(),V(fe,1,1,(()=>{fe=null})),J());const o={};!D&&32&t&&(D=!0,o.chatbot_messages=e[5],P((()=>D=!1))),!U&&16&t&&(U=!0,o.documents=e[4],P((()=>U=!1))),!Q&&8&t&&(Q=!0,o.feedback_list=e[3],P((()=>Q=!1))),!K&&4&t&&(K=!0,o.recording=e[2],P((()=>K=!1))),!X&&64&t&&(X=!0,o.my_notes=e[6],P((()=>X=!1))),!Z&&128&t&&(Z=!0,o.feedback_notes=e[7],P((()=>Z=!1))),q.$set(o),(!pe||1&t)&&$(R,"gone",2!=e[0]),(!pe||1&t&&ce!==(ce=0===e[0]))&&(ne.disabled=ce),(!pe||1&t)&&$(ne,"invisible",2!=e[0]||0==e[0]),(!pe||9&t&&ge!==(ge=e[0]===fn.length-1||e[3].length<=0))&&(re.disabled=ge),(!pe||1&t)&&$(re,"invisible",1!=e[0]||0==e[0])},i(e){pe||(G(fe),G(q.$$.fragment,e),pe=!0)},o(e){V(fe),V(q.$$.fragment,e),pe=!1},d(e){e&&u(t),fe&&fe.d(),W(q),me=!1,o(he)}}}let fn=3;function vn(e,t,n){let o=0,s="",i="",c={},a=[],r=[],l=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}],d=[],u={};async function g(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(alert(t.message),i=t.user_id,ee("username",s,30),ee("user_id",i,30),n(4,r=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),n(0,o=1)):alert(t.message)}async function p(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(alert(t.message),i=t.user_id,ee("username",s,30),ee("user_id",i,30),await async function(e){if(n(4,r=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),Object.keys(c).length<=0){let e=await fetch("/get_recording",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();if(n(2,c=t.recording),console.log(c),"video_path"in c&&null!=c.video_path){const e=await fetch("/fetch_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:c.video_path})});if(!e.ok)throw new Error("Failed to fetch video");const t=await e.blob();n(2,c.video=URL.createObjectURL(t),c)}if("audio_path"in c&&null!=c.audio_path){const e=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:c.audio_path})});if(!e.ok)throw new Error("Failed to fetch audio");const t=await e.blob();n(2,c.audio=URL.createObjectURL(t),c)}const o=await fetch("/get_feedback_list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch feedback list");const s=await o.json();n(3,a=s.feedback_list);const i=await fetch("/get_display_chatbot_messages",{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch chatbot messages");const r=await i.json();n(5,l=r.display_chatbot_messages);for(let e of l)if("image_path"in e&&null!=e.image_path){const t=await fetch("/fetch_image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_path:e.image_path})});if(!t.ok)throw new Error("Failed to fetch image");const n=await t.blob();e.image=URL.createObjectURL(n)}const g=await fetch("/get_my_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!g.ok)throw new Error("Failed to fetch my notes");const p=await g.json();n(6,d=p.my_notes);const m=await fetch("/get_feedback_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!m.ok)throw new Error("Failed to fetch feedback notes");const h=await m.json();n(7,u=h.feedback_notes)}}(),n(0,o=1)):alert(t.message)}function m(){ee("username","",0),ee("user_id","",0),n(1,s=""),i="",n(4,r=[]),n(3,a=[]),n(5,l=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]),n(0,o=0)}S((async()=>{}));return[o,s,c,a,r,l,d,u,g,p,m,()=>m(),function(){s=this.value,n(1,s)},async()=>{await g()},async()=>{await p()},function(e){c=e,n(2,c)},function(e){a=e,n(3,a)},function(e){l=e,n(5,l)},function(e){r=e,n(4,r)},function(e){a=e,n(3,a)},function(e){c=e,n(2,c)},function(e){d=e,n(6,d)},function(e){u=e,n(7,u)},()=>{n(0,o=1)},()=>{n(0,o=2)}]}return new class extends X{constructor(e){super(),K(this,e,vn,hn,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
