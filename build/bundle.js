var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,a;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function m(){return f(" ")}function h(){return f("")}function b(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function _(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function $(e){const t=e.querySelector(":checked");return t&&t.__value}function T(e,t,n){e.classList[n?"add":"remove"](t)}function F(e){a=e}function S(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const L=[],C=[];let j=[];const N=[],O=Promise.resolve();let E=!1;function M(e){j.push(e)}function P(e){N.push(e)}const A=new Set;let R=0;function q(){if(0!==R)return;const e=a;do{try{for(;R<L.length;){const e=L[R];R++,F(e),H(e.$$)}}catch(e){throw L.length=0,R=0,e}for(F(null),L.length=0,R=0;C.length;)C.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];A.has(t)||(A.add(t),t())}j.length=0}while(L.length);for(;N.length;)N.pop()();E=!1,A.clear(),F(e)}function H(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const D=new Set;let U;function I(){U={r:0,c:[],p:U}}function J(){U.r||o(U.c),U=U.p}function G(e,t){e&&e.i&&(D.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(D.has(e))return;D.add(e),U.c.push((()=>{D.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function z(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function B(e){e&&e.c()}function Y(e,n,i,c){const{fragment:a,after_update:r}=e.$$;a&&a.m(n,i),c||M((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),r.forEach(M)}function W(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];j.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),j=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(L.push(e),E||(E=!0,O.then(q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,s,i,c,r,l,d,p=[-1]){const g=a;F(t);const f=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(g?g.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||g.$$.root};d&&d(f.root);let m=!1;if(f.ctx=i?i(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),m&&Q(t,e)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!c&&c(f.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();s.intro&&G(t.$$.fragment),Y(t,s.target,s.anchor,s.customElement),q()}F(g)}class X{$destroy(){W(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function Z(e){return new Promise((t=>setTimeout(t,e)))}function ee(e,t,n){var o="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}async function te(e,t){const n=await fetch("/log_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:t})});if(!n.ok)throw new Error("Failed to log action");const o=await n.json();console.log(o.message)}function ne(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function oe(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function se(e){!function(e){try{return navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const o=document.getSelection(),s=o?o.rangeCount>0&&o.getRangeAt(0):null;document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length,document.execCommand("copy"),document.body.removeChild(t),s&&o&&(o.removeAllRanges(),o.addRange(s)),n&&n.focus()}}(e)}function ie(t){let n,o,s,i,c,a,r,p,h;return{c(){n=g("div"),o=g("span"),s=f("["),i=f(t[0]),c=f("%] "),a=f(t[1]),r=m(),p=g("div"),h=g("div"),w(o,"class","status-text svelte-e99ivy"),w(h,"class","loading-bar-progress svelte-e99ivy"),_(h,"width",t[0]+"%"),w(p,"class","loading-bar-container svelte-e99ivy"),w(n,"class","container column centered spaced svelte-e99ivy")},m(e,t){d(e,n,t),l(n,o),l(o,s),l(o,i),l(o,c),l(o,a),l(n,r),l(n,p),l(p,h)},p(e,[t]){1&t&&k(i,e[0]),2&t&&k(a,e[1]),1&t&&_(h,"width",e[0]+"%")},i:e,o:e,d(e){e&&u(n)}}}function ce(e,t,n){let{progress:o=0}=t,{status:s=""}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress),"status"in e&&n(1,s=e.status)},[o,s]}class ae extends X{constructor(e){super(),K(this,e,ce,ie,i,{progress:0,status:1})}}async function re(e){const t=await fetch("/save_recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recording:e})});if(!t.ok)throw new Error("Failed to save recording");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function le(e){const t=await fetch("/save_feedback_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_list:e})});if(!t.ok)throw new Error("Failed to save feedback list");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function de(e){const t=await fetch("/save_display_chatbot_messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_chatbot_messages:e})});if(!t.ok)throw new Error("Failed to save display chatbot messages");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function ue(e){const t=await fetch("/save_my_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({my_notes:e})});if(!t.ok)throw new Error("Failed to save my notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function pe(e){const t=await fetch("/save_feedback_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_notes:e})});if(!t.ok)throw new Error("Failed to save my feedback notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}function ge(e,t,n){const o=e.slice();return o[59]=t[n][0],o[60]=t[n][1],o}function fe(e,t,n){const o=e.slice();return o[63]=t[n],o[65]=n,o}function me(t){let n;return{c(){n=g("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function he(e){let t,n,o,s,i,c=e[2]+1+"",a=e[1].length+"";return{c(){t=g("span"),n=f(c),o=f(" of "),s=f(a),i=f(" feedback moments highlighted")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,s),l(t,i)},p(e,t){4&t[0]&&c!==(c=e[2]+1+"")&&k(n,c),2&t[0]&&a!==(a=e[1].length+"")&&k(s,a)},d(e){e&&u(t)}}}function be(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No discussion transcript loaded. Please first record or upload your discussion.</span>",w(n,"class","centered"),_(n,"height","100%"),_(n,"width","100%")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ve(e){let t,n=e[0].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=we(fe(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(9&s[0]){let i;for(n=e[0].transcript_list,i=0;i<n.length;i+=1){const c=fe(e,n,i);o[i]?o[i].p(c,s):(o[i]=we(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function we(e){let t,n,s,i,c,a,r,p,h,v,y,_,x,$,T,F,S,L,C,j,N,O,E,M=e[63].start_timestamp+"",P=e[63].end_timestamp+"",A=e[63].speaker?e[63].speaker+":":"",R=e[63].dialogue+"";function q(){return e[21](e[63])}function H(){return e[22](e[63])}return{c(){t=g("div"),n=g("span"),s=f("["),i=f(M),c=f("]"),a=f(" \n                            - \n                            "),r=g("span"),p=f("["),h=f(P),v=f("]"),y=m(),_=g("br"),x=m(),$=f(A),T=m(),F=g("span"),L=m(),C=g("br"),j=g("br"),N=m(),w(n,"class","timestamp svelte-ir33lb"),w(r,"class","timestamp svelte-ir33lb"),w(F,"id",S=e[63].id),w(F,"class","svelte-ir33lb"),w(t,"class","spaced")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(n,i),l(n,c),l(t,a),l(t,r),l(r,p),l(r,h),l(r,v),l(t,y),l(t,_),l(t,x),l(t,$),l(t,T),l(t,F),F.innerHTML=R,l(t,L),l(t,C),l(t,j),l(t,N),O||(E=[b(n,"click",q),b(r,"click",H)],O=!0)},p(t,n){e=t,1&n[0]&&M!==(M=e[63].start_timestamp+"")&&k(i,M),1&n[0]&&P!==(P=e[63].end_timestamp+"")&&k(h,P),1&n[0]&&A!==(A=e[63].speaker?e[63].speaker+":":"")&&k($,A),1&n[0]&&R!==(R=e[63].dialogue+"")&&(F.innerHTML=R),1&n[0]&&S!==(S=e[63].id)&&w(F,"id",S)},d(e){e&&u(t),O=!1,o(E)}}}function ke(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[38](n)},p:e,d(e){e&&u(n),t[38](null)}}}function ye(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[0].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[37](t)},p(e,o){1&o[0]&&!r(t.src,n=e[0].audio)&&w(t,"src",n)},d(n){n&&u(t),e[37](null)}}}function _e(e){let t,n,o,s;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[0].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[36](t)},p(e,n){1&n[0]&&!r(t.src,s=e[0].video)&&w(t,"src",s)},d(n){n&&u(t),e[36](null)}}}function xe(e){let t,n,o="speaker"in e[0].transcript_list[0]&&$e(e),s=e[1]&&Fe(e);return{c(){o&&o.c(),t=m(),s&&s.c(),n=h()},m(e,i){o&&o.m(e,i),d(e,t,i),s&&s.m(e,i),d(e,n,i)},p(e,i){"speaker"in e[0].transcript_list[0]?o?o.p(e,i):(o=$e(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[1]?s?s.p(e,i):(s=Fe(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){o&&o.d(e),e&&u(t),s&&s.d(e),e&&u(n)}}}function $e(e){let t,n,o,s,i,c,a,r,h,b=Object.keys(e[0].transcript_list.reduce(Pe,{})).length+"",v=Object.entries(e[0].transcript_list.reduce(Ae,{})),w=[];for(let t=0;t<v.length;t+=1)w[t]=Te(ge(e,v,t));return{c(){t=g("strong"),n=f("Number of participants: "),o=f(b),s=m(),i=g("br"),c=m(),a=g("ul");for(let e=0;e<w.length;e+=1)w[e].c();r=m(),h=g("br")},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),d(e,c,u),d(e,a,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(a,null);d(e,r,u),d(e,h,u)},p(e,t){if(1&t[0]&&b!==(b=Object.keys(e[0].transcript_list.reduce(Pe,{})).length+"")&&k(o,b),1&t[0]){let n;for(v=Object.entries(e[0].transcript_list.reduce(Ae,{})),n=0;n<v.length;n+=1){const o=ge(e,v,n);w[n]?w[n].p(o,t):(w[n]=Te(o),w[n].c(),w[n].m(a,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=v.length}},d(e){e&&u(t),e&&u(s),e&&u(i),e&&u(c),e&&u(a),p(w,e),e&&u(r),e&&u(h)}}}function Te(e){let t,n,o,s,i,c,a,r=e[59]+"",p=e[60]+"";return{c(){t=g("li"),n=f("- "),o=f(r),s=f(": "),i=f(p),c=f(" utterances"),a=m()},m(e,r){d(e,t,r),l(t,n),l(t,o),l(t,s),l(t,i),l(t,c),d(e,a,r)},p(e,t){1&t[0]&&r!==(r=e[59]+"")&&k(o,r),1&t[0]&&p!==(p=e[60]+"")&&k(i,p)},d(e){e&&u(t),e&&u(a)}}}function Fe(e){let t,n,o,s,i,c,a,r,p,h,b,v,w=e[1].length+"",y=e[1].filter(Re).length+"",_=e[1].filter(qe).length+"";return{c(){t=g("strong"),n=f("Number of feedback utterances: "),o=f(w),s=m(),i=g("ul"),c=g("li"),a=f("- Number of positive feedback: "),r=f(y),p=m(),h=g("li"),b=f("- Number of critical feedback: "),v=f(_)},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),l(i,c),l(c,a),l(c,r),l(i,p),l(i,h),l(h,b),l(h,v)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&k(o,w),2&t[0]&&y!==(y=e[1].filter(Re).length+"")&&k(r,y),2&t[0]&&_!==(_=e[1].filter(qe).length+"")&&k(v,_)},d(e){e&&u(t),e&&u(s),e&&u(i)}}}function Se(e){let t,n,s,i,c,a,p,h,v,k,y,x,$,F,S,L,j,N,O,E,M,A,R,q,H,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,pe,ge,fe,we,$e,Te,Fe,Se,Le,Ce,je,Ne,Oe,Ee,Me,Pe,Ae,Re,qe,He,De,Ue,Ie,Je,Ge,Ve,ze,Be,Ye,We,Qe,Ke,Xe,Ze,et,tt,nt,ot,st,it,ct,at,rt,lt,dt,ut,pt,gt,ft,mt,ht,bt,vt,wt,kt,yt,_t,xt,$t,Tt,Ft;function St(t){e[17](t)}function Lt(t){e[18](t)}let Ct={};function jt(e,t){return e[1]&&e[1].length>0?he:me}void 0!==e[10]&&(Ct.progress=e[10]),void 0!==e[9]&&(Ct.status=e[9]),c=new ae({props:Ct}),C.push((()=>z(c,"progress",St))),C.push((()=>z(c,"status",Lt)));let Nt=jt(e),Ot=Nt(e);function Et(e,t){return e[0]&&e[0].transcript_list?ve:be}let Mt=Et(e),Pt=Mt(e);function At(e,t){return e[0]&&e[0].video?_e:e[0]&&e[0].audio?ye:ke}let Rt=At(e),qt=Rt(e),Ht=e[0]&&e[0].transcript_list&&xe(e);return{c(){t=g("div"),n=g("div"),s=g("div"),i=g("div"),B(c.$$.fragment),h=m(),v=g("div"),Ot.c(),k=m(),y=g("button"),x=g("img"),S=m(),L=g("button"),j=g("img"),E=m(),Pt.c(),M=m(),A=g("div"),R=g("div"),q=g("span"),q.textContent="Step 1: Upload your discussion.",H=m(),D=g("div"),U=g("div"),I=g("div"),J=g("label"),J.textContent="Upload your own video or audio:",Q=m(),K=g("div"),X=g("input"),Z=m(),ee=g("button"),te=g("img"),oe=f("\n                                    Upload file"),ie=m(),ce=g("div"),re=g("label"),re.textContent="Upload your own transcript (in .srt only):",le=m(),de=g("div"),ue=g("input"),pe=m(),ge=g("button"),fe=g("img"),$e=f("\n                                    Upload file"),Fe=m(),Se=g("div"),Le=g("span"),Le.textContent="Step 2: Highlight feedback in the discussion's transcript.",Ce=m(),je=g("div"),Ne=g("div"),Oe=g("button"),Ee=g("img"),Pe=f("\n                            Auto-detect "),Ae=g("br"),Re=f(" Feedback"),He=m(),De=g("button"),Ue=g("img"),Je=f("\n                            Highlight "),Ge=g("br"),Ve=f(" Positive"),Be=m(),Ye=g("button"),We=g("img"),Ke=f("\n                            Highlight "),Xe=g("br"),Ze=f(" Critical"),tt=m(),nt=g("button"),ot=g("img"),it=f("\n                            Remove "),ct=g("br"),at=f(" Feedback"),lt=m(),dt=g("button"),ut=g("img"),gt=f("\n                            Remove all "),ft=g("br"),mt=f(" Feedback"),bt=m(),vt=g("div"),wt=g("div"),qt.c(),kt=m(),yt=g("div"),_t=g("h3"),_t.textContent="Discussion Transcript Details",xt=m(),Ht&&Ht.c(),w(i,"class","overlay centered padded"),T(i,"invisible",!1===e[8]),r(x.src,$="./logos/up-arrow-5-svgrepo-com.svg")||w(x,"src","./logos/up-arrow-5-svgrepo-com.svg"),w(x,"alt","Prev feedback"),w(x,"class","logo"),_(x,"width","1.5rem"),_(x,"height","1.5rem"),y.disabled=F=!e[1]||e[1].length<=0,r(j.src,N="./logos/down-arrow-5-svgrepo-com.svg")||w(j,"src","./logos/down-arrow-5-svgrepo-com.svg"),w(j,"alt","Next feedback"),w(j,"class","logo"),_(j,"width","1.5rem"),_(j,"height","1.5rem"),L.disabled=O=!e[1]||e[1].length<=0,w(v,"id","traverse-feedback-area"),w(v,"class","bordered spaced svelte-ir33lb"),w(s,"id","transcript-area"),w(s,"class","column bordered spaced svelte-ir33lb"),_(q,"font-weight","bold"),_(q,"text-decoration","underline"),_(q,"margin-left","1rem"),w(J,"for","file_upload"),_(X,"width","50%"),w(X,"name","mediafile_upload"),w(X,"type","file"),w(X,"id","mediafile_upload"),w(X,"accept","video/*, audio/*"),r(te.src,ne="./logos/upload-svgrepo-com.svg")||w(te,"src","./logos/upload-svgrepo-com.svg"),w(te,"alt","Upload file"),w(te,"class","mini-icon"),w(ee,"class","action-button centered column  svelte-ir33lb"),ee.disabled=se=e[8]||!e[4]||0===e[4].length,w(K,"class","row centered spaced"),w(I,"class","column spaced centered"),w(re,"for","file_upload"),w(ue,"name","transcirptfile_upload"),w(ue,"type","file"),w(ue,"id","transcriptfile_upload"),w(ue,"accept"," .srt"),r(fe.src,we="./logos/upload-svgrepo-com.svg")||w(fe,"src","./logos/upload-svgrepo-com.svg"),w(fe,"alt","Upload file"),w(fe,"class","mini-icon"),w(ge,"class","action-button centered column  svelte-ir33lb"),ge.disabled=Te=e[8]||!e[6]||0===e[6].length,w(de,"class","row centered"),w(ce,"class","column spaced centered"),w(U,"class","row centered spaced"),w(D,"class","row centered spaced"),w(R,"id","capture-feedback-panel"),w(R,"class","column bordered padded centered spaced svelte-ir33lb"),_(Le,"font-weight","bold"),_(Le,"text-decoration","underline"),_(Le,"margin-left","1rem"),r(Ee.src,Me="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||w(Ee,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),w(Ee,"alt","Auto-detect Feedback"),w(Ee,"class","logo"),w(Oe,"class","action-button svelte-ir33lb"),Oe.disabled=qe=!e[0]||!e[0].transcript_list||e[8],r(Ue.src,Ie="./logos/highlight-green-svgrepo-com.svg")||w(Ue,"src","./logos/highlight-green-svgrepo-com.svg"),w(Ue,"alt","Highlight Positive Feedback"),w(Ue,"class","logo"),w(De,"class","action-button svelte-ir33lb"),De.disabled=ze=!e[0]||!e[0].transcript_list||e[8],r(We.src,Qe="./logos/highlight-red-svgrepo-com.svg")||w(We,"src","./logos/highlight-red-svgrepo-com.svg"),w(We,"alt","Highlight Critical Feedback"),w(We,"class","logo"),w(Ye,"class","action-button svelte-ir33lb"),Ye.disabled=et=!e[0]||!e[0].transcript_list||e[8],r(ot.src,st="./logos/erase-svgrepo-com.svg")||w(ot,"src","./logos/erase-svgrepo-com.svg"),w(ot,"alt","De-highlight Feedback"),w(ot,"class","logo"),w(nt,"class","action-button svelte-ir33lb"),nt.disabled=rt=!e[0]||!e[0].transcript_list||e[8],r(ut.src,pt="./logos/delete-svgrepo-com.svg")||w(ut,"src","./logos/delete-svgrepo-com.svg"),w(ut,"alt","Delete all Feedback"),w(ut,"class","logo"),w(dt,"class","action-button svelte-ir33lb"),dt.disabled=ht=!e[0]||!e[0].transcript_list||e[8],w(Ne,"class","row centered spaced"),w(je,"class","centered"),_(je,"height","100%"),_(je,"width","100%"),w(Se,"id","feedback-highlight-panel"),w(Se,"class","column bordered spaced padded  svelte-ir33lb"),w(A,"id","transcript-buttons-area"),w(A,"class","row centered spaced svelte-ir33lb"),w(n,"id","left-panel"),w(n,"class","column spaced svelte-ir33lb"),w(wt,"id","media-player-area"),w(wt,"class","bordered centered svelte-ir33lb"),_(_t,"font-weight","bold"),_(_t,"text-decoration","underline"),w(yt,"id","feedback-details-area"),w(yt,"class","bordered padded spaced svelte-ir33lb"),_(yt,"overflow-y","auto"),w(vt,"id","right-panel"),w(vt,"class","column spaced svelte-ir33lb"),w(t,"div",""),w(t,"class","row spaced svelte-ir33lb"),w(t,"id","feedback-selector-page")},m(o,a){d(o,t,a),l(t,n),l(n,s),l(s,i),Y(c,i,null),l(s,h),l(s,v),Ot.m(v,null),l(v,k),l(v,y),l(y,x),l(v,S),l(v,L),l(L,j),l(s,E),Pt.m(s,null),l(n,M),l(n,A),l(A,R),l(R,q),l(R,H),l(R,D),l(D,U),l(U,I),l(I,J),l(I,Q),l(I,K),l(K,X),e[24](X),l(K,Z),l(K,ee),l(ee,te),l(ee,oe),l(U,ie),l(U,ce),l(ce,re),l(ce,le),l(ce,de),l(de,ue),e[28](ue),l(de,pe),l(de,ge),l(ge,fe),l(ge,$e),l(A,Fe),l(A,Se),l(Se,Le),l(Se,Ce),l(Se,je),l(je,Ne),l(Ne,Oe),l(Oe,Ee),l(Oe,Pe),l(Oe,Ae),l(Oe,Re),l(Ne,He),l(Ne,De),l(De,Ue),l(De,Je),l(De,Ge),l(De,Ve),l(Ne,Be),l(Ne,Ye),l(Ye,We),l(Ye,Ke),l(Ye,Xe),l(Ye,Ze),l(Ne,tt),l(Ne,nt),l(nt,ot),l(nt,it),l(nt,ct),l(nt,at),l(Ne,lt),l(Ne,dt),l(dt,ut),l(dt,gt),l(dt,ft),l(dt,mt),l(t,bt),l(t,vt),l(vt,wt),qt.m(wt,null),l(vt,kt),l(vt,yt),l(yt,_t),l(yt,xt),Ht&&Ht.m(yt,null),$t=!0,Tt||(Ft=[b(y,"click",e[19]),b(L,"click",e[20]),b(X,"change",e[23]),b(X,"change",e[25]),b(ee,"click",e[26]),b(ue,"change",e[27]),b(ue,"change",e[29]),b(ge,"click",e[30]),b(Oe,"click",e[31]),b(De,"click",e[32]),b(Ye,"click",e[33]),b(nt,"click",e[34]),b(dt,"click",e[35])],Tt=!0)},p(e,t){const n={};!a&&1024&t[0]&&(a=!0,n.progress=e[10],P((()=>a=!1))),!p&&512&t[0]&&(p=!0,n.status=e[9],P((()=>p=!1))),c.$set(n),(!$t||256&t[0])&&T(i,"invisible",!1===e[8]),Nt===(Nt=jt(e))&&Ot?Ot.p(e,t):(Ot.d(1),Ot=Nt(e),Ot&&(Ot.c(),Ot.m(v,k))),(!$t||2&t[0]&&F!==(F=!e[1]||e[1].length<=0))&&(y.disabled=F),(!$t||2&t[0]&&O!==(O=!e[1]||e[1].length<=0))&&(L.disabled=O),Mt===(Mt=Et(e))&&Pt?Pt.p(e,t):(Pt.d(1),Pt=Mt(e),Pt&&(Pt.c(),Pt.m(s,null))),(!$t||272&t[0]&&se!==(se=e[8]||!e[4]||0===e[4].length))&&(ee.disabled=se),(!$t||320&t[0]&&Te!==(Te=e[8]||!e[6]||0===e[6].length))&&(ge.disabled=Te),(!$t||257&t[0]&&qe!==(qe=!e[0]||!e[0].transcript_list||e[8]))&&(Oe.disabled=qe),(!$t||257&t[0]&&ze!==(ze=!e[0]||!e[0].transcript_list||e[8]))&&(De.disabled=ze),(!$t||257&t[0]&&et!==(et=!e[0]||!e[0].transcript_list||e[8]))&&(Ye.disabled=et),(!$t||257&t[0]&&rt!==(rt=!e[0]||!e[0].transcript_list||e[8]))&&(nt.disabled=rt),(!$t||257&t[0]&&ht!==(ht=!e[0]||!e[0].transcript_list||e[8]))&&(dt.disabled=ht),Rt===(Rt=At(e))&&qt?qt.p(e,t):(qt.d(1),qt=Rt(e),qt&&(qt.c(),qt.m(wt,null))),e[0]&&e[0].transcript_list?Ht?Ht.p(e,t):(Ht=xe(e),Ht.c(),Ht.m(yt,null)):Ht&&(Ht.d(1),Ht=null)},i(e){$t||(G(c.$$.fragment,e),$t=!0)},o(e){V(c.$$.fragment,e),$t=!1},d(n){n&&u(t),W(c),Ot.d(),Pt.d(),e[24](null),e[28](null),qt.d(),Ht&&Ht.d(),Tt=!1,o(Ft)}}}async function Le(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function Ce(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function je(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const o=await n.json();return[o.audiopath,o.videopath]}async function Ne(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function Oe(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function Ee(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let o=e[n],s=o.id,i=o.start_timestamp,c=o.end_timestamp,a=o.dialogue;"speaker"in o&&""!=o.speaker?t+=`${s}\n${i} --\x3e ${c}\n${o.speaker}: ${a}\n\n`:t+=`${s}\n${i} --\x3e ${c}\n${a}\n\n`}return t}(e);const o=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!o.ok)throw new Error("Failed to detect feedback");return t=(await o.json()).feedback_list,console.log(t),t}function Me(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let o=e[n];if(o.id===t)return o}return console.log("Error: Can't find excerpt with id",t),null}const Pe=(e,t)=>(e[t.speaker]=!0,e),Ae=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),Re=e=>"positive"===e.type,qe=e=>"critical"===e.type;function He(e,t,n){let o,s,i,c,a,r,l,{recording:d}=t,{feedback_list:u}=t,p=0,g=!1,f="",m=0;async function h(){if(c){for(const e of c)if(console.log(e.type),e.type.includes("video")){if((d||"video"in d||"audio"in d||"transcript_list"in d||u.length>0)&&(d.video||d.audio||d.transcript_list)){if(!window.confirm("Uploading a new video will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=URL.createObjectURL(e);if(n(9,f="Uploading video..."),n(10,m=50),[i,s]=await je(e),!i||!s)throw i=null,s=null,new Error("Failed to extract audio from video");let o=await Le(i),c=null,a=null;n(9,f="Done!"),n(10,m=100),Z(1500),n(10,m=0),n(0,d={video:t,video_path:s,audio:o,audio_path:i,transcript:c,transcript_list:a}),i=null,s=null}else if(e.type.includes("audio")){if((d||"audio"in d||"video"in d||"transcript_list"in d||u.length>0)&&(d.audio||d.video||d.transcript_list)){if(!window.confirm("Uploading a new audio will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=URL.createObjectURL(e);n(9,f="Uploading audio..."),n(10,m=50);const o=new FormData;o.append("audio",e);const c=await fetch("/download_mic",{method:"POST",body:o});if(!c.ok)throw i=null,s=null,new Error("Failed to save uploaded audio");let a=await c.json();i=a.filepath;let r=null,l=null;n(9,f="Done!"),n(10,m=100),await Z(1500),n(10,m=0),n(0,d={video:null,video_path:null,audio:t,audio_path:i,transcript:r,transcript_list:l}),i=null,s=null}n(4,c=null),n(5,a.value="",a)}console.log("Recording",d),n(10,m=0),n(9,f="")}async function b(){if(r){for(const e of r)if(console.log(e.type),e.name.endsWith(".srt")){if((d||"transcript"in d||"transcript_list"in d||u.length>0)&&(d.transcript||d.transcript_list)){if(!window.confirm("Uploading a new transcript will overwrite the current transcript and clear highlighted feedback. Do you want to proceed?"))return}n(1,u=[]);let t=new FileReader;t.onload=async function(e){console.log(undefined),n(8,g=!0);let t=e.target.result;console.log(t),n(9,f="Cleaning transcript..."),n(10,m=30);let o=await Ne(t);await Z(1500);let s=await Oe(o),i={video:null,video_path:null,audio:null,audio_path:null,transcript:o,transcript_list:s};d&&("video"in d&&d.video||"audio"in d&&d.audio)?(n(0,d.transcript_list=s,d),n(0,d),n(0,d.transcript=o,d),n(0,d),n(0,d),n(0,d)):n(0,d=i),n(9,f="Saving transcript as a database (this may take a while) ... "),n(10,m=60),await Ce(s),await re(d),console.log("Transcript list embedded"),n(9,f="Done!"),n(10,m=100),await Z(500),n(10,m=0),n(8,g=!1)},t.readAsText(e)}n(6,r=null),n(7,l.value="",l)}console.log("Recording",d),n(10,m=0),n(9,f="")}function v(e){const t=window.getSelection().toString();if(""===t.trim())return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted";if(t){let o={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},s=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let o=e[n],s=o.dialogue;if(o.speaker&&(s=o.speaker+": "+s),s.includes(t))return o}return null}(d.transcript_list,t);return s?(o.id=u.length+1,o.dialogue_id=s.id,o.speaker=s.speaker,o.excerpt_reference=s,o.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],u.push(o),n(1,u),n(0,d),_([o]),o):(console.log("Error: Corresponding transcript excerpt not found"),alert("Error: Corresponding transcript excerpt not found. Feedback not added."),"Error: Corresponding transcript excerpt not found for selection: "+t)}return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted"}function w(){const e=window.getSelection().toString();if(""===e.trim())return alert("Please highlight the feedback you want to remove using your mouse."),"Error: No text highlighted";if(e)for(let t=0;t<u.length;t++){let o=u[t];if(o.quote.includes(e)){let e=parseInt(o.dialogue_id),s=o.quote;return u.splice(t,1),n(1,u),y(e,s),o}}return"Error: Feedback not found for selection: "+e}function k(){for(let e=0;e<u.length;e++){let t=u[e];y(parseInt(t.dialogue_id),t.quote),u.splice(e,1),n(1,u)}}function y(e,t){for(let o=0;o<d.transcript_list.length;o++){let s=d.transcript_list[o];if(s.id===e){let e=s.dialogue,o=e.indexOf("<mark"),i=e.indexOf("</mark>")+7,c=e.slice(0,o)+t+e.slice(i);s.dialogue=c,s.dialogue=s.dialogue,n(0,d);break}}}function _(e){for(let t=0;t<e.length;t++){let n=e[t],o=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let s,i=parseInt(n.dialogue_id);for(let e=0;e<d.transcript_list.length;e++){let t=d.transcript_list[e];if(t.id===i){s=t;break}}if(!s){console.log("Error: Corresponding transcript excerpt not found");continue}let c=s.dialogue,a=c.indexOf(n.quote),r=a+n.quote.length,l=c.slice(0,a)+`<mark class="${o}" style="background-color:${"positive"===o?"lightgreen":"lightcoral"};">${n.quote}</mark>`+c.slice(r);s.dialogue=l}n(0,d)}S((async()=>{console.log(d)}));return e.$$set=e=>{"recording"in e&&n(0,d=e.recording),"feedback_list"in e&&n(1,u=e.feedback_list)},[d,u,p,o,c,a,r,l,g,f,m,h,b,v,w,k,_,function(e){m=e,n(10,m)},function(e){f=e,n(9,f)},async()=>{p>0?n(2,p--,p):n(2,p=u.length-1),oe(u[p]),await te("FeedbackSelector: Traverse to previous feedback",u[p])},async()=>{p<u.length-1?n(2,p++,p):n(2,p=0),oe(u[p]),await te("FeedbackSelector: Traverse to next feedback",u[p])},async e=>{ne(e.start_timestamp,o),await te("FeedbackSelector: Seeked to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackSelector: Seeked to end timestamp",e.end_timestamp)},function(){c=this.value,n(4,c)},function(e){C[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},async e=>{n(4,c=e.target.files),console.log(c),await te("FeedbackSelector: Select media file",c)},async()=>{n(8,g=!0),await h(),n(8,g=!1),await re(d),await te("FeedbackSelector: Upload media",d)},function(){r=this.value,n(6,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(7,l)}))},async e=>{n(6,r=e.target.files),await te("FeedbackSelector: Select transcript file",r)},async()=>{n(8,g=!0),await b(),n(8,g=!1),console.log(d),await te("FeedbackSelector: Upload transcript",d)},async()=>{if(u.length>0){if(!window.confirm("Auto-detecting again will clear all feedback highlighted. Do you want to proceed?"))return}n(8,g=!0),n(10,m=0);let e=d.transcript_list,t=Math.ceil(e.length/4),o=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(9,f="Detecting feedback in transcript ...");for(let e=0;e<o.length;e++){let t=await Ee(o[e]);n(1,u=u.concat(t)),n(10,m=20*(e+1)),await Z(250)}n(1,u),console.log(u);for(let e=0;e<u.length;e++){n(1,u[e].id=e+1,u);let t=u[e].dialogue_id,o=Me(d.transcript_list,t);n(1,u[e].excerpt_reference=o,u)}n(1,u),n(9,f="Highlighting feedback ..."),_(u),await le(u),await re(d),await Z(500),n(10,m=100),console.log("Feedback: "+u[0]),n(8,g=!1),n(10,m=0),n(9,f=""),await te("FeedbackSelector: Auto-detect feedback",u)},async()=>{let e=v("positive");await le(u),await re(d),await te("FeedbackSelector: Add positive feedback",e)},async()=>{let e=v("critical");await le(u),await re(d),await te("FeedbackSelector: Add critical feedback",e)},async()=>{let e=w();await le(u),await re(d),await te("FeedbackSelector: Remove feedback",e)},async()=>{k(),await le(u),await re(d),await te("FeedbackSelector: Removed all feedback",u)},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class De extends X{constructor(e){super(),K(this,e,He,Se,i,{recording:0,feedback_list:1},null,[-1,-1,-1])}}function Ue(t){let n,s,i,c,a,r,p;return{c(){n=g("div"),s=g("input"),i=m(),c=g("span"),a=f(t[0]),w(s,"type","range"),w(s,"min",t[1]),w(s,"max",t[2]),w(s,"step",t[3]),w(s,"id","rangeSlider"),w(s,"class","svelte-ohnqtn"),w(c,"id","sliderValue"),w(n,"class","centered spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),l(n,s),y(s,t[0]),l(n,i),l(n,c),l(c,a),r||(p=[b(s,"change",t[4]),b(s,"input",t[4])],r=!0)},p(e,[t]){2&t&&w(s,"min",e[1]),4&t&&w(s,"max",e[2]),8&t&&w(s,"step",e[3]),1&t&&y(s,e[0]),1&t&&k(a,e[0])},i:e,o:e,d(e){e&&u(n),r=!1,o(p)}}}function Ie(e,t,n){let{min:o=0}=t,{max:s=2}=t,{step:i=.1}=t,{value:c=1}=t;return e.$$set=e=>{"min"in e&&n(1,o=e.min),"max"in e&&n(2,s=e.max),"step"in e&&n(3,i=e.step),"value"in e&&n(0,c=e.value)},[c,o,s,i,function(){c=function(e){return""===e?null:+e}(this.value),n(0,c)}]}class Je extends X{constructor(e){super(),K(this,e,Ie,Ue,i,{min:1,max:2,step:3,value:0})}}function Ge(e,t,n){const o=e.slice();return o[126]=t[n],o}function Ve(e,t,n){const o=e.slice();return o[129]=t[n],o[115]=n,o}function ze(e,t,n){const o=e.slice();return o[129]=t[n],o[115]=n,o}function Be(e,t,n){const o=e.slice();return o[119]=t[n],o[115]=n,o}function Ye(e,t,n){const o=e.slice();return o[121]=t[n],o}function We(e,t,n){const o=e.slice();return o[116]=t[n],o}function Qe(e,t,n){const o=e.slice();return o[121]=t[n],o}function Ke(e,t,n){const o=e.slice();return o[113]=t[n],o[115]=n,o}function Xe(e,t,n){const o=e.slice();return o[132]=t[n],o[115]=n,o}function Ze(e,t,n){const o=e.slice();return o[134]=t[n],o[115]=n,o}function et(e,t,n){const o=e.slice();return o[134]=t[n],o[135]=t,o[115]=n,o}function tt(e,t,n){const o=e.slice();return o[132]=t[n],o[115]=n,o}function nt(e){let t,n,o,s,i=e[132]+"";function c(){return e[46](e[115])}return{c(){t=g("button"),n=f(i),w(t,"class","tab svelte-138fhn9"),T(t,"active",e[115]===e[14]),T(t,"right-bordered",e[115]<e[32].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=b(t,"click",c),o=!0)},p(n,o){e=n,16384&o[0]&&T(t,"active",e[115]===e[14])},d(e){e&&u(t),o=!1,s()}}}function ot(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=dt(Ze(e,n,t));return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","grid svelte-138fhn9"),_(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(46097&s[0]|280&s[1]){let i;for(n=e[0],i=0;i<n.length;i+=1){const c=Ze(e,n,i);o[i]?o[i].p(c,s):(o[i]=dt(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function st(e){let t,n,s,i,c,a,f,h,v,k,y,x,$,T,F,S,L,C,j,N,O,E,M,P,A,R;function q(e,t){return e[28]&&"quote"===e[27]?pt:ut}let H=q(e),D=H(e);function U(e,t){return e[28]&&"speaker"===e[27]?ft:gt}let I=U(e),J=I(e),G=e[0],V=[];for(let t=0;t<G.length;t+=1)V[t]=xt(et(e,G,t));return{c(){t=g("div"),n=g("div"),s=g("span"),s.innerHTML="<strong>ID</strong>",i=m(),c=g("span"),a=g("strong"),a.textContent="Feedback",f=m(),h=g("button"),D.c(),v=m(),k=g("span"),y=g("strong"),y.textContent="Speaker",x=m(),$=g("button"),J.c(),T=m(),F=g("span"),F.innerHTML="<strong>Actions</strong>",S=m(),L=g("span"),C=g("strong"),C.textContent="Done?",j=m(),N=g("button"),O=g("img"),P=m();for(let e=0;e<V.length;e+=1)V[e].c();w(s,"class","centered id-col svelte-138fhn9"),w(h,"class","action-button"),w(c,"class","centered row spaced feedback-col svelte-138fhn9"),w($,"class","action-button"),w(k,"class","centered row spaced speaker-col svelte-138fhn9"),w(F,"id","feedback-buttons"),w(F,"class","centered row actions-col svelte-138fhn9"),_(O,"height","1rem"),_(O,"width","1rem"),r(O.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||w(O,"src",E),w(O,"alt",M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending"),w(O,"class","mini-icon"),w(N,"class","action-button"),w(L,"class","centered row spaced done-col svelte-138fhn9"),w(n,"class","feedback-header row svelte-138fhn9"),w(t,"class","column"),_(t,"overflow-y","auto")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,c),l(c,a),l(c,f),l(c,h),D.m(h,null),l(n,v),l(n,k),l(k,y),l(k,x),l(k,$),J.m($,null),l(n,T),l(n,F),l(n,S),l(n,L),l(L,C),l(L,j),l(L,N),l(N,O),l(t,P);for(let e=0;e<V.length;e+=1)V[e]&&V[e].m(t,null);A||(R=[b(h,"click",e[47]),b($,"click",e[48]),b(N,"click",e[49])],A=!0)},p(e,n){if(H!==(H=q(e))&&(D.d(1),D=H(e),D&&(D.c(),D.m(h,null))),I!==(I=U(e))&&(J.d(1),J=I(e),J&&(J.c(),J.m($,null))),402653184&n[0]&&!r(O.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&w(O,"src",E),402653184&n[0]&&M!==(M=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending")&&w(O,"alt",M),46097&n[0]|280&n[1]){let o;for(G=e[0],o=0;o<G.length;o+=1){const s=et(e,G,o);V[o]?V[o].p(s,n):(V[o]=xt(s),V[o].c(),V[o].m(t,null))}for(;o<V.length;o+=1)V[o].d(1);V.length=G.length}},d(e){e&&u(t),D.d(),J.d(),p(V,e),A=!1,o(R)}}}function it(e){let t,n,s,i,c,a,r,p,h,v,y,_,x,$,F,S,L,C,j,N,O,E,M,P,A,R,q=e[134].quote+"",H=e[134].speaker+"";function D(e,t){return"excerpt_reference"in e[134]?at:ct}let U=D(e),I=U(e);function J(){return e[59](e[134])}function G(){return e[60](e[134])}function V(){return e[61](e[134])}function z(){return e[62](e[134])}function B(...t){return e[63](e[134],...t)}return{c(){t=g("div"),n=g("div"),s=g("small"),I.c(),i=m(),c=g("div"),a=g("button"),a.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 2.3rem; width: 2.3rem;"/>',r=m(),p=g("button"),p.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add note" class="mini-icon"/>',h=m(),v=g("button"),v.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Paraphrase positively" style="height: 2rem; width: 2rem;"/>',y=m(),_=g("br"),x=m(),$=g("p"),F=f('"'),S=f(q),L=f('"'),C=m(),j=g("br"),N=m(),O=g("span"),E=f("- "),M=f(H),P=m(),w(s,"class","timestamp svelte-138fhn9"),w(a,"class","action-button"),w(p,"class","action-button"),w(v,"class","action-button"),w(c,"class","row spaced"),w(n,"class","note-header row space-between"),w(t,"class","positive-feedback-note svelte-138fhn9"),T(t,"selected",e[134]===e[12])},m(e,o){d(e,t,o),l(t,n),l(n,s),I.m(s,null),l(n,i),l(n,c),l(c,a),l(c,r),l(c,p),l(c,h),l(c,v),l(t,y),l(t,_),l(t,x),l(t,$),l($,F),l($,S),l($,L),l(t,C),l(t,j),l(t,N),l(t,O),l(O,E),l(O,M),l(t,P),A||(R=[b(s,"click",J),b(a,"click",G),b(p,"click",V),b(v,"click",z),b(t,"click",B)],A=!0)},p(n,o){U===(U=D(e=n))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(s,null))),1&o[0]&&q!==(q=e[134].quote+"")&&k(S,q),1&o[0]&&H!==(H=e[134].speaker+"")&&k(M,H),4097&o[0]&&T(t,"selected",e[134]===e[12])},d(e){e&&u(t),I.d(),A=!1,o(R)}}}function ct(t){let n;return{c(){n=f("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function at(e){let t;function n(e,t){return"start_timestamp"in e[134].excerpt_reference?lt:rt}let o=n(e),s=o(e);return{c(){s.c(),t=h()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function rt(t){let n;return{c(){n=f("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function lt(e){let t,n,o,s=e[134].excerpt_reference.start_timestamp+"";return{c(){t=f("["),n=f(s),o=f("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[134].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function dt(e){let t,n="positive"===e[134].type&&it(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"positive"===e[134].type?n?n.p(e,o):(n=it(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function ut(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function pt(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function gt(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ft(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function mt(e){let t,n,s,i,c,a,r,p,h,v,y,_,x,$,F,S,L,C,j,N,O,E,M,P,A,R,q,H=e[134].id+"",D=(e[134].speaker?e[134].speaker:"Unknown")+"";function U(e,t){return"excerpt_reference"in e[134]?bt:ht}let I=U(e),J=I(e);function G(){return e[50](e[134])}function V(e,t){return e[134].positivised_quote&&e[134].show_paraphrased?yt:kt}let z=V(e),B=z(e);function Y(){return e[53](e[134],e[135],e[115])}function W(){return e[54](e[134])}function Q(){return e[55](e[134])}function K(){return e[56](e[134])}function X(){e[57].call(P,e[135],e[115])}function Z(...t){return e[58](e[134],...t)}return{c(){t=g("div"),n=g("span"),s=g("strong"),i=f(H),c=m(),a=g("div"),r=g("span"),p=g("span"),J.c(),h=m(),B.c(),v=m(),y=g("span"),_=f(D),x=m(),$=g("div"),F=g("button"),F.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon"/>\n                                            Positivize',S=m(),L=g("button"),L.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 3.3rem; width: 3.3rem;"/>\n                                            Select Context',C=m(),j=g("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Add Note',N=m(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Delete',E=m(),M=g("span"),P=g("input"),A=m(),w(n,"class","id-col svelte-138fhn9"),w(p,"class","timestamp svelte-138fhn9"),w(r,"class",""),w(a,"class","column feedback-col svelte-138fhn9"),w(y,"class","centered speaker-col svelte-138fhn9"),w(F,"class","action-button"),w(L,"class","action-button centered column"),w(j,"class","action-button"),w(O,"class","action-button"),w($,"id","feedback-buttons"),w($,"class","row centered spaced actions-col svelte-138fhn9"),w(P,"type","checkbox"),w(M,"class","centered done-col svelte-138fhn9"),w(t,"class","feedback-row row bordered padded svelte-138fhn9"),T(t,"done",e[134].done),T(t,"selected",e[134]===e[12])},m(o,u){d(o,t,u),l(t,n),l(n,s),l(s,i),l(t,c),l(t,a),l(a,r),l(r,p),J.m(p,null),l(r,h),B.m(r,null),l(t,v),l(t,y),l(y,_),l(t,x),l(t,$),l($,F),l($,S),l($,L),l($,C),l($,j),l($,N),l($,O),l(t,E),l(t,M),l(M,P),P.checked=e[134].done,l(t,A),R||(q=[b(p,"click",G),b(F,"click",Y),b(L,"click",W),b(j,"click",Q),b(O,"click",K),b(P,"change",X),b(t,"click",Z)],R=!0)},p(n,o){e=n,1&o[0]&&H!==(H=e[134].id+"")&&k(i,H),I===(I=U(e))&&J?J.p(e,o):(J.d(1),J=I(e),J&&(J.c(),J.m(p,null))),z===(z=V(e))&&B?B.p(e,o):(B.d(1),B=z(e),B&&(B.c(),B.m(r,null))),1&o[0]&&D!==(D=(e[134].speaker?e[134].speaker:"Unknown")+"")&&k(_,D),1&o[0]&&(P.checked=e[134].done),1&o[0]&&T(t,"done",e[134].done),4097&o[0]&&T(t,"selected",e[134]===e[12])},d(e){e&&u(t),J.d(),B.d(),R=!1,o(q)}}}function ht(t){let n;return{c(){n=f("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function bt(e){let t;function n(e,t){return"start_timestamp"in e[134].excerpt_reference?wt:vt}let o=n(e),s=o(e);return{c(){s.c(),t=h()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function vt(t){let n;return{c(){n=f("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function wt(e){let t,n,o,s=e[134].excerpt_reference.start_timestamp+"";return{c(){t=f("["),n=f(s),o=f("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[134].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function kt(e){let t,n,o,s,i=e[134].quote+"",c=e[134].positivised_quote&&!e[134].show_paraphrased&&_t(e);return{c(){t=f('"'),n=f(i),o=f('" '),c&&c.c(),s=h()},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i),c&&c.m(e,i),d(e,s,i)},p(e,t){1&t[0]&&i!==(i=e[134].quote+"")&&k(n,i),e[134].positivised_quote&&!e[134].show_paraphrased?c?c.p(e,t):(c=_t(e),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(e){e&&u(t),e&&u(n),e&&u(o),c&&c.d(e),e&&u(s)}}}function yt(e){let t,n,o,s,i,c,a,r=e[134].positivised_quote+"";function l(){return e[51](e[134])}return{c(){t=g("strong"),t.textContent="(Paraphrased Feedback)",n=f(' "'),o=f(r),s=f('" \n                                                '),i=g("span"),i.textContent="(View original quote)",w(i,"class","clickable svelte-138fhn9")},m(e,r){d(e,t,r),d(e,n,r),d(e,o,r),d(e,s,r),d(e,i,r),c||(a=b(i,"click",l),c=!0)},p(t,n){e=t,1&n[0]&&r!==(r=e[134].positivised_quote+"")&&k(o,r)},d(e){e&&u(t),e&&u(n),e&&u(o),e&&u(s),e&&u(i),c=!1,a()}}}function _t(e){let t,n,o;function s(){return e[52](e[134])}return{c(){t=g("span"),t.textContent="(View paraphrased quote)",w(t,"class","clickable svelte-138fhn9")},m(e,i){d(e,t,i),n||(o=b(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function xt(e){let t,n="critical"===e[134].type&&mt(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"critical"===e[134].type?n?n.p(e,o):(n=mt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function $t(e){let t,n,o,s,i=e[132]+"";function c(){return e[64](e[115])}return{c(){t=g("button"),n=f(i),w(t,"class","tab svelte-138fhn9"),T(t,"active",e[115]===e[13]),T(t,"right-bordered",e[115]<e[33].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=b(t,"click",c),o=!0)},p(n,o){e=n,8192&o[0]&&T(t,"active",e[115]===e[13])},d(e){e&&u(t),o=!1,s()}}}function Tt(t){let n,s,i,c,a,r,p,f,h,v,k,y,x,$,F,S,L;function C(e,t){return e[3].length>0?Ct:Lt}let j=C(t),N=j(t),O=t[29]&&Nt(t);function E(e,t){return 16&t[0]&&(F=null),null==F&&(F=!!(Object.keys(e[4]).length>0)),F?Et:Ot}let M=E(t,[-1,-1,-1,-1,-1]),P=M(t);return{c(){n=g("div"),s=g("div"),i=g("div"),i.innerHTML='<span style="text-decoration: underline;"><strong>My Notes</strong></span>',c=m(),a=g("div"),N.c(),r=m(),O&&O.c(),p=m(),f=g("div"),h=g("button"),h.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                    Add Note',v=m(),k=g("button"),k.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                    Delete all',y=m(),x=g("div"),x.innerHTML='<span style="text-decoration: underline;"><strong>My Feedback Notes</strong></span>',$=m(),P.c(),w(i,"class","row centered"),_(i,"width","100%"),_(i,"height","auto"),w(a,"class","column bordered"),_(a,"width","100%"),_(a,"height","auto"),T(a,"centered",t[3].length<=0),w(h,"class","action-button centered column"),w(k,"class","action-button centered column"),w(f,"class","row centered spaced"),w(s,"class","column centered spaced padded"),_(s,"width","100%"),_(s,"height","auto"),w(x,"class","row centered"),_(x,"width","100%"),_(x,"height","auto"),w(n,"class","column spaced padded"),_(n,"width","100%"),_(n,"height","100%"),_(n,"overflow-y","auto")},m(e,o){d(e,n,o),l(n,s),l(s,i),l(s,c),l(s,a),N.m(a,null),l(a,r),O&&O.m(a,null),l(s,p),l(s,f),l(f,h),l(f,v),l(f,k),l(n,y),l(n,x),l(n,$),P.m(n,null),S||(L=[b(h,"click",t[102]),b(k,"click",t[103])],S=!0)},p(e,t){j===(j=C(e))&&N?N.p(e,t):(N.d(1),N=j(e),N&&(N.c(),N.m(a,r))),e[29]?O?O.p(e,t):(O=Nt(e),O.c(),O.m(a,null)):O&&(O.d(1),O=null),8&t[0]&&T(a,"centered",e[3].length<=0),M===(M=E(e,t))&&P?P.p(e,t):(P.d(1),P=M(e),P&&(P.c(),P.m(n,null)))},i:e,o:e,d(e){e&&u(n),N.d(),O&&O.d(),P.d(),S=!1,o(L)}}}function Ft(e){let t,n,s,i,c,a,f,h,v,k,y,$,F,S,L,C,j,N=Object.keys(e[31]),O=[];for(let t=0;t<N.length;t+=1)O[t]=Ht(Qe(e,N,t));const E=[Ut,Dt],P=[];function A(e,t){return e[6]?1:0}return F=A(e),S=P[F]=E[F](e),{c(){t=g("div"),n=g("div"),s=g("div"),i=g("span"),i.textContent="Model:",c=m(),a=g("select");for(let e=0;e<O.length;e+=1)O[e].c();f=m(),h=g("button"),v=g("img"),$=m(),S.c(),void 0===e[7]&&M((()=>e[70].call(a))),w(s,"class","row spaced centered"),_(s,"height","auto"),_(s,"width","100%"),T(s,"gone",e[6]),w(v,"class","action-icon"),r(v.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg")||w(v,"src",k),w(v,"alt",y=e[6]?"Exit chatbot settings":"Open chatbot settings"),_(v,"width","2.5rem"),_(v,"height","2.5rem"),w(h,"class","action-button"),w(n,"id","chatbot-header"),w(n,"class","padded row space-between svelte-138fhn9"),w(t,"id","chatbot-tab-content"),w(t,"class","column svelte-138fhn9")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,c),l(s,a);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(a,null);x(a,e[7],!0),l(n,f),l(n,h),l(h,v),l(t,$),P[F].m(t,null),L=!0,C||(j=[b(a,"change",e[70]),b(h,"click",e[71])],C=!0)},p(e,n){if(1&n[1]){let t;for(N=Object.keys(e[31]),t=0;t<N.length;t+=1){const o=Qe(e,N,t);O[t]?O[t].p(o,n):(O[t]=Ht(o),O[t].c(),O[t].m(a,null))}for(;t<O.length;t+=1)O[t].d(1);O.length=N.length}128&n[0]|1&n[1]&&x(a,e[7]),(!L||64&n[0])&&T(s,"gone",e[6]),(!L||64&n[0]&&!r(v.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg"))&&w(v,"src",k),(!L||64&n[0]&&y!==(y=e[6]?"Exit chatbot settings":"Open chatbot settings"))&&w(v,"alt",y);let o=F;F=A(e),F===o?P[F].p(e,n):(I(),V(P[o],1,1,(()=>{P[o]=null})),J(),S=P[F],S?S.p(e,n):(S=P[F]=E[F](e),S.c()),G(S,1),S.m(t,null))},i(e){L||(G(S),L=!0)},o(e){V(S),L=!1},d(e){e&&u(t),p(O,e),P[F].d(),C=!1,o(j)}}}function St(t){let n,o,s,i;function c(e,t){return e[5]&&e[5].video?sn:e[5]&&e[5].audio?on:nn}let a=c(t),r=a(t),p=t[5]&&t[5].transcript&&cn(t);return{c(){n=g("div"),o=g("div"),r.c(),s=m(),i=g("div"),p&&p.c(),w(o,"id","media-player-area"),w(o,"class","bordered svelte-138fhn9"),w(i,"id","transcript-area"),w(i,"class","column bordered spaced svelte-138fhn9"),w(n,"class","column padded spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,t){d(e,n,t),l(n,o),r.m(o,null),l(n,s),l(n,i),p&&p.m(i,null)},p(e,t){a===(a=c(e))&&r?r.p(e,t):(r.d(1),r=a(e),r&&(r.c(),r.m(o,null))),e[5]&&e[5].transcript?p?p.p(e,t):(p=cn(e),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&u(n),r.d(),p&&p.d()}}}function Lt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded space-between centered")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Ct(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=jt(ze(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(8&s[0]|8192&s[1]){let i;for(n=e[3],i=0;i<n.length;i+=1){const c=ze(e,n,i);o[i]?o[i].p(c,s):(o[i]=jt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function jt(e){let t,n,o,s,i,c,a,r,p,h=e[129]+"";function v(){return e[98](e[115],e[129])}return{c(){t=g("div"),n=g("p"),o=f(h),s=m(),i=g("div"),c=g("button"),c.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Delete note" class="mini-icon"/>',a=m(),w(c,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,s),l(t,i),l(i,c),l(t,a),r||(p=b(c,"click",v),r=!0)},p(t,n){e=t,8&n[0]&&h!==(h=e[129]+"")&&k(o,h)},d(e){e&&u(t),r=!1,p()}}}function Nt(e){let t,n,s,i,c,a,r,p,f;return{c(){t=g("div"),n=g("input"),s=m(),i=g("div"),c=g("button"),c.textContent="Confirm",a=m(),r=g("button"),r.textContent="Cancel",w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action-button"),w(r,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,c),l(i,a),l(i,r),p||(f=[b(n,"input",e[99]),b(c,"click",e[100]),b(r,"click",e[101])],p=!0)},p(e,t){1073741824&t[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(f)}}}function Ot(t){let n;return{c(){n=g("div"),n.innerHTML='<div class="row space-between centered" style="width:100%; height:auto;"><span>No feedback notes added. Feel free to add notes on your feedback by clicking &quot;Add Note&quot; on any of the critical feedback.</span></div>',w(n,"class","column centered spaced padded"),_(n,"width","100%"),_(n,"height","auto")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Et(e){let t,n=Object.keys(e[4]).map(Number).sort(dn),o=[];for(let t=0;t<n.length;t+=1)o[t]=qt(Ge(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(1073741841&s[0]|24576&s[1]){let i;for(n=Object.keys(e[4]).map(Number).sort(dn),i=0;i<n.length;i+=1){const c=Ge(e,n,i);o[i]?o[i].p(c,s):(o[i]=qt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Mt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded centered space-between")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Pt(e){let t,n=e[4][e[126]].notes,o=[];for(let t=0;t<n.length;t+=1)o[t]=At(Ve(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(16&s[0]|8192&s[1]){let i;for(n=e[4][e[126]].notes,i=0;i<n.length;i+=1){const c=Ve(e,n,i);o[i]?o[i].p(c,s):(o[i]=At(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function At(e){let t,n,o,s,i,c,a,p,h,v,y,_,x=e[129]+"";function $(){return e[105](e[115],e[126],e[129])}return{c(){t=g("div"),n=g("p"),o=f(x),s=m(),i=g("div"),c=g("button"),a=g("img"),v=m(),r(a.src,p="./logos/delete-x-svgrepo-com.svg")||w(a,"src","./logos/delete-x-svgrepo-com.svg"),w(a,"alt",h="Delete note from Feedback ID"+e[126]),w(a,"class","mini-icon"),w(c,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(t,s),l(t,i),l(i,c),l(c,a),l(t,v),y||(_=b(c,"click",$),y=!0)},p(t,n){e=t,16&n[0]&&x!==(x=e[129]+"")&&k(o,x),16&n[0]&&h!==(h="Delete note from Feedback ID"+e[126])&&w(a,"alt",h)},d(e){e&&u(t),y=!1,_()}}}function Rt(e){let t,n,s,i,c,a,r,p,f;function h(){return e[107](e[126])}function v(){return e[108](e[126])}return{c(){t=g("div"),n=g("input"),s=m(),i=g("div"),c=g("button"),c.textContent="Confirm",a=m(),r=g("button"),r.textContent="Cancel",w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(c,"class","action=button"),w(r,"class","action=button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,c),l(i,a),l(i,r),p||(f=[b(n,"input",e[106]),b(c,"click",h),b(r,"click",v)],p=!0)},p(t,o){e=t,1073741824&o[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(f)}}}function qt(e){let t,n,s,i,c,a,r,p,h,v,y,x,$,F,S,L,C,j,N,O,E,M,P,A,R=e[126]+"",q=e[0][e[126]-1].quote.slice(0,70)+"";function H(){return e[104](e[126])}function D(e,t){return e[4][e[126]].notes.length>0?Pt:Mt}let U=D(e),I=U(e),J=e[4][e[126]].is_adding&&Rt(e);function G(){return e[109](e[126])}function V(){return e[110](e[126])}return{c(){t=g("div"),n=g("div"),s=g("span"),i=g("strong"),c=f("Feedback #"),a=f(R),r=f(" Notes:"),p=m(),h=f(q),v=f("..."),y=m(),x=g("button"),x.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove feedback notes section" class="mini-icon"/>',$=m(),F=g("div"),I.c(),S=m(),J&&J.c(),L=m(),C=g("div"),j=g("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                            Add Note',N=m(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                            Delete all',E=m(),w(x,"class","action-button"),w(n,"class","row space-between"),_(n,"width","100%"),_(n,"height","auto"),w(F,"class","column bordered"),_(F,"width","100%"),_(F,"height","auto"),T(F,"centered",e[4][e[126]].notes.length<=0),w(j,"class","action-button centered column"),w(O,"class","action-button centered column"),w(C,"class","row centered spaced"),w(t,"id",M="feedback-note-section-"+e[126]),w(t,"class","column centered spaced padded svelte-138fhn9"),_(t,"width","100%"),_(t,"height","auto")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(s,i),l(i,c),l(i,a),l(i,r),l(s,p),l(s,h),l(s,v),l(n,y),l(n,x),l(t,$),l(t,F),I.m(F,null),l(F,S),J&&J.m(F,null),l(t,L),l(t,C),l(C,j),l(C,N),l(C,O),l(t,E),P||(A=[b(x,"click",H),b(j,"click",G),b(O,"click",V)],P=!0)},p(n,o){e=n,16&o[0]&&R!==(R=e[126]+"")&&k(a,R),17&o[0]&&q!==(q=e[0][e[126]-1].quote.slice(0,70)+"")&&k(h,q),U===(U=D(e))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(F,S))),e[4][e[126]].is_adding?J?J.p(e,o):(J=Rt(e),J.c(),J.m(F,null)):J&&(J.d(1),J=null),16&o[0]&&T(F,"centered",e[4][e[126]].notes.length<=0),16&o[0]&&M!==(M="feedback-note-section-"+e[126])&&w(t,"id",M)},d(e){e&&u(t),I.d(),J&&J.d(),P=!1,o(A)}}}function Ht(t){let n,o,s=t[121]+"";return{c(){n=g("option"),o=f(s),n.__value=t[121],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Dt(e){let t,n,s,i,c,a,h,v,k,y,$,F,S,L,j,N,O,E,A,R,q,H,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,pe,ge,fe,me,he,be=Object.keys(e[31]),ve=[];for(let t=0;t<be.length;t+=1)ve[t]=It(Ye(e,be,t));function we(t){e[89](t)}let ke={min:"0.0",max:"2.0",step:"0.1"};function ye(t){e[90](t)}void 0!==e[8]&&(ke.value=e[8]),S=new Je({props:ke}),C.push((()=>z(S,"value",we)));let _e={min:"10.0",max:"4095.0",step:"1.0"};function xe(t){e[91](t)}function $e(t){e[92](t)}void 0!==e[9]&&(_e.value=e[9]),A=new Je({props:_e}),C.push((()=>z(A,"value",ye)));let Te={};function Fe(e,t){return e[1].length>0?Gt:Jt}void 0!==e[25]&&(Te.progress=e[25]),void 0!==e[24]&&(Te.status=e[24]),Q=new ae({props:Te}),C.push((()=>z(Q,"progress",xe))),C.push((()=>z(Q,"status",$e)));let Se=Fe(e),Le=Se(e);return{c(){t=g("div"),n=g("div"),s=g("span"),s.innerHTML="<strong>Configurations</strong>",i=m(),c=g("div"),a=g("span"),a.textContent="Model:",h=m(),v=g("select");for(let e=0;e<ve.length;e+=1)ve[e].c();k=m(),y=g("div"),$=g("span"),$.textContent="Temperature:",F=m(),B(S.$$.fragment),j=m(),N=g("div"),O=g("span"),O.textContent="Max Output Tokens:",E=m(),B(A.$$.fragment),q=m(),H=g("div"),D=g("span"),D.innerHTML="<strong>Chatbot&#39;s Resources</strong>",U=m(),I=g("div"),J=g("div"),B(Q.$$.fragment),Z=m(),Le.c(),ee=m(),te=g("div"),ne=g("input"),oe=m(),se=g("button"),ie=g("img"),re=f("\n                                            Add Document"),le=m(),de=g("button"),ue=g("img"),ge=f("\n                                            Remove All"),void 0===e[7]&&M((()=>e[88].call(v))),w(c,"class","row spaced centered"),_(c,"height","auto"),_(c,"width","100%"),w(y,"class","row spaced"),_(y,"height","auto"),_(y,"width","100%"),w(N,"class","row spaced"),_(N,"height","auto"),_(N,"width","100%"),w(n,"id","chatbot-configurations"),w(n,"class","column centered spaced padded bordered"),w(J,"class","overlay centered padded"),T(J,"invisible",!1===e[26]),w(I,"id","chatbot-rag-sources"),w(I,"class","column centered spaced padded bordered"),_(I,"width","100%"),_(I,"height","auto"),_(I,"overflow-y","auto"),w(ne,"type","file"),w(ne,"id","document_file_input"),w(ne,"class","gone"),r(ie.src,ce="./logos/add-ellipse-svgrepo-com.svg")||w(ie,"src","./logos/add-ellipse-svgrepo-com.svg"),w(ie,"alt","Add document"),w(ie,"class","action-icon"),se.disabled=e[26],w(se,"class","centered spaced column action-button"),r(ue.src,pe="./logos/delete-svgrepo-com.svg")||w(ue,"src","./logos/delete-svgrepo-com.svg"),w(ue,"alt","Remove all documents"),w(ue,"class","action-icon"),de.disabled=e[26],w(de,"class","centered spaced column action-button"),w(te,"id","chatbot-rag-buttons"),w(te,"class","row centered padded spaced"),_(te,"width","100%"),_(te,"height","auto"),w(H,"id","chatbot-rag-panel"),w(H,"class","column centered spaced padded bordered"),w(t,"id","chatbot-settings"),w(t,"class","column padded spaced"),_(t,"width","100%"),_(t,"height","95%")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,c),l(c,a),l(c,h),l(c,v);for(let e=0;e<ve.length;e+=1)ve[e]&&ve[e].m(v,null);x(v,e[7],!0),l(n,k),l(n,y),l(y,$),l(y,F),Y(S,y,null),l(n,j),l(n,N),l(N,O),l(N,E),Y(A,N,null),l(t,q),l(t,H),l(H,D),l(H,U),l(H,I),l(I,J),Y(Q,J,null),l(I,Z),Le.m(I,null),l(H,ee),l(H,te),l(te,ne),e[94](ne),l(te,oe),l(te,se),l(se,ie),l(se,re),l(te,le),l(te,de),l(de,ue),l(de,ge),fe=!0,me||(he=[b(v,"change",e[88]),b(ne,"change",e[95]),b(se,"click",e[96]),b(de,"click",e[97])],me=!0)},p(e,t){if(1&t[1]){let n;for(be=Object.keys(e[31]),n=0;n<be.length;n+=1){const o=Ye(e,be,n);ve[n]?ve[n].p(o,t):(ve[n]=It(o),ve[n].c(),ve[n].m(v,null))}for(;n<ve.length;n+=1)ve[n].d(1);ve.length=be.length}128&t[0]|1&t[1]&&x(v,e[7]);const n={};!L&&256&t[0]&&(L=!0,n.value=e[8],P((()=>L=!1))),S.$set(n);const o={};!R&&512&t[0]&&(R=!0,o.value=e[9],P((()=>R=!1))),A.$set(o);const s={};!K&&33554432&t[0]&&(K=!0,s.progress=e[25],P((()=>K=!1))),!X&&16777216&t[0]&&(X=!0,s.status=e[24],P((()=>X=!1))),Q.$set(s),(!fe||67108864&t[0])&&T(J,"invisible",!1===e[26]),Se===(Se=Fe(e))&&Le?Le.p(e,t):(Le.d(1),Le=Se(e),Le&&(Le.c(),Le.m(I,null))),(!fe||67108864&t[0])&&(se.disabled=e[26]),(!fe||67108864&t[0])&&(de.disabled=e[26])},i(e){fe||(G(S.$$.fragment,e),G(A.$$.fragment,e),G(Q.$$.fragment,e),fe=!0)},o(e){V(S.$$.fragment,e),V(A.$$.fragment,e),V(Q.$$.fragment,e),fe=!1},d(n){n&&u(t),p(ve,n),W(S),W(A),W(Q),Le.d(),e[94](null),me=!1,o(he)}}}function Ut(e){let t,n,s,i,c,a,f,h,k,x,$,F,S,L,j,N,O,E,M,A,R,q,H,D,U,I,J,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,re,le,de,ue,pe,ge,fe,me,he,be=e[2],ve=[];for(let t=0;t<be.length;t+=1)ve[t]=Kt(We(e,be,t));function we(t){e[75](t)}function ke(t){e[76](t)}let ye={};function _e(e,t){return e[15]?Zt:Xt}void 0!==e[23]&&(ye.progress=e[23]),void 0!==e[22]&&(ye.status=e[22]),h=new ae({props:ye}),C.push((()=>z(h,"progress",we))),C.push((()=>z(h,"status",ke)));let xe=_e(e),$e=xe(e);function Te(e,t){return e[17]?tn:en}let Fe=Te(e),Se=Fe(e);return{c(){t=g("div"),n=g("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",s=m();for(let e=0;e<ve.length;e+=1)ve[e].c();i=m(),c=g("div"),a=g("p"),a.innerHTML="<strong>assistant:</strong>",f=m(),B(h.$$.fragment),$=m(),F=g("div"),S=m(),L=g("div"),j=g("div"),N=g("div"),O=g("span"),O.innerHTML="<strong>Feedback Context:</strong>",E=m(),$e.c(),A=m(),R=g("div"),q=g("span"),q.innerHTML="<strong>Suggested messages:</strong>",H=m(),D=g("div"),D.textContent="Explain feedback.",U=m(),I=g("div"),I.textContent="Brainstorm actions.",Q=m(),K=g("div"),Se.c(),Z=m(),ee=g("div"),te=g("div"),ne=g("label"),oe=m(),se=g("input"),ie=m(),ce=g("button"),ce.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon"/>',re=m(),le=g("textarea"),de=m(),ue=g("button"),pe=g("img"),w(n,"class","assistant padded svelte-138fhn9"),w(c,"class","assistant padded column svelte-138fhn9"),T(c,"invisible",!1===e[21]),_(F,"height","20%"),_(F,"width","100%"),_(F,"background-color","white"),_(F,"color","white"),_(F,"cursor","default"),w(t,"id","chatbot-messages"),w(t,"class","column spaced bordered padded svelte-138fhn9"),w(N,"id","contexts"),w(N,"class","column centered bordered svelte-138fhn9"),w(N,"style",M=e[17]?"width:30%;":"width:45%;"),w(D,"class","suggested-message svelte-138fhn9"),w(I,"class","suggested-message svelte-138fhn9"),w(R,"id","suggested-messages"),w(R,"class","column centered bordered svelte-138fhn9"),w(R,"style",J=e[17]?"width:30%;":"width:45%;"),w(K,"id","visual-context"),w(K,"class","column centered bordered svelte-138fhn9"),w(K,"style",X=e[17]?"width:30%;":"display:none;"),w(j,"id","chatbot-utilities"),w(j,"class","row centered spaced svelte-138fhn9"),w(ne,"for","image_upload"),_(ne,"display","none"),w(se,"accept","image/png, image/jpeg"),w(se,"type","file"),_(se,"display","none"),w(se,"id","image_upload"),w(se,"name","image_upload"),w(ce,"class","action-button centered column"),w(te,"class","column spaced"),_(le,"width","100%"),_(le,"height","100%"),w(le,"placeholder","Type your message here..."),w(le,"id","textarea"),r(pe.src,ge="./logos/send-svgrepo-com.svg")||w(pe,"src","./logos/send-svgrepo-com.svg"),w(pe,"alt","Send"),w(pe,"class","action-icon"),w(ue,"class","action-button centered column"),ue.disabled=e[21],w(ee,"id","chatbot-input"),w(ee,"class","row spaced centered svelte-138fhn9"),w(L,"id","chatbot-actions"),w(L,"class","column padded spaced centered svelte-138fhn9")},m(o,r){d(o,t,r),l(t,n),l(t,s);for(let e=0;e<ve.length;e+=1)ve[e]&&ve[e].m(t,null);l(t,i),l(t,c),l(c,a),l(c,f),Y(h,c,null),l(t,$),l(t,F),d(o,S,r),d(o,L,r),l(L,j),l(j,N),l(N,O),l(N,E),$e.m(N,null),l(j,A),l(j,R),l(R,q),l(R,H),l(R,D),l(R,U),l(R,I),l(j,Q),l(j,K),Se.m(K,null),l(L,Z),l(L,ee),l(ee,te),l(te,ne),l(te,oe),l(te,se),e[82](se),l(te,ie),l(te,ce),l(ee,re),l(ee,le),y(le,e[11]),l(ee,de),l(ee,ue),l(ue,pe),fe=!0,me||(he=[b(D,"click",v(e[78])),b(I,"click",v(e[79])),b(se,"change",e[81]),b(se,"change",e[83]),b(ce,"click",v(e[84])),b(le,"input",e[85]),b(le,"keydown",e[86]),b(ue,"click",v(e[87]))],me=!0)},p(e,n){if(8220&n[0]|4096&n[1]){let o;for(be=e[2],o=0;o<be.length;o+=1){const s=We(e,be,o);ve[o]?ve[o].p(s,n):(ve[o]=Kt(s),ve[o].c(),ve[o].m(t,i))}for(;o<ve.length;o+=1)ve[o].d(1);ve.length=be.length}const o={};!k&&8388608&n[0]&&(k=!0,o.progress=e[23],P((()=>k=!1))),!x&&4194304&n[0]&&(x=!0,o.status=e[22],P((()=>x=!1))),h.$set(o),(!fe||2097152&n[0])&&T(c,"invisible",!1===e[21]),xe===(xe=_e(e))&&$e?$e.p(e,n):($e.d(1),$e=xe(e),$e&&($e.c(),$e.m(N,null))),(!fe||131072&n[0]&&M!==(M=e[17]?"width:30%;":"width:45%;"))&&w(N,"style",M),(!fe||131072&n[0]&&J!==(J=e[17]?"width:30%;":"width:45%;"))&&w(R,"style",J),Fe===(Fe=Te(e))&&Se?Se.p(e,n):(Se.d(1),Se=Fe(e),Se&&(Se.c(),Se.m(K,null))),(!fe||131072&n[0]&&X!==(X=e[17]?"width:30%;":"display:none;"))&&w(K,"style",X),2048&n[0]&&y(le,e[11]),(!fe||2097152&n[0])&&(ue.disabled=e[21])},i(e){fe||(G(h.$$.fragment,e),fe=!0)},o(e){V(h.$$.fragment,e),fe=!1},d(n){n&&u(t),p(ve,n),W(h),n&&u(S),n&&u(L),$e.d(),Se.d(),e[82](null),me=!1,o(he)}}}function It(t){let n,o,s=t[121]+"";return{c(){n=g("option"),o=f(s),n.__value=t[121],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Jt(t){let n;return{c(){n=g("span"),n.textContent="No resources available."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Gt(e){let t,n=e[1],o=[];for(let t=0;t<n.length;t+=1)o[t]=Vt(Be(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=h()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(117440514&s[0]|1024&s[1]){let i;for(n=e[1],i=0;i<n.length;i+=1){const c=Be(e,n,i);o[i]?o[i].p(c,s):(o[i]=Vt(c),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Vt(e){let t,n,o,s,i,c,a,p,h,y=e[119]+"";function _(){return e[93](e[119],e[115])}return{c(){t=g("div"),n=f(y),o=m(),s=g("button"),i=g("img"),a=m(),r(i.src,c="./logos/delete-x-svgrepo-com.svg")||w(i,"src","./logos/delete-x-svgrepo-com.svg"),w(i,"alt","Remove document"),w(i,"class","mini-icon"),s.disabled=e[26],w(s,"class","action-button"),w(t,"class","row centered spaced bordered centered")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,s),l(s,i),l(t,a),p||(h=b(s,"click",v(_)),p=!0)},p(t,o){e=t,2&o[0]&&y!==(y=e[119]+"")&&k(n,y),67108864&o[0]&&(s.disabled=e[26])},d(e){e&&u(t),p=!1,h()}}}function zt(e){let t,n,s,i,c,a,r,p,h,v,y,_,x,$,T,F,S,L,C,j,N,O,E,M=e[116].role+"",P=e[116].content+"",A="context"in e[116]&&Bt(e),R="image"in e[116]&&Yt(e);function q(){return e[72](e[116])}let H="context"in e[116]&&Wt(e);function D(){return e[74](e[116])}let U="image"in e[116]&&"user"===e[116].role&&Qt(e);return{c(){t=g("div"),n=g("div"),s=g("div"),A&&A.c(),i=m(),R&&R.c(),c=m(),a=g("div"),r=g("button"),r.innerHTML='<small>Add to My Notes</small> \n                                                        <img src="./logos/note-svgrepo-com.svg" alt="Add to my notes" class="mini-icon"/>',p=m(),H&&H.c(),h=m(),v=g("button"),v.innerHTML='<img src="./logos/copy-svgrepo-com.svg" alt="Copy note" class="mini-icon"/>',_=m(),x=g("div"),$=g("strong"),T=f(M),F=f(":"),S=m(),L=g("md-block"),C=f(P),j=m(),U&&U.c(),w(s,"class","row spaced"),w(r,"class","action-button row spaced centered"),w(v,"class","action-button column centered"),w(a,"class","row spaced"),w(n,"class",y="message-header row "+("context"in e[116]||"image"in e[116]?"with-context":"no-context")+" svelte-138fhn9"),w(x,"class","row"),w(t,"class",N=e[116].role+" padded column spaced svelte-138fhn9")},m(e,o){d(e,t,o),l(t,n),l(n,s),A&&A.m(s,null),l(s,i),R&&R.m(s,null),l(n,c),l(n,a),l(a,r),l(a,p),H&&H.m(a,null),l(a,h),l(a,v),l(t,_),l(t,x),l(x,$),l($,T),l($,F),l(x,S),l(x,L),l(L,C),l(t,j),U&&U.m(t,null),O||(E=[b(r,"click",q),b(v,"click",D)],O=!0)},p(o,c){"context"in(e=o)[116]?A?A.p(e,c):(A=Bt(e),A.c(),A.m(s,i)):A&&(A.d(1),A=null),"image"in e[116]?R?R.p(e,c):(R=Yt(e),R.c(),R.m(s,null)):R&&(R.d(1),R=null),"context"in e[116]?H?H.p(e,c):(H=Wt(e),H.c(),H.m(a,h)):H&&(H.d(1),H=null),4&c[0]&&y!==(y="message-header row "+("context"in e[116]||"image"in e[116]?"with-context":"no-context")+" svelte-138fhn9")&&w(n,"class",y),4&c[0]&&M!==(M=e[116].role+"")&&k(T,M),4&c[0]&&P!==(P=e[116].content+"")&&k(C,P),"image"in e[116]&&"user"===e[116].role?U?U.p(e,c):(U=Qt(e),U.c(),U.m(t,null)):U&&(U.d(1),U=null),4&c[0]&&N!==(N=e[116].role+" padded column spaced svelte-138fhn9")&&w(t,"class",N)},d(e){e&&u(t),A&&A.d(),R&&R.d(),H&&H.d(),U&&U.d(),O=!1,o(E)}}}function Bt(e){let t,n,o,s,i,c,a=e[116].context.id+"",r=(e[116].context.quote.length>40?e[116].context.quote.slice(0,40)+"...":e[116].context.quote)+"";return{c(){t=g("div"),n=g("small"),o=f("Context: F#"),s=f(a),i=m(),c=f(r),w(t,"class","context-tag feedback svelte-138fhn9")},m(e,a){d(e,t,a),l(t,n),l(n,o),l(n,s),l(n,i),l(n,c)},p(e,t){4&t[0]&&a!==(a=e[116].context.id+"")&&k(s,a),4&t[0]&&r!==(r=(e[116].context.quote.length>40?e[116].context.quote.slice(0,40)+"...":e[116].context.quote)+"")&&k(c,r)},d(e){e&&u(t)}}}function Yt(e){let t,n,o,s="user"===e[116].role?"Attached image":"Response to image";return{c(){t=g("div"),n=g("small"),o=f(s),w(t,"class","context-tag image svelte-138fhn9")},m(e,s){d(e,t,s),l(t,n),l(n,o)},p(e,t){4&t[0]&&s!==(s="user"===e[116].role?"Attached image":"Response to image")&&k(o,s)},d(e){e&&u(t)}}}function Wt(e){let t,n,o,s,i,c,a,p,h,v,y=e[116].context.id+"";function _(){return e[73](e[116])}return{c(){t=g("button"),n=g("small"),o=f("Add to F#"),s=f(y),i=f(" Notes"),c=m(),a=g("img"),r(a.src,p="./logos/note-svgrepo-com.svg")||w(a,"src","./logos/note-svgrepo-com.svg"),w(a,"alt","Add feedback note"),w(a,"class","mini-icon"),w(t,"class","action-button row spaced centered")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(n,s),l(n,i),l(t,c),l(t,a),h||(v=b(t,"click",_),h=!0)},p(t,n){e=t,4&n[0]&&y!==(y=e[116].context.id+"")&&k(s,y)},d(e){e&&u(t),h=!1,v()}}}function Qt(e){let t,n,o;return{c(){t=g("div"),n=g("img"),r(n.src,o=e[116].image)||w(n,"src",o),w(n,"alt","Visual context"),_(n,"width","50%"),_(n,"height","auto"),w(t,"class","column centered"),_(t,"width","100%")},m(e,o){d(e,t,o),l(t,n)},p(e,t){4&t[0]&&!r(n.src,o=e[116].image)&&w(n,"src",o)},d(e){e&&u(t)}}}function Kt(e){let t,n="system"!=e[116].role&&zt(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"system"!=e[116].role?n?n.p(e,o):(n=zt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function Xt(t){let n;return{c(){n=g("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Zt(e){let t,n,o,s,i,c,a,r,p,h,y,_=e[15].id+"",x=e[15].quote.slice(0,30)+"";return{c(){t=g("div"),n=g("span"),o=f("F#"),s=f(_),i=f(":"),c=f(x),a=f("..."),r=m(),p=g("button"),p.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon"/>',w(t,"class","suggested-message row  svelte-138fhn9")},m(u,g){d(u,t,g),l(t,n),l(n,o),l(n,s),l(n,i),l(n,c),l(n,a),l(t,r),l(t,p),h||(y=b(p,"click",v(e[77])),h=!0)},p(e,t){32768&t[0]&&_!==(_=e[15].id+"")&&k(s,_),32768&t[0]&&x!==(x=e[15].quote.slice(0,30)+"")&&k(c,x)},d(e){e&&u(t),h=!1,y()}}}function en(t){return{c:e,m:e,p:e,d:e}}function tn(e){let t,n,o,s,i,c,a,p,f;return{c(){t=g("span"),t.innerHTML="<strong>Attached image:</strong>",n=m(),o=g("div"),s=g("img"),c=m(),a=g("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove image" class="mini-icon"/>',r(s.src,i=e[17])||w(s,"src",i),w(s,"alt","Visual context"),_(s,"width","100%"),_(s,"height","100%"),w(o,"class","row"),_(o,"width","100%"),_(o,"height","100%")},m(i,r){d(i,t,r),d(i,n,r),d(i,o,r),l(o,s),l(o,c),l(o,a),p||(f=b(a,"click",v(e[80])),p=!0)},p(e,t){131072&t[0]&&!r(s.src,i=e[17])&&w(s,"src",i)},d(e){e&&u(t),e&&u(n),e&&u(o),p=!1,f()}}}function nn(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[67](n)},p:e,d(e){e&&u(n),t[67](null)}}}function on(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[5].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[66](t)},p(e,o){32&o[0]&&!r(t.src,n=e[5].audio)&&w(t,"src",n)},d(n){n&&u(t),e[66](null)}}}function sn(e){let t,n,o,s;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[5].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[65](t)},p(e,n){32&n[0]&&!r(t.src,s=e[5].video)&&w(t,"src",s)},d(n){n&&u(t),e[65](null)}}}function cn(e){let t,n=e[5].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=an(Ke(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(1056&s[0]){let i;for(n=e[5].transcript_list,i=0;i<n.length;i+=1){const c=Ke(e,n,i);o[i]?o[i].p(c,s):(o[i]=an(c),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function an(e){let t,n,s,i,c,a,r,p,h,v,y,_,x,$,T,F,S,L,C,j,N,O=e[113].start_timestamp+"",E=e[113].end_timestamp+"",M=e[113].speaker?e[113].speaker+":":"",P=e[113].dialogue+"";function A(){return e[68](e[113])}function R(){return e[69](e[113])}return{c(){t=g("span"),n=f("["),s=f(O),i=f("]"),c=f(" - "),a=g("span"),r=f("["),p=f(E),h=f("]"),v=m(),y=g("br"),_=m(),x=f(M),$=m(),T=g("span"),S=m(),L=g("br"),C=g("br"),w(t,"class","timestamp svelte-138fhn9"),w(a,"class","timestamp svelte-138fhn9"),w(T,"id",F=e[113].id),w(T,"class","svelte-138fhn9")},m(e,o){d(e,t,o),l(t,n),l(t,s),l(t,i),d(e,c,o),d(e,a,o),l(a,r),l(a,p),l(a,h),d(e,v,o),d(e,y,o),d(e,_,o),d(e,x,o),d(e,$,o),d(e,T,o),T.innerHTML=P,d(e,S,o),d(e,L,o),d(e,C,o),j||(N=[b(t,"click",A),b(a,"click",R)],j=!0)},p(t,n){e=t,32&n[0]&&O!==(O=e[113].start_timestamp+"")&&k(s,O),32&n[0]&&E!==(E=e[113].end_timestamp+"")&&k(p,E),32&n[0]&&M!==(M=e[113].speaker?e[113].speaker+":":"")&&k(x,M),32&n[0]&&P!==(P=e[113].dialogue+"")&&(T.innerHTML=P),32&n[0]&&F!==(F=e[113].id)&&w(T,"id",F)},d(e){e&&u(t),e&&u(c),e&&u(a),e&&u(v),e&&u(y),e&&u(_),e&&u(x),e&&u($),e&&u(T),e&&u(S),e&&u(L),e&&u(C),j=!1,o(N)}}}function rn(e){let t,n,o,s,i,c,a,r,f,h,v,k,y,x,$,T,F,S=e[32],L=[];for(let t=0;t<S.length;t+=1)L[t]=nt(tt(e,S,t));function C(e,t){return 0===e[14]?st:1===e[14]?ot:void 0}let j=C(e),N=j&&j(e),O=e[33],E=[];for(let t=0;t<O.length;t+=1)E[t]=$t(Xe(e,O,t));const M=[St,Ft,Tt],P=[];function A(e,t){return 0===e[13]?0:1===e[13]?1:2===e[13]?2:-1}return~(y=A(e))&&(x=P[y]=M[y](e)),{c(){t=g("div"),n=g("div"),o=g("div"),s=g("div");for(let e=0;e<L.length;e+=1)L[e].c();i=m(),c=g("div"),N&&N.c(),a=m(),r=g("div"),f=g("div"),h=g("div");for(let e=0;e<E.length;e+=1)E[e].c();v=m(),k=g("div"),x&&x.c(),w(s,"class","tab-header svelte-138fhn9"),w(c,"class","tab-content padded svelte-138fhn9"),_(c,"overflow-y","auto"),w(o,"class","tabbed-area bordered svelte-138fhn9"),w(n,"id","left-panel"),w(n,"class","column svelte-138fhn9"),w(h,"class","tab-header svelte-138fhn9"),w(k,"class","tab-content column svelte-138fhn9"),w(f,"class","tabbed-area bordered svelte-138fhn9"),w(r,"id","right-panel"),w(r,"class","column  svelte-138fhn9"),w(t,"id","feedback-list-page"),w(t,"class","spaced svelte-138fhn9")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(o,s);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(s,null);l(o,i),l(o,c),N&&N.m(c,null),l(t,a),l(t,r),l(r,f),l(f,h);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(h,null);l(f,v),l(f,k),~y&&P[y].m(k,null),$=!0,T||(F=b(t,"window:click",e[36]),T=!0)},p(e,t){if(16384&t[0]|2&t[1]){let n;for(S=e[32],n=0;n<S.length;n+=1){const o=tt(e,S,n);L[n]?L[n].p(o,t):(L[n]=nt(o),L[n].c(),L[n].m(s,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=S.length}if(j===(j=C(e))&&N?N.p(e,t):(N&&N.d(1),N=j&&j(e),N&&(N.c(),N.m(c,null))),8192&t[0]|4&t[1]){let n;for(O=e[33],n=0;n<O.length;n+=1){const o=Xe(e,O,n);E[n]?E[n].p(o,t):(E[n]=$t(o),E[n].c(),E[n].m(h,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=O.length}let n=y;y=A(e),y===n?~y&&P[y].p(e,t):(x&&(I(),V(P[n],1,1,(()=>{P[n]=null})),J()),~y?(x=P[y],x?x.p(e,t):(x=P[y]=M[y](e),x.c()),G(x,1),x.m(k,null)):x=null)},i(e){$||(G(x),$=!0)},o(e){V(x),$=!1},d(e){e&&u(t),p(L,e),N&&N.d(),p(E,e),~y&&P[y].d(),T=!1,F()}}}function ln(e,t=!0){e.show_paraphrased=t}const dn=(e,t)=>e-t;function un(e,t,n){let o,s,i,c,a,r,l,d,{feedback_list:u}=t,{recording:p}=t,{documents:g=[]}=t,{chatbot_messages:f=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]}=t,{my_notes:m=[]}=t,{feedback_notes:h={}}=t,b=!1,v={"GPT-4o":"gpt-4o","GPT-4o Mini":"gpt-4o-mini","Interior Designer GPT":"ft:gpt-3.5-turbo-0125:im-lab:int-des-full:9b2qf12W"},w="GPT-4o Mini",k=0,y=256,_="",x=0,T=0,F=["Critical Feedback","Positive Feedback"],S=["Transcript","Chatbot","Notes"],L=!1,j="",N=0,O="",E=0,M=!1;function P(e){s===e&&n(12,s=null),n(0,u=u.filter((t=>t!==e))),n(0,u)}function A(e,t){n(12,s=e),t.stopPropagation()}let R=null,q=!0;function H(e){R===e?n(28,q=!q):(n(27,R=e),n(28,q=!0)),u.sort(((t,n)=>t[e]<n[e]?q?-1:1:t[e]>n[e]?q?1:-1:0)),n(0,u)}async function D(e,t=null){let o=e.slice();if(L)return void alert("Please wait for the current message to be processed.");if(n(21,L=!0),""===e.trim())return void alert("Please enter a message.");let s={role:"user",content:e};if(t){s.context=t;let e="\n\nHere is the piece of feedback as context.";e+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',o+=e}let i={message:o,image_data:null,max_output_tokens:y,temperature:k,model:v[w]};if(a&&(s.image=a),c){n(22,j="Uploading image..."),n(23,N=30);let e=await async function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)}))}(c);i.image_data=e}f.push(s),n(2,f),console.log(f),n(0,u),await de(f),n(22,j="Thinking..."),n(23,N=50);const r=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!r.ok)throw new Error("Failed to send message");let l=(await r.json()).chatbot_response;n(22,j="Done!"),n(23,N=100),await Z(1200),await te("FeedbackList: Sent message",[e,t,a]);let d={role:"assistant",content:l};t&&(d.context=t),a&&(d.image=a),f.push(d),n(2,f),n(0,u),await de(f),n(21,L=!1),n(23,N=0)}function U(e){i===e?alert("This feedback is already added as context."):n(15,i=e)}async function I(e){const t=e.target.files;if(t)for(const e of t){const t=new FormData;t.append("file",e),n(25,E=50),n(24,O="Adding document... (this may take a while)");const o=await fetch("/add_document",{method:"POST",body:t});if(!o.ok)return null;let s=(await o.json()).document_name;g.push(s),n(1,g),n(24,O="Done!"),n(25,E=100),await Z(1200)}}async function J(e,t){return(await fetch("/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})).ok?(g.splice(t,1),n(1,g),e):console.log(`Failed to delete document ${e}`)}async function G(){n(24,O="Removing all documents...");for(let e=0;e<g.length;e++){let t=g[e];n(25,E=e/g.length*100);try{await J(t,e)}catch(e){console.error(`Error deleting document ${t}:`,e)}}1===g.length&&await J(g[0],0),n(24,O="Done!"),n(25,E=100),await Z(1e3),n(25,E=0)}let V=!1,z="";async function B(e,t=null,o=null){""!=e.trim()?t?t in h?(h[t].notes.push(e),n(4,h)):n(4,h[t]={notes:[e],is_adding:!1},h):(m.push(e),n(3,m)):alert("Please enter a note.")}async function Y(e,t=null){t?(h[t].notes.splice(e,1),n(4,h)):(m.splice(e,1),n(3,m))}async function W(e=null){n(29,V=!1),B(z,e),n(30,z="")}return e.$$set=e=>{"feedback_list"in e&&n(0,u=e.feedback_list),"recording"in e&&n(5,p=e.recording),"documents"in e&&n(1,g=e.documents),"chatbot_messages"in e&&n(2,f=e.chatbot_messages),"my_notes"in e&&n(3,m=e.my_notes),"feedback_notes"in e&&n(4,h=e.feedback_notes)},[u,g,f,m,h,p,b,w,k,y,o,_,s,x,T,i,c,a,r,l,d,L,j,N,O,E,M,R,q,V,z,v,F,S,P,A,function(){n(12,s=null)},H,D,U,I,J,G,B,Y,W,async e=>{n(14,T=e),await te("FeedbackList: Switched left panel tab",F[T])},async()=>{H("quote"),await te("FeedbackList: Sorted feedback","quote")},async()=>{H("speaker"),await te("FeedbackList: Sorted feedback","speaker")},async()=>{H("done"),await te("FeedbackList: Sorted feedback","done")},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{ln(e,!1),await te("FeedbackList: Show original quote",e.original_quote)},async e=>{ln(e,!0),await te("FeedbackList: Show paraphrased quote",e.positivised_quote)},async(e,t,o)=>{n(0,t[o].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),u),ln(e,!0),n(0,u),await te("FeedbackList: Positivize Quote",e)},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in h?n(4,h[e.id].is_adding=!0,h):n(4,h[e.id]={notes:[],is_adding:!0},h)},async e=>{window.confirm("Are you sure you want to delete this feedback? This cannot be undone.")&&(P(e),await le(u),await te("FeedbackList: Remove critical feedback",e))},function(e,t){e[t].done=this.checked,n(0,u)},async(e,t)=>{A(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in h?n(4,h[e.id].is_adding=!0,h):n(4,h[e.id]={notes:[],is_adding:!0},h)},async e=>{P(e),await le(u),await te("FeedbackList: Remove positive feedback",e)},async(e,t)=>{A(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=e),await te("FeedbackList: Switched right panel tab",S[x])},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},async e=>{ne(e.start_timestamp,o),await te("FeedbackList: Seek to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackList: Seek to end timestamp",e.end_timestamp)},function(){w=$(this),n(7,w),n(31,v)},async()=>{n(6,b=!b),await te("FeedbackList: Toggled chatbot settings",b)},async e=>{n(13,x=2),B(e.role+": "+e.content),await ue(m),await te("FeedbackList: Added note to My Notes",e)},async e=>{n(13,x=2),B(e.role+": "+e.content,"id"in e.context?e.context.id:null),await pe(h),await te("FeedbackList: Added note to Feedback ID"+e.context.id,e)},async e=>{se(e.role+": "+e.content),await te("FeedbackList: Copied message",e)},function(e){N=e,n(23,N)},function(e){j=e,n(22,j)},async()=>{await te("FeedbackList: Removed context",i),n(15,i=null)},async()=>{L||await D("Can you paraphrase the following feedback positively?",i)},async()=>{L||await D("Can you brainstorm a set of actions to address the following feedback?",i)},async()=>{await te("FeedbackList: Removed image",a),n(17,a=null),n(16,c=null)},function(){r=this.value,n(18,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(19,l)}))},async()=>{n(18,r=l.files),n(17,[a,c]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return[URL.createObjectURL(t),t];alert("Please select an image file.")}else console.log("No image selected.");return null}(r),a,n(16,c)),await te(a?"FeedbackList: Uploaded image":"FeedbackList: Canceled uploading image",a)},async()=>{l.click()},function(){_=this.value,n(11,_)},e=>"Enter"===e.key&&D(_,i),async()=>{await D(_,i),n(11,_="")},function(){w=$(this),n(7,w),n(31,v)},function(e){k=e,n(8,k)},function(e){y=e,n(9,y)},function(e){E=e,n(25,E)},function(e){O=e,n(24,O)},async(e,t)=>{if(!window.confirm("Are you sure you want to delete this document? This cannot be undone."))return;n(26,M=!0),n(25,E=50),n(24,O="Removing document...");let o=await J(e,t);n(24,O="Done!"),n(25,E=100),n(26,M=!1),te("FeedbackList: Removed document",o)},function(e){C[e?"unshift":"push"]((()=>{d=e,n(20,d)}))},async e=>{n(26,M=!0),await I(e),n(26,M=!1),await te("FeedbackList: Added document",e.target.files)},async()=>{window.confirm("Adding a new document will take a long time, since its information will be extracted. Do you want to proceed?")&&(document.getElementById("document_file_input").click(),await te("FeedbackList: Added document","Document"))},async()=>{window.confirm("Are you sure you want to remove all documents? This cannot be undone.")&&(n(26,M=!0),await G(),n(26,M=!1),await te("FeedbackList: Removed all documents",g))},async(e,t)=>{Y(e),await ue(m),await te("FeedbackList: Removed note",t)},function(){z=this.value,n(30,z)},async()=>{W(),n(29,V=!1),await ue(m),await te("FeedbackList: Added note to My Notes",z)},async()=>{n(29,V=!1),n(30,z=""),await te("FeedbackList: Cancelled adding note to My Notes",z)},async()=>{n(29,V=!0),await te("FeedbackList: Clicked on My Notes' Add Note button",V)},async()=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(3,m=[]),n(3,m),await ue(m),await te("FeedbackList: Removed all notes from My Notes",m))},async e=>{let t="Are you sure you want to delete this feedback notes section? This cannot be undone";h[e].notes.length>0&&(t="Are you sure you want to delete this feedback notes section? This will delete all notes and cannot be undone."),window.confirm(t)&&(delete h[e],n(4,h),await pe(h),await te("FeedbackList: Removed feedback notes section","Feedback ID"+e))},async(e,t,n)=>{Y(e,t),await pe(h),await te("FeedbackList: Removed note from Feedback ID"+t,n)},function(){z=this.value,n(30,z)},async e=>{W(e),n(4,h[e].is_adding=!1,h),await pe(h),await te("FeedbackList: Added note to Feedback ID"+e,z)},async e=>{n(4,h[e].is_adding=!1,h),await te("FeedbackList: Cancelled adding note to Feedback ID"+e,z),n(30,z="")},async e=>{n(4,h[e].is_adding=!0,h),await te("FeedbackList: Clicked on Feedback ID"+e+"'s Add Note button",h[e].is_adding)},async e=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(4,h[e].notes=[],h),n(4,h),await pe(h),await te("FeedbackList: Removed all notes from Feedback ID"+e,h[e].notes))}]}class pn extends X{constructor(e){super(),K(this,e,un,rn,i,{feedback_list:0,recording:5,documents:1,chatbot_messages:2,my_notes:3,feedback_notes:4},null,[-1,-1,-1,-1,-1])}}function gn(e){let t,n,o,s,i;function c(t){e[15](t)}function a(t){e[16](t)}let r={};return void 0!==e[2]&&(r.recording=e[2]),void 0!==e[3]&&(r.feedback_list=e[3]),n=new De({props:r}),C.push((()=>z(n,"recording",c))),C.push((()=>z(n,"feedback_list",a))),{c(){t=g("div"),B(n.$$.fragment),_(t,"width","100%"),_(t,"height","100%"),T(t,"gone",1!=e[0])},m(e,o){d(e,t,o),Y(n,t,null),i=!0},p(e,c){const a={};!o&&4&c&&(o=!0,a.recording=e[2],P((()=>o=!1))),!s&&8&c&&(s=!0,a.feedback_list=e[3],P((()=>s=!1))),n.$set(a),(!i||1&c)&&T(t,"gone",1!=e[0])},i(e){i||(G(n.$$.fragment,e),i=!0)},o(e){V(n.$$.fragment,e),i=!1},d(e){e&&u(t),W(n)}}}function fn(e){let t,n,s,i,c,a,p,h,v,x,$,F,S,L,j,N,O,E,M,A,R,q,H,D,U,Q,K,X,Z,ee,te,ne,oe,se,ie,ce,ae,re,le,de,ue,pe,ge,fe,me,he=1===e[0]&&gn(e);function be(t){e[17](t)}function ve(t){e[18](t)}function we(t){e[19](t)}function ke(t){e[20](t)}function ye(t){e[21](t)}function _e(t){e[22](t)}let xe={};return void 0!==e[5]&&(xe.chatbot_messages=e[5]),void 0!==e[4]&&(xe.documents=e[4]),void 0!==e[3]&&(xe.feedback_list=e[3]),void 0!==e[2]&&(xe.recording=e[2]),void 0!==e[6]&&(xe.my_notes=e[6]),void 0!==e[7]&&(xe.feedback_notes=e[7]),H=new pn({props:xe}),C.push((()=>z(H,"chatbot_messages",be))),C.push((()=>z(H,"documents",ve))),C.push((()=>z(H,"feedback_list",we))),C.push((()=>z(H,"recording",ke))),C.push((()=>z(H,"my_notes",ye))),C.push((()=>z(H,"feedback_notes",_e))),{c(){t=g("main"),n=g("div"),s=g("h5"),i=f("Welcome, "),c=f(e[1]),a=m(),p=g("button"),p.textContent="Logout",h=m(),v=g("div"),x=g("div"),$=g("div"),F=g("label"),F.textContent="Enter your username",S=m(),L=g("input"),j=m(),N=g("div"),O=g("button"),O.textContent="Register",E=m(),M=g("button"),M.textContent="Login",A=m(),he&&he.c(),R=m(),q=g("div"),B(H.$$.fragment),ee=m(),te=g("div"),ne=g("button"),oe=g("img"),ie=f("\n                Select Feedback"),ae=m(),re=g("button"),le=f("View Feedback List\n                "),de=g("img"),w(p,"class","row mini-padded svelte-lde6tu"),w(n,"class","header spaced bordered row padded svelte-lde6tu"),T(n,"gone",0==e[0]),w(F,"for","username"),w(L,"type","text"),w(L,"name","username"),w(L,"id","username"),w(O,"class","svelte-lde6tu"),w(M,"class","svelte-lde6tu"),w(N,"class","row"),w($,"class","column centered spaced"),_($,"width","75%"),_($,"height","75%"),w(x,"class","centered spaced"),_(x,"width","100%"),_(x,"height","100%"),T(x,"gone",0!=e[0]),_(q,"width","100%"),_(q,"height","100%"),T(q,"gone",2!=e[0]),w(v,"class","carousel-container svelte-lde6tu"),r(oe.src,se="./logos/move-to-the-prev-page-symbol-svgrepo-com.svg")||w(oe,"src","./logos/move-to-the-prev-page-symbol-svgrepo-com.svg"),w(oe,"alt","Previous page"),w(oe,"class","mini-icon"),w(ne,"class","action-button row centered svelte-lde6tu"),ne.disabled=ce=0===e[0],T(ne,"invisible",2!=e[0]||0==e[0]),r(de.src,ue="./logos/move-to-the-next-page-symbol-svgrepo-com.svg")||w(de,"src","./logos/move-to-the-next-page-symbol-svgrepo-com.svg"),w(de,"alt","Next page"),w(de,"class","mini-icon"),w(re,"class","action-button row centered svelte-lde6tu"),re.disabled=pe=e[0]===mn.length-1||e[3].length<=0,T(re,"invisible",1!=e[0]||0==e[0]),w(te,"class","navigation centered spaced bordered row svelte-lde6tu")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,c),l(n,a),l(n,p),l(t,h),l(t,v),l(v,x),l(x,$),l($,F),l($,S),l($,L),y(L,e[1]),l($,j),l($,N),l(N,O),l(N,E),l(N,M),l(v,A),he&&he.m(v,null),l(v,R),l(v,q),Y(H,q,null),l(t,ee),l(t,te),l(te,ne),l(ne,oe),l(ne,ie),l(te,ae),l(te,re),l(re,le),l(re,de),ge=!0,fe||(me=[b(p,"click",e[11]),b(L,"input",e[12]),b(O,"click",e[13]),b(M,"click",e[14]),b(ne,"click",e[23]),b(re,"click",e[24])],fe=!0)},p(e,[t]){(!ge||2&t)&&k(c,e[1]),(!ge||1&t)&&T(n,"gone",0==e[0]),2&t&&L.value!==e[1]&&y(L,e[1]),(!ge||1&t)&&T(x,"gone",0!=e[0]),1===e[0]?he?(he.p(e,t),1&t&&G(he,1)):(he=gn(e),he.c(),G(he,1),he.m(v,R)):he&&(I(),V(he,1,1,(()=>{he=null})),J());const o={};!D&&32&t&&(D=!0,o.chatbot_messages=e[5],P((()=>D=!1))),!U&&16&t&&(U=!0,o.documents=e[4],P((()=>U=!1))),!Q&&8&t&&(Q=!0,o.feedback_list=e[3],P((()=>Q=!1))),!K&&4&t&&(K=!0,o.recording=e[2],P((()=>K=!1))),!X&&64&t&&(X=!0,o.my_notes=e[6],P((()=>X=!1))),!Z&&128&t&&(Z=!0,o.feedback_notes=e[7],P((()=>Z=!1))),H.$set(o),(!ge||1&t)&&T(q,"gone",2!=e[0]),(!ge||1&t&&ce!==(ce=0===e[0]))&&(ne.disabled=ce),(!ge||1&t)&&T(ne,"invisible",2!=e[0]||0==e[0]),(!ge||9&t&&pe!==(pe=e[0]===mn.length-1||e[3].length<=0))&&(re.disabled=pe),(!ge||1&t)&&T(re,"invisible",1!=e[0]||0==e[0])},i(e){ge||(G(he),G(H.$$.fragment,e),ge=!0)},o(e){V(he),V(H.$$.fragment,e),ge=!1},d(e){e&&u(t),he&&he.d(),W(H),fe=!1,o(me)}}}let mn=3;function hn(e,t,n){let o=0,s="",i="",c={},a=[],r=[],l=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}],d=[],u={};async function p(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(alert(t.message),i=t.user_id,ee("username",s,30),ee("user_id",i,30),n(4,r=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),n(0,o=1)):alert(t.message)}async function g(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(alert(t.message),i=t.user_id,ee("username",s,30),ee("user_id",i,30),await async function(e){if(n(4,r=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),Object.keys(c).length<=0){let e=await fetch("/get_recording",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();if(n(2,c=t.recording),console.log(c),"video_path"in c&&null!=c.video_path){const e=await fetch("/fetch_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:c.video_path})});if(!e.ok)throw new Error("Failed to fetch video");const t=await e.blob();n(2,c.video=URL.createObjectURL(t),c)}if("audio_path"in c&&null!=c.audio_path){const e=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:c.audio_path})});if(!e.ok)throw new Error("Failed to fetch audio");const t=await e.blob();n(2,c.audio=URL.createObjectURL(t),c)}const o=await fetch("/get_feedback_list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch feedback list");const s=await o.json();n(3,a=s.feedback_list);const i=await fetch("/get_display_chatbot_messages",{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch chatbot messages");const r=await i.json();n(5,l=r.display_chatbot_messages);const p=await fetch("/get_my_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!p.ok)throw new Error("Failed to fetch my notes");const g=await p.json();n(6,d=g.my_notes);const f=await fetch("/get_feedback_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!f.ok)throw new Error("Failed to fetch feedback notes");const m=await f.json();n(7,u=m.feedback_notes)}}(),n(0,o=1)):alert(t.message)}function f(){ee("username","",0),ee("user_id","",0),n(1,s=""),i="",n(4,r=[]),n(3,a=[]),n(5,l=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]),n(0,o=0)}S((async()=>{}));return[o,s,c,a,r,l,d,u,p,g,f,()=>f(),function(){s=this.value,n(1,s)},async()=>{await p()},async()=>{await g()},function(e){c=e,n(2,c)},function(e){a=e,n(3,a)},function(e){l=e,n(5,l)},function(e){r=e,n(4,r)},function(e){a=e,n(3,a)},function(e){c=e,n(2,c)},function(e){d=e,n(6,d)},function(e){u=e,n(7,u)},()=>{n(0,o=1)},()=>{n(0,o=2)}]}return new class extends X{constructor(e){super(),K(this,e,hn,fn,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
