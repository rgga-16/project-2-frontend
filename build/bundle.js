var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,c;function r(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function f(){return m("")}function v(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function _(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function T(e){const t=e.querySelector(":checked");return t&&t.__value}function F(e,t,n){e.classList[n?"add":"remove"](t)}function $(e){c=e}function S(e){(function(){if(!c)throw new Error("Function called outside component initialization");return c})().$$.on_mount.push(e)}const L=[],C=[];let j=[];const N=[],O=Promise.resolve();let E=!1;function P(e){j.push(e)}function R(e){N.push(e)}const M=new Set;let A=0;function D(){if(0!==A)return;const e=c;do{try{for(;A<L.length;){const e=L[A];A++,$(e),H(e.$$)}}catch(e){throw L.length=0,A=0,e}for($(null),L.length=0,A=0;C.length;)C.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];M.has(t)||(M.add(t),t())}j.length=0}while(L.length);for(;N.length;)N.pop()();E=!1,M.clear(),$(e)}function H(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const q=new Set;let U;function I(){U={r:0,c:[],p:U}}function z(){U.r||o(U.c),U=U.p}function J(e,t){e&&e.i&&(q.delete(e),e.i(t))}function G(e,t,n,o){if(e&&e.o){if(q.has(e))return;q.add(e),U.c.push((()=>{q.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function V(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function B(e){e&&e.c()}function Y(e,n,i,a){const{fragment:c,after_update:r}=e.$$;c&&c.m(n,i),a||P((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),r.forEach(P)}function W(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];j.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),j=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(L.push(e),E||(E=!0,O.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(t,s,i,a,r,l,d,p=[-1]){const g=c;$(t);const m=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(g?g.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||g.$$.root};d&&d(m.root);let h=!1;if(m.ctx=i?i(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),h&&Q(t,e)),n})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!a&&a(m.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();s.intro&&J(t.$$.fragment),Y(t,s.target,s.anchor,s.customElement),D()}$(g)}class K{$destroy(){W(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function Z(e){return new Promise((t=>setTimeout(t,e)))}function ee(e,t,n){var o="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}async function te(e,t){const n=await fetch("/log_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:t})});if(!n.ok)throw new Error("Failed to log action");const o=await n.json();console.log(o.message)}function ne(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function oe(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function se(e){!function(e){try{return navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const o=document.getSelection(),s=o?o.rangeCount>0&&o.getRangeAt(0):null;document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length,document.execCommand("copy"),document.body.removeChild(t),s&&o&&(o.removeAllRanges(),o.addRange(s)),n&&n.focus()}}(e)}function ie(t){let n,o,s,i,a,c,r,p,f;return{c(){n=g("div"),o=g("span"),s=m("["),i=m(t[0]),a=m("%] "),c=m(t[1]),r=h(),p=g("div"),f=g("div"),w(o,"class","status-text svelte-e99ivy"),w(f,"class","loading-bar-progress svelte-e99ivy"),_(f,"width",t[0]+"%"),w(p,"class","loading-bar-container svelte-e99ivy"),w(n,"class","container column centered spaced svelte-e99ivy")},m(e,t){d(e,n,t),l(n,o),l(o,s),l(o,i),l(o,a),l(o,c),l(n,r),l(n,p),l(p,f)},p(e,[t]){1&t&&k(i,e[0]),2&t&&k(c,e[1]),1&t&&_(f,"width",e[0]+"%")},i:e,o:e,d(e){e&&u(n)}}}function ae(e,t,n){let{progress:o=0}=t,{status:s=""}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress),"status"in e&&n(1,s=e.status)},[o,s]}class ce extends K{constructor(e){super(),X(this,e,ae,ie,i,{progress:0,status:1})}}async function re(e){const t=await fetch("/save_recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recording:e})});if(!t.ok)throw new Error("Failed to save recording");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function le(e){const t=await fetch("/save_feedback_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_list:e})});if(!t.ok)throw new Error("Failed to save feedback list");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function de(e){const t=await fetch("/save_display_chatbot_messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_chatbot_messages:e})});if(!t.ok)throw new Error("Failed to save display chatbot messages");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function ue(e){const t=await fetch("/save_my_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({my_notes:e})});if(!t.ok)throw new Error("Failed to save my notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}async function pe(e){const t=await fetch("/save_feedback_notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback_notes:e})});if(!t.ok)throw new Error("Failed to save my feedback notes");let n=await t.json();return"message"in n&&console.log(n.message),n.message}function ge(e,t,n){const o=e.slice();return o[63]=t[n][0],o[64]=t[n][1],o}function me(e,t,n){const o=e.slice();return o[67]=t[n],o[69]=n,o}function he(t){let n;return{c(){n=g("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function fe(e){let t,n,o,s,i,a=e[2]+1+"",c=e[1].length+"";return{c(){t=g("span"),n=m(a),o=m(" of "),s=m(c),i=m(" feedback moments highlighted")},m(e,a){d(e,t,a),l(t,n),l(t,o),l(t,s),l(t,i)},p(e,t){4&t[0]&&a!==(a=e[2]+1+"")&&k(n,a),2&t[0]&&c!==(c=e[1].length+"")&&k(s,c)},d(e){e&&u(t)}}}function ve(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No discussion transcript loaded. Please first upload your transcript.</span>",w(n,"class","centered"),_(n,"height","100%"),_(n,"width","100%")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function be(e){let t,n=e[0].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=we(me(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(9&s[0]){let i;for(n=e[0].transcript_list,i=0;i<n.length;i+=1){const a=me(e,n,i);o[i]?o[i].p(a,s):(o[i]=we(a),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function we(e){let t,n,s,i,a,c,r,p,f,b,y,_,x,T,F,$,S,L,C,j,N,O,E,P=e[67].start_timestamp+"",R=e[67].end_timestamp+"",M=e[67].speaker?e[67].speaker+":":"",A=e[67].dialogue+"";function D(){return e[22](e[67])}function H(){return e[23](e[67])}return{c(){t=g("div"),n=g("span"),s=m("["),i=m(P),a=m("]"),c=m(" \n                            - \n                            "),r=g("span"),p=m("["),f=m(R),b=m("]"),y=h(),_=g("br"),x=h(),T=m(M),F=h(),$=g("span"),L=h(),C=g("br"),j=g("br"),N=h(),w(n,"class","timestamp svelte-axxzkr"),w(r,"class","timestamp svelte-axxzkr"),w($,"id",S=e[67].id),w($,"class","svelte-axxzkr"),w(t,"class","spaced")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(n,i),l(n,a),l(t,c),l(t,r),l(r,p),l(r,f),l(r,b),l(t,y),l(t,_),l(t,x),l(t,T),l(t,F),l(t,$),$.innerHTML=A,l(t,L),l(t,C),l(t,j),l(t,N),O||(E=[v(n,"click",D),v(r,"click",H)],O=!0)},p(t,n){e=t,1&n[0]&&P!==(P=e[67].start_timestamp+"")&&k(i,P),1&n[0]&&R!==(R=e[67].end_timestamp+"")&&k(f,R),1&n[0]&&M!==(M=e[67].speaker?e[67].speaker+":":"")&&k(T,M),1&n[0]&&A!==(A=e[67].dialogue+"")&&($.innerHTML=A),1&n[0]&&S!==(S=e[67].id)&&w($,"id",S)},d(e){e&&u(t),O=!1,o(E)}}}function ke(e){let t,n,o,s,i,a;return{c(){t=g("button"),n=g("img"),s=m("\n                                        Remove media"),r(n.src,o="./logos/delete-x-svgrepo-com.svg")||w(n,"src","./logos/delete-x-svgrepo-com.svg"),w(n,"alt","Delete media"),w(n,"class","mini-icon"),w(t,"class","action-button centered row  svelte-axxzkr"),t.disabled=e[8]},m(o,c){d(o,t,c),l(t,n),l(t,s),i||(a=v(t,"click",e[28]),i=!0)},p(e,n){256&n[0]&&(t.disabled=e[8])},d(e){e&&u(t),i=!1,a()}}}function ye(e){let t,n,o,s,i,a;return{c(){t=g("button"),n=g("img"),s=m("\n                                        Remove transcript"),r(n.src,o="./logos/delete-x-svgrepo-com.svg")||w(n,"src","./logos/delete-x-svgrepo-com.svg"),w(n,"alt","Delete transcript"),w(n,"class","mini-icon"),w(t,"class","action-button centered row  svelte-axxzkr"),t.disabled=e[8]},m(o,c){d(o,t,c),l(t,n),l(t,s),i||(a=v(t,"click",e[33]),i=!0)},p(e,n){256&n[0]&&(t.disabled=e[8])},d(e){e&&u(t),i=!1,a()}}}function _e(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[41](n)},p:e,d(e){e&&u(n),t[41](null)}}}function xe(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[0].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[40](t)},p(e,o){1&o[0]&&!r(t.src,n=e[0].audio)&&w(t,"src",n)},d(n){n&&u(t),e[40](null)}}}function Te(e){let t,n,o,s;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[0].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[39](t)},p(e,n){1&n[0]&&!r(t.src,s=e[0].video)&&w(t,"src",s)},d(n){n&&u(t),e[39](null)}}}function Fe(e){let t,n,o=e[0].transcript_list&&e[0].transcript_list.length>0&&"speaker"in e[0].transcript_list[0]&&$e(e),s=e[1]&&Le(e);return{c(){o&&o.c(),t=h(),s&&s.c(),n=f()},m(e,i){o&&o.m(e,i),d(e,t,i),s&&s.m(e,i),d(e,n,i)},p(e,i){e[0].transcript_list&&e[0].transcript_list.length>0&&"speaker"in e[0].transcript_list[0]?o?o.p(e,i):(o=$e(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[1]?s?s.p(e,i):(s=Le(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){o&&o.d(e),e&&u(t),s&&s.d(e),e&&u(n)}}}function $e(e){let t,n,o,s,i,a,c,r,f,v=Object.keys(e[0].transcript_list.reduce(Ae,{})).length+"",b=Object.entries(e[0].transcript_list.reduce(De,{})),w=[];for(let t=0;t<b.length;t+=1)w[t]=Se(ge(e,b,t));return{c(){t=g("strong"),n=m("Number of participants: "),o=m(v),s=h(),i=g("br"),a=h(),c=g("ul");for(let e=0;e<w.length;e+=1)w[e].c();r=h(),f=g("br")},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),d(e,a,u),d(e,c,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(c,null);d(e,r,u),d(e,f,u)},p(e,t){if(1&t[0]&&v!==(v=Object.keys(e[0].transcript_list.reduce(Ae,{})).length+"")&&k(o,v),1&t[0]){let n;for(b=Object.entries(e[0].transcript_list.reduce(De,{})),n=0;n<b.length;n+=1){const o=ge(e,b,n);w[n]?w[n].p(o,t):(w[n]=Se(o),w[n].c(),w[n].m(c,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}},d(e){e&&u(t),e&&u(s),e&&u(i),e&&u(a),e&&u(c),p(w,e),e&&u(r),e&&u(f)}}}function Se(e){let t,n,o,s,i,a,c,r=e[63]+"",p=e[64]+"";return{c(){t=g("li"),n=m("- "),o=m(r),s=m(": "),i=m(p),a=m(" utterances"),c=h()},m(e,r){d(e,t,r),l(t,n),l(t,o),l(t,s),l(t,i),l(t,a),d(e,c,r)},p(e,t){1&t[0]&&r!==(r=e[63]+"")&&k(o,r),1&t[0]&&p!==(p=e[64]+"")&&k(i,p)},d(e){e&&u(t),e&&u(c)}}}function Le(e){let t,n,o,s,i,a,c,r,p,f,v,b,w=e[1].length+"",y=e[1].filter(He).length+"",_=e[1].filter(qe).length+"";return{c(){t=g("strong"),n=m("Number of feedback utterances: "),o=m(w),s=h(),i=g("ul"),a=g("li"),c=m("- Number of positive feedback: "),r=m(y),p=h(),f=g("li"),v=m("- Number of critical feedback: "),b=m(_)},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,s,u),d(e,i,u),l(i,a),l(a,c),l(a,r),l(i,p),l(i,f),l(f,v),l(f,b)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&k(o,w),2&t[0]&&y!==(y=e[1].filter(He).length+"")&&k(r,y),2&t[0]&&_!==(_=e[1].filter(qe).length+"")&&k(b,_)},d(e){e&&u(t),e&&u(s),e&&u(i)}}}function Ce(e){let t,n,s,i,a,c,p,f,b,k,y,x,T,$,S,L,j,N,O,E,P,M,A,D,H,q,U,I,z,Q,X,K,Z,ee,te,ne,oe,se,ie,ae,re,le,de,ue,pe,ge,me,we,$e,Se,Le,Ce,je,Ne,Oe,Ee,Pe,Re,Me,Ae,De,He,qe,Ue,Ie,ze,Je,Ge,Ve,Be,Ye,We,Qe,Xe,Ke,Ze,et,tt,nt,ot,st,it,at,ct,rt,lt,dt,ut,pt,gt,mt,ht,ft,vt,bt,wt,kt,yt,_t,xt,Tt,Ft,$t,St,Lt,Ct,jt;function Nt(t){e[18](t)}function Ot(t){e[19](t)}let Et={};function Pt(e,t){return e[1]&&e[1].length>0?fe:he}void 0!==e[10]&&(Et.progress=e[10]),void 0!==e[9]&&(Et.status=e[9]),a=new ce({props:Et}),C.push((()=>V(a,"progress",Nt))),C.push((()=>V(a,"status",Ot)));let Rt=Pt(e),Mt=Rt(e);function At(e,t){return e[0]&&e[0].transcript_list&&e[0].transcript_list.length>0?be:ve}let Dt=At(e),Ht=Dt(e),qt=(e[0].video||e[0].audio)&&ke(e),Ut=e[0].transcript_list&&e[0].transcript_list.length>0&&ye(e);function It(e,t){return e[0]&&e[0].video?Te:e[0]&&e[0].audio?xe:_e}let zt=It(e),Jt=zt(e),Gt=e[0]&&e[0].transcript_list&&Fe(e);return{c(){t=g("div"),n=g("div"),s=g("div"),i=g("div"),B(a.$$.fragment),f=h(),b=g("div"),Mt.c(),k=h(),y=g("button"),x=g("img"),S=h(),L=g("button"),j=g("img"),E=h(),Ht.c(),P=h(),M=g("div"),A=g("div"),D=g("span"),D.textContent="Step 1: Upload your discussion.",H=h(),q=g("div"),U=g("div"),I=g("div"),z=g("label"),z.textContent="Upload your own video or audio:",Q=h(),X=g("div"),K=g("input"),Z=h(),ee=g("button"),te=g("img"),oe=m("\n                                    Upload file"),ie=h(),qt&&qt.c(),ae=h(),re=g("div"),le=g("label"),le.textContent="Upload your own transcript (in .srt only):",de=h(),ue=g("div"),pe=g("input"),ge=h(),me=g("button"),we=g("img"),Se=m("\n                                    Upload file"),Ce=h(),Ut&&Ut.c(),je=h(),Ne=g("div"),Oe=g("span"),Oe.textContent="Step 2: Highlight feedback in the discussion's transcript.",Ee=h(),Pe=g("div"),Re=g("div"),Me=g("button"),Ae=g("img"),He=m("\n                            Auto-detect "),qe=g("br"),Ue=m(" Feedback"),ze=h(),Je=g("button"),Ge=g("img"),Be=m("\n                            Highlight "),Ye=g("br"),We=m(" Positive"),Xe=h(),Ke=g("button"),Ze=g("img"),tt=m("\n                            Highlight "),nt=g("br"),ot=m(" Critical"),it=h(),at=g("button"),ct=g("img"),lt=m("\n                            Remove "),dt=g("br"),ut=m(" Feedback"),gt=h(),mt=g("button"),ht=g("img"),vt=m("\n                            Remove all "),bt=g("br"),wt=m(" Feedback"),yt=h(),_t=g("div"),xt=g("div"),Jt.c(),Tt=h(),Ft=g("div"),$t=g("h3"),$t.textContent="Discussion Transcript Details",St=h(),Gt&&Gt.c(),w(i,"class","overlay centered padded"),F(i,"invisible",!1===e[8]),r(x.src,T="./logos/up-arrow-5-svgrepo-com.svg")||w(x,"src","./logos/up-arrow-5-svgrepo-com.svg"),w(x,"alt","Prev feedback"),w(x,"class","logo"),_(x,"width","1.5rem"),_(x,"height","1.5rem"),y.disabled=$=!e[1]||e[1].length<=0,r(j.src,N="./logos/down-arrow-5-svgrepo-com.svg")||w(j,"src","./logos/down-arrow-5-svgrepo-com.svg"),w(j,"alt","Next feedback"),w(j,"class","logo"),_(j,"width","1.5rem"),_(j,"height","1.5rem"),L.disabled=O=!e[1]||e[1].length<=0,w(b,"id","traverse-feedback-area"),w(b,"class","bordered spaced svelte-axxzkr"),w(s,"id","transcript-area"),w(s,"class","column bordered spaced svelte-axxzkr"),_(D,"font-weight","bold"),_(D,"text-decoration","underline"),_(D,"margin-left","1rem"),w(z,"for","file_upload"),_(K,"width","50%"),w(K,"name","mediafile_upload"),w(K,"type","file"),w(K,"id","mediafile_upload"),w(K,"accept","video/*, audio/*"),r(te.src,ne="./logos/upload-svgrepo-com.svg")||w(te,"src","./logos/upload-svgrepo-com.svg"),w(te,"alt","Upload file"),w(te,"class","mini-icon"),w(ee,"class","action-button centered column  svelte-axxzkr"),ee.disabled=se=e[8]||!e[4]||0===e[4].length,w(X,"class","row centered spaced"),w(I,"class","column spaced centered"),w(le,"for","file_upload"),_(pe,"width","50%"),w(pe,"name","transcirptfile_upload"),w(pe,"type","file"),w(pe,"id","transcriptfile_upload"),w(pe,"accept"," .srt"),r(we.src,$e="./logos/upload-svgrepo-com.svg")||w(we,"src","./logos/upload-svgrepo-com.svg"),w(we,"alt","Upload file"),w(we,"class","mini-icon"),w(me,"class","action-button centered column  svelte-axxzkr"),me.disabled=Le=e[8]||!e[6]||0===e[6].length,w(ue,"class","row centered spaced"),w(re,"class","column spaced centered"),w(U,"class","column centered spaced"),w(q,"class","row centered spaced"),w(A,"id","capture-feedback-panel"),w(A,"class","column padded centered spaced svelte-axxzkr"),_(Oe,"font-weight","bold"),_(Oe,"text-decoration","underline"),_(Oe,"margin-left","1rem"),r(Ae.src,De="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||w(Ae,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),w(Ae,"alt","Auto-detect Feedback"),w(Ae,"class","logo"),w(Me,"class","action-button svelte-axxzkr"),Me.disabled=Ie=!e[0]||!e[0].transcript_list||e[8],r(Ge.src,Ve="./logos/highlight-green-svgrepo-com.svg")||w(Ge,"src","./logos/highlight-green-svgrepo-com.svg"),w(Ge,"alt","Highlight Positive Feedback"),w(Ge,"class","logo"),w(Je,"class","action-button svelte-axxzkr"),Je.disabled=Qe=!e[0]||!e[0].transcript_list||e[8],r(Ze.src,et="./logos/highlight-red-svgrepo-com.svg")||w(Ze,"src","./logos/highlight-red-svgrepo-com.svg"),w(Ze,"alt","Highlight Critical Feedback"),w(Ze,"class","logo"),w(Ke,"class","action-button svelte-axxzkr"),Ke.disabled=st=!e[0]||!e[0].transcript_list||e[8],r(ct.src,rt="./logos/erase-svgrepo-com.svg")||w(ct,"src","./logos/erase-svgrepo-com.svg"),w(ct,"alt","De-highlight Feedback"),w(ct,"class","logo"),w(at,"class","action-button svelte-axxzkr"),at.disabled=pt=!e[0]||!e[0].transcript_list||e[8]||e[1].length<=0,r(ht.src,ft="./logos/delete-svgrepo-com.svg")||w(ht,"src","./logos/delete-svgrepo-com.svg"),w(ht,"alt","Delete all Feedback"),w(ht,"class","logo"),w(mt,"class","action-button svelte-axxzkr"),mt.disabled=kt=!e[0]||!e[0].transcript_list||e[8]||e[1].length<=0,w(Re,"class","row centered spaced"),w(Pe,"class","centered"),_(Pe,"height","100%"),_(Pe,"width","100%"),w(Ne,"id","feedback-highlight-panel"),w(Ne,"class","column spaced padded  svelte-axxzkr"),w(M,"id","transcript-buttons-area"),w(M,"class","row centered spaced bordered svelte-axxzkr"),w(n,"id","left-panel"),w(n,"class","column spaced svelte-axxzkr"),w(xt,"id","media-player-area"),w(xt,"class","bordered centered svelte-axxzkr"),_($t,"font-weight","bold"),_($t,"text-decoration","underline"),w(Ft,"id","feedback-details-area"),w(Ft,"class","bordered padded spaced svelte-axxzkr"),_(Ft,"overflow-y","auto"),w(_t,"id","right-panel"),w(_t,"class","column spaced svelte-axxzkr"),w(t,"div",""),w(t,"class","row spaced svelte-axxzkr"),w(t,"id","feedback-selector-page")},m(o,c){d(o,t,c),l(t,n),l(n,s),l(s,i),Y(a,i,null),l(s,f),l(s,b),Mt.m(b,null),l(b,k),l(b,y),l(y,x),l(b,S),l(b,L),l(L,j),l(s,E),Ht.m(s,null),l(n,P),l(n,M),l(M,A),l(A,D),l(A,H),l(A,q),l(q,U),l(U,I),l(I,z),l(I,Q),l(I,X),l(X,K),e[25](K),l(X,Z),l(X,ee),l(ee,te),l(ee,oe),l(X,ie),qt&&qt.m(X,null),l(U,ae),l(U,re),l(re,le),l(re,de),l(re,ue),l(ue,pe),e[30](pe),l(ue,ge),l(ue,me),l(me,we),l(me,Se),l(ue,Ce),Ut&&Ut.m(ue,null),l(M,je),l(M,Ne),l(Ne,Oe),l(Ne,Ee),l(Ne,Pe),l(Pe,Re),l(Re,Me),l(Me,Ae),l(Me,He),l(Me,qe),l(Me,Ue),l(Re,ze),l(Re,Je),l(Je,Ge),l(Je,Be),l(Je,Ye),l(Je,We),l(Re,Xe),l(Re,Ke),l(Ke,Ze),l(Ke,tt),l(Ke,nt),l(Ke,ot),l(Re,it),l(Re,at),l(at,ct),l(at,lt),l(at,dt),l(at,ut),l(Re,gt),l(Re,mt),l(mt,ht),l(mt,vt),l(mt,bt),l(mt,wt),l(t,yt),l(t,_t),l(_t,xt),Jt.m(xt,null),l(_t,Tt),l(_t,Ft),l(Ft,$t),l(Ft,St),Gt&&Gt.m(Ft,null),Lt=!0,Ct||(jt=[v(y,"click",e[20]),v(L,"click",e[21]),v(K,"change",e[24]),v(K,"change",e[26]),v(ee,"click",e[27]),v(pe,"change",e[29]),v(pe,"change",e[31]),v(me,"click",e[32]),v(Me,"click",e[34]),v(Je,"click",e[35]),v(Ke,"click",e[36]),v(at,"click",e[37]),v(mt,"click",e[38])],Ct=!0)},p(e,t){const n={};!c&&1024&t[0]&&(c=!0,n.progress=e[10],R((()=>c=!1))),!p&&512&t[0]&&(p=!0,n.status=e[9],R((()=>p=!1))),a.$set(n),(!Lt||256&t[0])&&F(i,"invisible",!1===e[8]),Rt===(Rt=Pt(e))&&Mt?Mt.p(e,t):(Mt.d(1),Mt=Rt(e),Mt&&(Mt.c(),Mt.m(b,k))),(!Lt||2&t[0]&&$!==($=!e[1]||e[1].length<=0))&&(y.disabled=$),(!Lt||2&t[0]&&O!==(O=!e[1]||e[1].length<=0))&&(L.disabled=O),Dt===(Dt=At(e))&&Ht?Ht.p(e,t):(Ht.d(1),Ht=Dt(e),Ht&&(Ht.c(),Ht.m(s,null))),(!Lt||272&t[0]&&se!==(se=e[8]||!e[4]||0===e[4].length))&&(ee.disabled=se),e[0].video||e[0].audio?qt?qt.p(e,t):(qt=ke(e),qt.c(),qt.m(X,null)):qt&&(qt.d(1),qt=null),(!Lt||320&t[0]&&Le!==(Le=e[8]||!e[6]||0===e[6].length))&&(me.disabled=Le),e[0].transcript_list&&e[0].transcript_list.length>0?Ut?Ut.p(e,t):(Ut=ye(e),Ut.c(),Ut.m(ue,null)):Ut&&(Ut.d(1),Ut=null),(!Lt||257&t[0]&&Ie!==(Ie=!e[0]||!e[0].transcript_list||e[8]))&&(Me.disabled=Ie),(!Lt||257&t[0]&&Qe!==(Qe=!e[0]||!e[0].transcript_list||e[8]))&&(Je.disabled=Qe),(!Lt||257&t[0]&&st!==(st=!e[0]||!e[0].transcript_list||e[8]))&&(Ke.disabled=st),(!Lt||259&t[0]&&pt!==(pt=!e[0]||!e[0].transcript_list||e[8]||e[1].length<=0))&&(at.disabled=pt),(!Lt||259&t[0]&&kt!==(kt=!e[0]||!e[0].transcript_list||e[8]||e[1].length<=0))&&(mt.disabled=kt),zt===(zt=It(e))&&Jt?Jt.p(e,t):(Jt.d(1),Jt=zt(e),Jt&&(Jt.c(),Jt.m(xt,null))),e[0]&&e[0].transcript_list?Gt?Gt.p(e,t):(Gt=Fe(e),Gt.c(),Gt.m(Ft,null)):Gt&&(Gt.d(1),Gt=null)},i(e){Lt||(J(a.$$.fragment,e),Lt=!0)},o(e){G(a.$$.fragment,e),Lt=!1},d(n){n&&u(t),W(a),Mt.d(),Ht.d(),e[25](null),qt&&qt.d(),e[30](null),Ut&&Ut.d(),Jt.d(),Gt&&Gt.d(),Ct=!1,o(jt)}}}async function je(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function Ne(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function Oe(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const o=await n.json();return[o.audiopath,o.videopath]}async function Ee(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function Pe(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function Re(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let o=e[n],s=o.id,i=o.start_timestamp,a=o.end_timestamp,c=o.dialogue;"speaker"in o&&""!=o.speaker?t+=`${s}\n${i} --\x3e ${a}\n${o.speaker}: ${c}\n\n`:t+=`${s}\n${i} --\x3e ${a}\n${c}\n\n`}return t}(e);const o=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!o.ok)throw new Error("Failed to detect feedback");return t=(await o.json()).feedback_list,console.log(t),t}function Me(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let o=e[n];if(o.id===t)return o}return console.log("Error: Can't find excerpt with id",t),null}const Ae=(e,t)=>(e[t.speaker]=!0,e),De=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),He=e=>"positive"===e.type,qe=e=>"critical"===e.type;function Ue(e,t,n){let o,s,i,a,c,r,l,{recording:d={}}=t,{feedback_list:u=[]}=t,p=0,g=!1,m="",h=0;async function f(){let e=await fetch("/delete_recording_media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recording:d})}),t=await e.json();return"message"in t&&console.log(t.message),t.message}async function v(){if(a){for(const e of a)if(console.log(e.type),e.type.includes("video")){if((d||"video"in d||"audio"in d||"transcript_list"in d)&&(d.video||d.audio)){if(!window.confirm("Uploading a new video will overwrite this current media. Do you want to proceed?"))return;await f(),d.audio&&(n(0,d.audio=null,d),n(0,d.audio_path=null,d),n(0,d)),d.video&&(n(0,d.video=null,d),n(0,d.video_path=null,d),n(0,d)),await re(d),await te("FeedbackSelector: Remove media",d)}let t=URL.createObjectURL(e);if(n(9,m="Uploading video..."),n(10,h=50),[i,s]=await Oe(e),!i||!s)throw i=null,s=null,new Error("Failed to extract audio from video");let o=await je(i),a="",c=[];n(9,m="Done!"),n(10,h=100),Z(1500),n(10,h=0);let r={video:t,video_path:s,audio:o,audio_path:i,transcript:a,transcript_list:c};d&&"transcript_list"in d&&d.transcript_list?(n(0,d.video=t,d),n(0,d.video_path=s,d),n(0,d.audio=o,d),n(0,d.audio_path=i,d),n(0,d),n(0,d)):n(0,d=r),i=null,s=null}else if(e.type.includes("audio")){if((d||"audio"in d||"video"in d||"transcript_list"in d)&&(d.audio||d.video)){if(!window.confirm("Uploading a new audio will overwrite this current media. Do you want to proceed?"))return;await f(),d.audio&&(n(0,d.audio=null,d),n(0,d.audio_path=null,d),n(0,d)),d.video&&(n(0,d.video=null,d),n(0,d.video_path=null,d),n(0,d)),await re(d),await te("FeedbackSelector: Remove media",d)}let t=URL.createObjectURL(e);n(9,m="Uploading audio..."),n(10,h=50);const o=new FormData;o.append("audio",e);const a=await fetch("/download_mic",{method:"POST",body:o});if(!a.ok)throw i=null,s=null,new Error("Failed to save uploaded audio");let c=await a.json();i=c.filepath;let r="",l=[];n(9,m="Done!"),n(10,h=100),await Z(1500),n(10,h=0);let u={video:null,video_path:null,audio:t,audio_path:i,transcript:r,transcript_list:l};d&&"transcript_list"in d&&d.transcript_list?(n(0,d.audio=t,d),n(0,d.audio_path=i,d),n(0,d),n(0,d)):n(0,d=u),i=null,s=null}n(4,a=null),n(5,c.value="",c)}console.log("Recording",d),n(10,h=0),n(9,m="")}async function b(){if(r){for(const e of r)if(console.log(e.type),e.name.endsWith(".srt")){if((d||"transcript"in d||"transcript_list"in d)&&d.transcript_list&&d.transcript_list.length>0){if(!window.confirm("Uploading a new transcript will overwrite this current transcript. Do you want to proceed?"))return;y(),n(1,u=[]),n(0,d.transcript_list=[],d),n(0,d.transcript="",d),n(0,d),await re(d),await te("FeedbackSelector: Remove transcript",d)}let t=new FileReader;t.onload=async function(e){console.log(undefined),n(8,g=!0);let t=e.target.result;console.log(t),n(9,m="Cleaning transcript..."),n(10,h=30);let o=await Ee(t);await Z(1500);let s=await Pe(o),i={video:null,video_path:null,audio:null,audio_path:null,transcript:o,transcript_list:s};d&&("video"in d&&d.video||"audio"in d&&d.audio)?(n(0,d.transcript_list=s,d),n(0,d),n(0,d.transcript=o,d),n(0,d),n(0,d),n(0,d)):n(0,d=i),n(9,m="Saving transcript as a database (this may take a while) ... "),n(10,h=60),await Ne(s),await re(d),console.log("Transcript list embedded"),n(9,m="Done!"),n(10,h=100),await Z(500),n(10,h=0),n(8,g=!1)},t.readAsText(e)}n(6,r=null),n(7,l.value="",l)}console.log("Recording",d),n(10,h=0),n(9,m="")}function w(e){const t=window.getSelection().toString();if(""===t.trim())return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted";if(t){let o={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},s=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let o=e[n],s=o.dialogue;if(o.speaker&&(s=o.speaker+": "+s),s.includes(t))return o}return null}(d.transcript_list,t);return s?(o.id=u.length+1,o.dialogue_id=s.id,o.speaker=s.speaker,o.excerpt_reference=s,o.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],u.push(o),n(1,u),n(0,d),x([o]),o):(console.log("Error: Corresponding transcript excerpt not found"),alert("Error: Corresponding transcript excerpt not found. Feedback not added."),"Error: Corresponding transcript excerpt not found for selection: "+t)}return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted"}function k(){const e=window.getSelection().toString();if(""===e.trim())return alert("Please highlight the feedback you want to remove using your mouse."),"Error: No text highlighted";if(e)for(let t=0;t<u.length;t++){let o=u[t];if(o.quote.includes(e)){let e=parseInt(o.dialogue_id),s=o.quote;return u.splice(t,1),n(1,u),_(e,s),o}}return"Error: Feedback not found for selection: "+e}function y(){for(let e=0;e<u.length;e++){let t=u[e];_(parseInt(t.dialogue_id),t.quote),u.splice(e,1),n(1,u)}}function _(e,t){for(let o=0;o<d.transcript_list.length;o++){let s=d.transcript_list[o];if(s.id===e){let e=s.dialogue,o=e.indexOf("<mark"),i=e.indexOf("</mark>")+7,a=e.slice(0,o)+t+e.slice(i);s.dialogue=a,s.dialogue=s.dialogue,n(0,d);break}}}function x(e){for(let t=0;t<e.length;t++){let n=e[t],o=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let s,i=parseInt(n.dialogue_id);for(let e=0;e<d.transcript_list.length;e++){let t=d.transcript_list[e];if(t.id===i){s=t;break}}if(!s){console.log("Error: Corresponding transcript excerpt not found");continue}let a=s.dialogue,c=a.indexOf(n.quote),r=c+n.quote.length,l=a.slice(0,c)+`<mark class="${o}" style="background-color:${"positive"===o?"lightgreen":"lightcoral"};">${n.quote}</mark>`+a.slice(r);s.dialogue=l}n(0,d)}S((async()=>{console.log(d)}));return e.$$set=e=>{"recording"in e&&n(0,d=e.recording),"feedback_list"in e&&n(1,u=e.feedback_list)},[d,u,p,o,a,c,r,l,g,m,h,f,v,b,w,k,y,x,function(e){h=e,n(10,h)},function(e){m=e,n(9,m)},async()=>{p>0?n(2,p--,p):n(2,p=u.length-1),oe(u[p]),await te("FeedbackSelector: Traverse to previous feedback",u[p])},async()=>{p<u.length-1?n(2,p++,p):n(2,p=0),oe(u[p]),await te("FeedbackSelector: Traverse to next feedback",u[p])},async e=>{ne(e.start_timestamp,o),await te("FeedbackSelector: Seeked to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackSelector: Seeked to end timestamp",e.end_timestamp)},function(){a=this.value,n(4,a)},function(e){C[e?"unshift":"push"]((()=>{c=e,n(5,c)}))},async e=>{n(4,a=e.target.files),console.log(a),await te("FeedbackSelector: Select media file",a)},async()=>{n(8,g=!0),await v(),n(8,g=!1),await re(d),await te("FeedbackSelector: Upload media",d)},async()=>{window.confirm("This cannot be undone. Do you want to proceed?")&&(await f(),d.audio&&(n(0,d.audio=null,d),n(0,d.audio_path=null,d),n(0,d)),d.video&&(n(0,d.video=null,d),n(0,d.video_path=null,d),n(0,d)),await re(d),await te("FeedbackSelector: Remove media",d))},function(){r=this.value,n(6,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(7,l)}))},async e=>{n(6,r=e.target.files),await te("FeedbackSelector: Select transcript file",r)},async()=>{n(8,g=!0),await b(),n(8,g=!1),console.log(d),await te("FeedbackSelector: Upload transcript",d)},async()=>{window.confirm("This cannot be undone. Do you want to proceed?")&&(y(),n(1,u=[]),n(0,d.transcript_list=[],d),n(0,d.transcript="",d),n(0,d),await re(d),await te("FeedbackSelector: Remove transcript",d))},async()=>{if(u.length>0){if(!window.confirm("Auto-detecting again will clear all feedback highlighted. Do you want to proceed?"))return}n(8,g=!0),n(10,h=0);let e=d.transcript_list,t=Math.ceil(e.length/4),o=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(9,m="Detecting feedback in transcript ...");for(let e=0;e<o.length;e++){let t=await Re(o[e]);n(1,u=u.concat(t)),n(10,h=20*(e+1)),await Z(250)}n(1,u),console.log(u);for(let e=0;e<u.length;e++){n(1,u[e].id=e+1,u);let t=u[e].dialogue_id,o=Me(d.transcript_list,t);n(1,u[e].excerpt_reference=o,u)}n(1,u),n(9,m="Highlighting feedback ..."),x(u),await le(u),await re(d),await Z(500),n(10,h=100),console.log("Feedback: "+u[0]),n(8,g=!1),n(10,h=0),n(9,m=""),await te("FeedbackSelector: Auto-detect feedback",u)},async()=>{let e=w("positive");await le(u),await re(d),await te("FeedbackSelector: Add positive feedback",e)},async()=>{let e=w("critical");await le(u),await re(d),await te("FeedbackSelector: Add critical feedback",e)},async()=>{let e=k();await le(u),await re(d),await te("FeedbackSelector: Remove feedback",e)},async()=>{y(),await le(u),await re(d),await te("FeedbackSelector: Removed all feedback",u)},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class Ie extends K{constructor(e){super(),X(this,e,Ue,Ce,i,{recording:0,feedback_list:1},null,[-1,-1,-1])}}function ze(t){let n,s,i,a,c,r,p;return{c(){n=g("div"),s=g("input"),i=h(),a=g("span"),c=m(t[0]),w(s,"type","range"),w(s,"min",t[1]),w(s,"max",t[2]),w(s,"step",t[3]),w(s,"id","rangeSlider"),w(s,"class","svelte-ohnqtn"),w(a,"id","sliderValue"),w(n,"class","centered spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),l(n,s),y(s,t[0]),l(n,i),l(n,a),l(a,c),r||(p=[v(s,"change",t[4]),v(s,"input",t[4])],r=!0)},p(e,[t]){2&t&&w(s,"min",e[1]),4&t&&w(s,"max",e[2]),8&t&&w(s,"step",e[3]),1&t&&y(s,e[0]),1&t&&k(c,e[0])},i:e,o:e,d(e){e&&u(n),r=!1,o(p)}}}function Je(e,t,n){let{min:o=0}=t,{max:s=2}=t,{step:i=.1}=t,{value:a=1}=t;return e.$$set=e=>{"min"in e&&n(1,o=e.min),"max"in e&&n(2,s=e.max),"step"in e&&n(3,i=e.step),"value"in e&&n(0,a=e.value)},[a,o,s,i,function(){a=function(e){return""===e?null:+e}(this.value),n(0,a)}]}class Ge extends K{constructor(e){super(),X(this,e,Je,ze,i,{min:1,max:2,step:3,value:0})}}function Ve(e,t,n){const o=e.slice();return o[127]=t[n],o}function Be(e,t,n){const o=e.slice();return o[130]=t[n],o[116]=n,o}function Ye(e,t,n){const o=e.slice();return o[130]=t[n],o[116]=n,o}function We(e,t,n){const o=e.slice();return o[120]=t[n],o[116]=n,o}function Qe(e,t,n){const o=e.slice();return o[122]=t[n],o}function Xe(e,t,n){const o=e.slice();return o[117]=t[n],o}function Ke(e,t,n){const o=e.slice();return o[122]=t[n],o}function Ze(e,t,n){const o=e.slice();return o[114]=t[n],o[116]=n,o}function et(e,t,n){const o=e.slice();return o[133]=t[n],o[116]=n,o}function tt(e,t,n){const o=e.slice();return o[135]=t[n],o[116]=n,o}function nt(e,t,n){const o=e.slice();return o[135]=t[n],o[136]=t,o[116]=n,o}function ot(e,t,n){const o=e.slice();return o[133]=t[n],o[116]=n,o}function st(e){let t,n,o,s,i=e[133]+"";function a(){return e[46](e[116])}return{c(){t=g("button"),n=m(i),w(t,"class","tab svelte-9kk1hw"),F(t,"active",e[116]===e[14]),F(t,"right-bordered",e[116]<e[32].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=v(t,"click",a),o=!0)},p(n,o){e=n,16384&o[0]&&F(t,"active",e[116]===e[14])},d(e){e&&u(t),o=!1,s()}}}function it(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=pt(tt(e,n,t));return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","grid svelte-9kk1hw"),_(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(46097&s[0]|280&s[1]){let i;for(n=e[0],i=0;i<n.length;i+=1){const a=tt(e,n,i);o[i]?o[i].p(a,s):(o[i]=pt(a),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function at(e){let t,n,s,i,a,c,m,f,b,k,y,x,T,F,$,S,L,C,j,N,O,E,P,R,M,A;function D(e,t){return e[28]&&"quote"===e[27]?mt:gt}let H=D(e),q=H(e);function U(e,t){return e[28]&&"speaker"===e[27]?ft:ht}let I=U(e),z=I(e),J=e[0],G=[];for(let t=0;t<J.length;t+=1)G[t]=Ft(nt(e,J,t));return{c(){t=g("div"),n=g("div"),s=g("span"),s.innerHTML="<strong>ID</strong>",i=h(),a=g("span"),c=g("strong"),c.textContent="Feedback",m=h(),f=g("button"),q.c(),b=h(),k=g("span"),y=g("strong"),y.textContent="Speaker",x=h(),T=g("button"),z.c(),F=h(),$=g("span"),$.innerHTML="<strong>Actions</strong>",S=h(),L=g("span"),C=g("strong"),C.textContent="Done?",j=h(),N=g("button"),O=g("img"),R=h();for(let e=0;e<G.length;e+=1)G[e].c();w(s,"class","centered id-col svelte-9kk1hw"),w(f,"class","action-button"),w(a,"class","centered row spaced feedback-col svelte-9kk1hw"),w(T,"class","action-button"),w(k,"class","centered row spaced speaker-col svelte-9kk1hw"),w($,"id","feedback-buttons"),w($,"class","centered row actions-col svelte-9kk1hw"),_(O,"height","1rem"),_(O,"width","1rem"),r(O.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||w(O,"src",E),w(O,"alt",P=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending"),w(O,"class","mini-icon"),w(N,"class","action-button"),w(L,"class","centered row spaced done-col svelte-9kk1hw"),w(n,"class","feedback-header row svelte-9kk1hw"),w(t,"class","column"),_(t,"overflow-y","auto")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,a),l(a,c),l(a,m),l(a,f),q.m(f,null),l(n,b),l(n,k),l(k,y),l(k,x),l(k,T),z.m(T,null),l(n,F),l(n,$),l(n,S),l(n,L),l(L,C),l(L,j),l(L,N),l(N,O),l(t,R);for(let e=0;e<G.length;e+=1)G[e]&&G[e].m(t,null);M||(A=[v(f,"click",e[47]),v(T,"click",e[48]),v(N,"click",e[49])],M=!0)},p(e,n){if(H!==(H=D(e))&&(q.d(1),q=H(e),q&&(q.c(),q.m(f,null))),I!==(I=U(e))&&(z.d(1),z=I(e),z&&(z.c(),z.m(T,null))),402653184&n[0]&&!r(O.src,E=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&w(O,"src",E),402653184&n[0]&&P!==(P=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending")&&w(O,"alt",P),46097&n[0]|280&n[1]){let o;for(J=e[0],o=0;o<J.length;o+=1){const s=nt(e,J,o);G[o]?G[o].p(s,n):(G[o]=Ft(s),G[o].c(),G[o].m(t,null))}for(;o<G.length;o+=1)G[o].d(1);G.length=J.length}},d(e){e&&u(t),q.d(),z.d(),p(G,e),M=!1,o(A)}}}function ct(e){let t,n,s,i,a,c,r,p,f,b,y,_,x,T,$,S,L,C,j,N,O,E,P,R,M,A,D=e[135].quote+"",H=e[135].speaker+"";function q(e,t){return"excerpt_reference"in e[135]?lt:rt}let U=q(e),I=U(e);function z(){return e[59](e[135])}function J(){return e[60](e[135])}function G(){return e[61](e[135])}function V(){return e[62](e[135])}function B(...t){return e[63](e[135],...t)}return{c(){t=g("div"),n=g("div"),s=g("small"),I.c(),i=h(),a=g("div"),c=g("button"),c.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 2.3rem; width: 2.3rem;"/>',r=h(),p=g("button"),p.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add note" class="mini-icon"/>',f=h(),b=g("button"),b.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Paraphrase positively" style="height: 2rem; width: 2rem;"/>',y=h(),_=g("br"),x=h(),T=g("p"),$=m('"'),S=m(D),L=m('"'),C=h(),j=g("br"),N=h(),O=g("span"),E=m("- "),P=m(H),R=h(),w(s,"class","timestamp svelte-9kk1hw"),w(c,"class","action-button"),w(p,"class","action-button"),w(b,"class","action-button"),w(a,"class","row spaced"),w(n,"class","note-header row space-between"),w(t,"class","positive-feedback-note svelte-9kk1hw"),F(t,"selected",e[135]===e[12])},m(e,o){d(e,t,o),l(t,n),l(n,s),I.m(s,null),l(n,i),l(n,a),l(a,c),l(a,r),l(a,p),l(a,f),l(a,b),l(t,y),l(t,_),l(t,x),l(t,T),l(T,$),l(T,S),l(T,L),l(t,C),l(t,j),l(t,N),l(t,O),l(O,E),l(O,P),l(t,R),M||(A=[v(s,"click",z),v(c,"click",J),v(p,"click",G),v(b,"click",V),v(t,"click",B)],M=!0)},p(n,o){U===(U=q(e=n))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(s,null))),1&o[0]&&D!==(D=e[135].quote+"")&&k(S,D),1&o[0]&&H!==(H=e[135].speaker+"")&&k(P,H),4097&o[0]&&F(t,"selected",e[135]===e[12])},d(e){e&&u(t),I.d(),M=!1,o(A)}}}function rt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function lt(e){let t;function n(e,t){return"start_timestamp"in e[135].excerpt_reference?ut:dt}let o=n(e),s=o(e);return{c(){s.c(),t=f()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function dt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ut(e){let t,n,o,s=e[135].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(s),o=m("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[135].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function pt(e){let t,n="positive"===e[135].type&&ct(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"positive"===e[135].type?n?n.p(e,o):(n=ct(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function gt(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function mt(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ht(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||w(t,"src","./logos/descending-sort-svgrepo-com.svg"),w(t,"alt","Sort descending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ft(e){let t,n;return{c(){t=g("img"),_(t,"height","1rem"),_(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||w(t,"src","./logos/ascending-sort-svgrepo-com.svg"),w(t,"alt","Sort ascending"),w(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function vt(e){let t,n,s,i,a,c,r,p,f,b,y,_,x,T,$,S,L,C,j,N,O,E,P,R,M,A,D,H=e[135].id+"",q=(e[135].speaker?e[135].speaker:"Unknown")+"";function U(e,t){return"excerpt_reference"in e[135]?wt:bt}let I=U(e),z=I(e);function J(){return e[50](e[135])}function G(e,t){return e[135].positivised_quote&&e[135].show_paraphrased?xt:_t}let V=G(e),B=V(e);function Y(){return e[53](e[135],e[136],e[116])}function W(){return e[54](e[135])}function Q(){return e[55](e[135])}function X(){return e[56](e[135])}function K(){e[57].call(R,e[136],e[116])}function Z(...t){return e[58](e[135],...t)}return{c(){t=g("div"),n=g("span"),s=g("strong"),i=m(H),a=h(),c=g("div"),r=g("span"),p=g("span"),z.c(),f=h(),B.c(),b=h(),y=g("span"),_=m(q),x=h(),T=g("div"),$=g("button"),$.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon"/>\n                                            Positivize',S=h(),L=g("button"),L.innerHTML='<img src="./logos/select-context.svg" alt="Select feedback as context" style="height: 3.3rem; width: 3.3rem;"/>\n                                            Select Context',C=h(),j=g("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Add Note',N=h(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Delete',E=h(),P=g("span"),R=g("input"),M=h(),w(n,"class","id-col svelte-9kk1hw"),w(p,"class","timestamp svelte-9kk1hw"),w(r,"class",""),w(c,"class","column feedback-col svelte-9kk1hw"),w(y,"class","centered speaker-col svelte-9kk1hw"),w($,"class","action-button"),w(L,"class","action-button centered column"),w(j,"class","action-button"),w(O,"class","action-button"),w(T,"id","feedback-buttons"),w(T,"class","row centered spaced actions-col svelte-9kk1hw"),w(R,"type","checkbox"),w(P,"class","centered done-col svelte-9kk1hw"),w(t,"class","feedback-row row bordered padded svelte-9kk1hw"),F(t,"done",e[135].done),F(t,"selected",e[135]===e[12])},m(o,u){d(o,t,u),l(t,n),l(n,s),l(s,i),l(t,a),l(t,c),l(c,r),l(r,p),z.m(p,null),l(r,f),B.m(r,null),l(t,b),l(t,y),l(y,_),l(t,x),l(t,T),l(T,$),l(T,S),l(T,L),l(T,C),l(T,j),l(T,N),l(T,O),l(t,E),l(t,P),l(P,R),R.checked=e[135].done,l(t,M),A||(D=[v(p,"click",J),v($,"click",Y),v(L,"click",W),v(j,"click",Q),v(O,"click",X),v(R,"change",K),v(t,"click",Z)],A=!0)},p(n,o){e=n,1&o[0]&&H!==(H=e[135].id+"")&&k(i,H),I===(I=U(e))&&z?z.p(e,o):(z.d(1),z=I(e),z&&(z.c(),z.m(p,null))),V===(V=G(e))&&B?B.p(e,o):(B.d(1),B=V(e),B&&(B.c(),B.m(r,null))),1&o[0]&&q!==(q=(e[135].speaker?e[135].speaker:"Unknown")+"")&&k(_,q),1&o[0]&&(R.checked=e[135].done),1&o[0]&&F(t,"done",e[135].done),4097&o[0]&&F(t,"selected",e[135]===e[12])},d(e){e&&u(t),z.d(),B.d(),A=!1,o(D)}}}function bt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function wt(e){let t;function n(e,t){return"start_timestamp"in e[135].excerpt_reference?yt:kt}let o=n(e),s=o(e);return{c(){s.c(),t=f()},m(e,n){s.m(e,n),d(e,t,n)},p(e,i){o===(o=n(e))&&s?s.p(e,i):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&u(t)}}}function kt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function yt(e){let t,n,o,s=e[135].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(s),o=m("]")},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s)},p(e,t){1&t[0]&&s!==(s=e[135].excerpt_reference.start_timestamp+"")&&k(n,s)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function _t(e){let t,n,o,s,i=e[135].quote+"",a=e[135].positivised_quote&&!e[135].show_paraphrased&&Tt(e);return{c(){t=m('"'),n=m(i),o=m('" '),a&&a.c(),s=f()},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i),a&&a.m(e,i),d(e,s,i)},p(e,t){1&t[0]&&i!==(i=e[135].quote+"")&&k(n,i),e[135].positivised_quote&&!e[135].show_paraphrased?a?a.p(e,t):(a=Tt(e),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){e&&u(t),e&&u(n),e&&u(o),a&&a.d(e),e&&u(s)}}}function xt(e){let t,n,o,s,i,a,c,r=e[135].positivised_quote+"";function l(){return e[51](e[135])}return{c(){t=g("strong"),t.textContent="(Paraphrased Feedback)",n=m(' "'),o=m(r),s=m('" \n                                                '),i=g("span"),i.textContent="(View original quote)",w(i,"class","clickable svelte-9kk1hw")},m(e,r){d(e,t,r),d(e,n,r),d(e,o,r),d(e,s,r),d(e,i,r),a||(c=v(i,"click",l),a=!0)},p(t,n){e=t,1&n[0]&&r!==(r=e[135].positivised_quote+"")&&k(o,r)},d(e){e&&u(t),e&&u(n),e&&u(o),e&&u(s),e&&u(i),a=!1,c()}}}function Tt(e){let t,n,o;function s(){return e[52](e[135])}return{c(){t=g("span"),t.textContent="(View paraphrased quote)",w(t,"class","clickable svelte-9kk1hw")},m(e,i){d(e,t,i),n||(o=v(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function Ft(e){let t,n="critical"===e[135].type&&vt(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"critical"===e[135].type?n?n.p(e,o):(n=vt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function $t(e){let t,n,o,s,i=e[133]+"";function a(){return e[64](e[116])}return{c(){t=g("button"),n=m(i),w(t,"class","tab svelte-9kk1hw"),F(t,"active",e[116]===e[13]),F(t,"right-bordered",e[116]<e[33].length-1)},m(e,i){d(e,t,i),l(t,n),o||(s=v(t,"click",a),o=!0)},p(n,o){e=n,8192&o[0]&&F(t,"active",e[116]===e[13])},d(e){e&&u(t),o=!1,s()}}}function St(t){let n,s,i,a,c,r,p,m,f,b,k,y,x,T,$,S,L;function C(e,t){return e[3].length>0?Nt:jt}let j=C(t),N=j(t),O=t[29]&&Et(t);function E(e,t){return 16&t[0]&&($=null),null==$&&($=!!(Object.keys(e[4]).length>0)),$?Rt:Pt}let P=E(t,[-1,-1,-1,-1,-1]),R=P(t);return{c(){n=g("div"),s=g("div"),i=g("div"),i.innerHTML='<span style="text-decoration: underline;"><strong>My Notes</strong></span>',a=h(),c=g("div"),N.c(),r=h(),O&&O.c(),p=h(),m=g("div"),f=g("button"),f.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                    Add Note',b=h(),k=g("button"),k.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                    Delete all',y=h(),x=g("div"),x.innerHTML='<span style="text-decoration: underline;"><strong>My Feedback Notes</strong></span>',T=h(),R.c(),w(i,"class","row centered"),_(i,"width","100%"),_(i,"height","auto"),w(c,"class","column bordered"),_(c,"width","100%"),_(c,"height","auto"),F(c,"centered",t[3].length<=0),w(f,"class","action-button centered column"),w(k,"class","action-button centered column"),w(m,"class","row centered spaced"),w(s,"class","column centered spaced padded"),_(s,"width","100%"),_(s,"height","auto"),w(x,"class","row centered"),_(x,"width","100%"),_(x,"height","auto"),w(n,"class","column spaced padded"),_(n,"width","100%"),_(n,"height","100%"),_(n,"overflow-y","auto")},m(e,o){d(e,n,o),l(n,s),l(s,i),l(s,a),l(s,c),N.m(c,null),l(c,r),O&&O.m(c,null),l(s,p),l(s,m),l(m,f),l(m,b),l(m,k),l(n,y),l(n,x),l(n,T),R.m(n,null),S||(L=[v(f,"click",t[103]),v(k,"click",t[104])],S=!0)},p(e,t){j===(j=C(e))&&N?N.p(e,t):(N.d(1),N=j(e),N&&(N.c(),N.m(c,r))),e[29]?O?O.p(e,t):(O=Et(e),O.c(),O.m(c,null)):O&&(O.d(1),O=null),8&t[0]&&F(c,"centered",e[3].length<=0),P===(P=E(e,t))&&R?R.p(e,t):(R.d(1),R=P(e),R&&(R.c(),R.m(n,null)))},i:e,o:e,d(e){e&&u(n),N.d(),O&&O.d(),R.d(),S=!1,o(L)}}}function Lt(e){let t,n,s,i,a,c,m,f,b,k,y,T,$,S,L,C,j,N=Object.keys(e[31]),O=[];for(let t=0;t<N.length;t+=1)O[t]=Ut(Ke(e,N,t));const E=[zt,It],R=[];function M(e,t){return e[6]?1:0}return $=M(e),S=R[$]=E[$](e),{c(){t=g("div"),n=g("div"),s=g("div"),i=g("span"),i.textContent="Model:",a=h(),c=g("select");for(let e=0;e<O.length;e+=1)O[e].c();m=h(),f=g("button"),b=g("img"),T=h(),S.c(),void 0===e[7]&&P((()=>e[70].call(c))),w(s,"class","row spaced centered"),_(s,"height","auto"),_(s,"width","100%"),F(s,"gone",e[6]),w(b,"class","action-icon"),r(b.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg")||w(b,"src",k),w(b,"alt",y=e[6]?"Exit chatbot settings":"Open chatbot settings"),_(b,"width","2.5rem"),_(b,"height","2.5rem"),w(f,"class","action-button"),w(n,"id","chatbot-header"),w(n,"class","padded row space-between svelte-9kk1hw"),w(t,"id","chatbot-tab-content"),w(t,"class","column svelte-9kk1hw")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,a),l(s,c);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(c,null);x(c,e[7],!0),l(n,m),l(n,f),l(f,b),l(t,T),R[$].m(t,null),L=!0,C||(j=[v(c,"change",e[70]),v(f,"click",e[71])],C=!0)},p(e,n){if(1&n[1]){let t;for(N=Object.keys(e[31]),t=0;t<N.length;t+=1){const o=Ke(e,N,t);O[t]?O[t].p(o,n):(O[t]=Ut(o),O[t].c(),O[t].m(c,null))}for(;t<O.length;t+=1)O[t].d(1);O.length=N.length}128&n[0]|1&n[1]&&x(c,e[7]),(!L||64&n[0])&&F(s,"gone",e[6]),(!L||64&n[0]&&!r(b.src,k=e[6]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg"))&&w(b,"src",k),(!L||64&n[0]&&y!==(y=e[6]?"Exit chatbot settings":"Open chatbot settings"))&&w(b,"alt",y);let o=$;$=M(e),$===o?R[$].p(e,n):(I(),G(R[o],1,1,(()=>{R[o]=null})),z(),S=R[$],S?S.p(e,n):(S=R[$]=E[$](e),S.c()),J(S,1),S.m(t,null))},i(e){L||(J(S),L=!0)},o(e){G(S),L=!1},d(e){e&&u(t),p(O,e),R[$].d(),C=!1,o(j)}}}function Ct(t){let n,o,s,i;function a(e,t){return e[5]&&e[5].video?rn:e[5]&&e[5].audio?cn:an}let c=a(t),r=c(t),p=t[5]&&t[5].transcript&&ln(t);return{c(){n=g("div"),o=g("div"),r.c(),s=h(),i=g("div"),p&&p.c(),w(o,"id","media-player-area"),w(o,"class","bordered svelte-9kk1hw"),w(i,"id","transcript-area"),w(i,"class","column bordered spaced svelte-9kk1hw"),w(n,"class","column padded spaced"),_(n,"width","100%"),_(n,"height","100%")},m(e,t){d(e,n,t),l(n,o),r.m(o,null),l(n,s),l(n,i),p&&p.m(i,null)},p(e,t){c===(c=a(e))&&r?r.p(e,t):(r.d(1),r=c(e),r&&(r.c(),r.m(o,null))),e[5]&&e[5].transcript?p?p.p(e,t):(p=ln(e),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&u(n),r.d(),p&&p.d()}}}function jt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded space-between centered")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Nt(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=Ot(Ye(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(8&s[0]|8192&s[1]){let i;for(n=e[3],i=0;i<n.length;i+=1){const a=Ye(e,n,i);o[i]?o[i].p(a,s):(o[i]=Ot(a),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Ot(e){let t,n,o,s,i,a,c,r,p,f=e[130]+"";function b(){return e[99](e[116],e[130])}return{c(){t=g("div"),n=g("p"),o=m(f),s=h(),i=g("div"),a=g("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Delete note" class="mini-icon"/>',c=h(),w(a,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,s),l(t,i),l(i,a),l(t,c),r||(p=v(a,"click",b),r=!0)},p(t,n){e=t,8&n[0]&&f!==(f=e[130]+"")&&k(o,f)},d(e){e&&u(t),r=!1,p()}}}function Et(e){let t,n,s,i,a,c,r,p,m;return{c(){t=g("div"),n=g("input"),s=h(),i=g("div"),a=g("button"),a.innerHTML='<img src="./logos/check-svgrepo-com.svg" alt="Confirm adding note" class="mini-icon"/>',c=h(),r=g("button"),r.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Cancel adding note" class="mini-icon"/>',w(n,"class","note-input svelte-9kk1hw"),w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(a,"class","action-button"),w(r,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,a),l(i,c),l(i,r),p||(m=[v(n,"input",e[100]),v(a,"click",e[101]),v(r,"click",e[102])],p=!0)},p(e,t){1073741824&t[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(m)}}}function Pt(t){let n;return{c(){n=g("div"),n.innerHTML='<div class="row space-between centered" style="width:100%; height:auto;"><span>No feedback notes added. Feel free to add notes on your feedback by clicking &quot;Add Note&quot; on any of the critical feedback.</span></div>',w(n,"class","column centered spaced padded"),_(n,"width","100%"),_(n,"height","auto")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Rt(e){let t,n=Object.keys(e[4]).map(Number).sort(gn),o=[];for(let t=0;t<n.length;t+=1)o[t]=qt(Ve(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(1073741841&s[0]|24576&s[1]){let i;for(n=Object.keys(e[4]).map(Number).sort(gn),i=0;i<n.length;i+=1){const a=Ve(e,n,i);o[i]?o[i].p(a,s):(o[i]=qt(a),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Mt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",w(n,"class","row padded centered space-between")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function At(e){let t,n=e[4][e[127]].notes,o=[];for(let t=0;t<n.length;t+=1)o[t]=Dt(Be(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(16&s[0]|8192&s[1]){let i;for(n=e[4][e[127]].notes,i=0;i<n.length;i+=1){const a=Be(e,n,i);o[i]?o[i].p(a,s):(o[i]=Dt(a),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Dt(e){let t,n,o,s,i,a,c,p,f,b,y,_,x=e[130]+"";function T(){return e[106](e[116],e[127],e[130])}return{c(){t=g("div"),n=g("p"),o=m(x),s=h(),i=g("div"),a=g("button"),c=g("img"),b=h(),r(c.src,p="./logos/delete-x-svgrepo-com.svg")||w(c,"src","./logos/delete-x-svgrepo-com.svg"),w(c,"alt",f="Delete note from Feedback ID"+e[127]),w(c,"class","mini-icon"),w(a,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(t,s),l(t,i),l(i,a),l(a,c),l(t,b),y||(_=v(a,"click",T),y=!0)},p(t,n){e=t,16&n[0]&&x!==(x=e[130]+"")&&k(o,x),16&n[0]&&f!==(f="Delete note from Feedback ID"+e[127])&&w(c,"alt",f)},d(e){e&&u(t),y=!1,_()}}}function Ht(e){let t,n,s,i,a,c,r,p,m;function f(){return e[108](e[127])}function b(){return e[109](e[127])}return{c(){t=g("div"),n=g("input"),s=h(),i=g("div"),a=g("button"),a.innerHTML='<img src="./logos/check-svgrepo-com.svg" alt="Confirm adding note" class="mini-icon"/>',c=h(),r=g("button"),r.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Cancel adding note" class="mini-icon"/>',w(n,"class","note-input svelte-9kk1hw"),w(n,"type","text"),w(n,"placeholder","Enter your note here"),w(a,"class","action-button"),w(r,"class","action-button"),w(i,"class","row spaced"),w(t,"class","row padded bordered space-between"),_(t,"width","100%"),_(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),y(n,e[30]),l(t,s),l(t,i),l(i,a),l(i,c),l(i,r),p||(m=[v(n,"input",e[107]),v(a,"click",f),v(r,"click",b)],p=!0)},p(t,o){e=t,1073741824&o[0]&&n.value!==e[30]&&y(n,e[30])},d(e){e&&u(t),p=!1,o(m)}}}function qt(e){let t,n,s,i,a,c,r,p,f,b,y,x,T,$,S,L,C,j,N,O,E,P,R,M,A=e[127]+"",D=e[0][e[127]-1].quote.slice(0,70)+"";function H(){return e[105](e[127])}function q(e,t){return e[4][e[127]].notes.length>0?At:Mt}let U=q(e),I=U(e),z=e[4][e[127]].is_adding&&Ht(e);function J(){return e[110](e[127])}function G(){return e[111](e[127])}return{c(){t=g("div"),n=g("div"),s=g("span"),i=g("strong"),a=m("Feedback #"),c=m(A),r=m(" Notes:"),p=h(),f=m(D),b=m("..."),y=h(),x=g("button"),x.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove feedback notes section" class="mini-icon"/>',T=h(),$=g("div"),I.c(),S=h(),z&&z.c(),L=h(),C=g("div"),j=g("button"),j.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                            Add Note',N=h(),O=g("button"),O.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                            Delete all',E=h(),w(x,"class","action-button"),w(n,"class","row space-between"),_(n,"width","100%"),_(n,"height","auto"),w($,"class","column bordered"),_($,"width","100%"),_($,"height","auto"),F($,"centered",e[4][e[127]].notes.length<=0),w(j,"class","action-button centered column"),w(O,"class","action-button centered column"),w(C,"class","row centered spaced"),w(t,"id",P="feedback-note-section-"+e[127]),w(t,"class","column centered spaced padded svelte-9kk1hw"),_(t,"width","100%"),_(t,"height","auto")},m(e,o){d(e,t,o),l(t,n),l(n,s),l(s,i),l(i,a),l(i,c),l(i,r),l(s,p),l(s,f),l(s,b),l(n,y),l(n,x),l(t,T),l(t,$),I.m($,null),l($,S),z&&z.m($,null),l(t,L),l(t,C),l(C,j),l(C,N),l(C,O),l(t,E),R||(M=[v(x,"click",H),v(j,"click",J),v(O,"click",G)],R=!0)},p(n,o){e=n,16&o[0]&&A!==(A=e[127]+"")&&k(c,A),17&o[0]&&D!==(D=e[0][e[127]-1].quote.slice(0,70)+"")&&k(f,D),U===(U=q(e))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m($,S))),e[4][e[127]].is_adding?z?z.p(e,o):(z=Ht(e),z.c(),z.m($,null)):z&&(z.d(1),z=null),16&o[0]&&F($,"centered",e[4][e[127]].notes.length<=0),16&o[0]&&P!==(P="feedback-note-section-"+e[127])&&w(t,"id",P)},d(e){e&&u(t),I.d(),z&&z.d(),R=!1,o(M)}}}function Ut(t){let n,o,s=t[122]+"";return{c(){n=g("option"),o=m(s),n.__value=t[122],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function It(e){let t,n,s,i,a,c,f,b,k,y,T,$,S,L,j,N,O,E,M,A,D,H,q,U,I,z,Q,X,K,Z,ee,te,ne,oe,se,ie,ae,re,le,de,ue,pe,ge,me,he,fe,ve=Object.keys(e[31]),be=[];for(let t=0;t<ve.length;t+=1)be[t]=Jt(Qe(e,ve,t));function we(t){e[90](t)}let ke={min:"0.0",max:"2.0",step:"0.1"};function ye(t){e[91](t)}void 0!==e[8]&&(ke.value=e[8]),S=new Ge({props:ke}),C.push((()=>V(S,"value",we)));let _e={min:"10.0",max:"4095.0",step:"1.0"};function xe(t){e[92](t)}function Te(t){e[93](t)}void 0!==e[9]&&(_e.value=e[9]),M=new Ge({props:_e}),C.push((()=>V(M,"value",ye)));let Fe={};function $e(e,t){return e[1].length>0?Vt:Gt}void 0!==e[25]&&(Fe.progress=e[25]),void 0!==e[24]&&(Fe.status=e[24]),Q=new ce({props:Fe}),C.push((()=>V(Q,"progress",xe))),C.push((()=>V(Q,"status",Te)));let Se=$e(e),Le=Se(e);return{c(){t=g("div"),n=g("div"),s=g("span"),s.innerHTML="<strong>Configurations</strong>",i=h(),a=g("div"),c=g("span"),c.textContent="Model:",f=h(),b=g("select");for(let e=0;e<be.length;e+=1)be[e].c();k=h(),y=g("div"),T=g("span"),T.textContent="Temperature:",$=h(),B(S.$$.fragment),j=h(),N=g("div"),O=g("span"),O.textContent="Max Output Tokens:",E=h(),B(M.$$.fragment),D=h(),H=g("div"),q=g("span"),q.innerHTML="<strong>Chatbot&#39;s Resources</strong>",U=h(),I=g("div"),z=g("div"),B(Q.$$.fragment),Z=h(),Le.c(),ee=h(),te=g("div"),ne=g("input"),oe=h(),se=g("button"),ie=g("img"),re=m("\n                                            Add Document"),le=h(),de=g("button"),ue=g("img"),ge=m("\n                                            Remove All"),void 0===e[7]&&P((()=>e[89].call(b))),w(a,"class","row spaced centered"),_(a,"height","auto"),_(a,"width","100%"),w(y,"class","row spaced"),_(y,"height","auto"),_(y,"width","100%"),w(N,"class","row spaced"),_(N,"height","auto"),_(N,"width","100%"),w(n,"id","chatbot-configurations"),w(n,"class","column centered spaced padded bordered svelte-9kk1hw"),w(z,"class","overlay centered padded"),F(z,"invisible",!1===e[26]),w(I,"id","chatbot-rag-sources"),w(I,"class","column centered spaced padded bordered"),_(I,"width","100%"),_(I,"height","auto"),_(I,"overflow-y","auto"),w(ne,"type","file"),w(ne,"id","document_file_input"),w(ne,"class","gone"),r(ie.src,ae="./logos/add-ellipse-svgrepo-com.svg")||w(ie,"src","./logos/add-ellipse-svgrepo-com.svg"),w(ie,"alt","Add document"),w(ie,"class","action-icon"),se.disabled=e[26],w(se,"class","centered spaced column action-button"),r(ue.src,pe="./logos/delete-svgrepo-com.svg")||w(ue,"src","./logos/delete-svgrepo-com.svg"),w(ue,"alt","Remove all documents"),w(ue,"class","action-icon"),de.disabled=e[26],w(de,"class","centered spaced column action-button"),w(te,"id","chatbot-rag-buttons"),w(te,"class","row centered padded spaced"),_(te,"width","100%"),_(te,"height","auto"),w(H,"id","chatbot-rag-panel"),w(H,"class","column centered spaced padded bordered svelte-9kk1hw"),w(t,"id","chatbot-settings"),w(t,"class","column padded spaced"),_(t,"width","100%"),_(t,"height","95%")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(n,i),l(n,a),l(a,c),l(a,f),l(a,b);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(b,null);x(b,e[7],!0),l(n,k),l(n,y),l(y,T),l(y,$),Y(S,y,null),l(n,j),l(n,N),l(N,O),l(N,E),Y(M,N,null),l(t,D),l(t,H),l(H,q),l(H,U),l(H,I),l(I,z),Y(Q,z,null),l(I,Z),Le.m(I,null),l(H,ee),l(H,te),l(te,ne),e[95](ne),l(te,oe),l(te,se),l(se,ie),l(se,re),l(te,le),l(te,de),l(de,ue),l(de,ge),me=!0,he||(fe=[v(b,"change",e[89]),v(ne,"change",e[96]),v(se,"click",e[97]),v(de,"click",e[98])],he=!0)},p(e,t){if(1&t[1]){let n;for(ve=Object.keys(e[31]),n=0;n<ve.length;n+=1){const o=Qe(e,ve,n);be[n]?be[n].p(o,t):(be[n]=Jt(o),be[n].c(),be[n].m(b,null))}for(;n<be.length;n+=1)be[n].d(1);be.length=ve.length}128&t[0]|1&t[1]&&x(b,e[7]);const n={};!L&&256&t[0]&&(L=!0,n.value=e[8],R((()=>L=!1))),S.$set(n);const o={};!A&&512&t[0]&&(A=!0,o.value=e[9],R((()=>A=!1))),M.$set(o);const s={};!X&&33554432&t[0]&&(X=!0,s.progress=e[25],R((()=>X=!1))),!K&&16777216&t[0]&&(K=!0,s.status=e[24],R((()=>K=!1))),Q.$set(s),(!me||67108864&t[0])&&F(z,"invisible",!1===e[26]),Se===(Se=$e(e))&&Le?Le.p(e,t):(Le.d(1),Le=Se(e),Le&&(Le.c(),Le.m(I,null))),(!me||67108864&t[0])&&(se.disabled=e[26]),(!me||67108864&t[0])&&(de.disabled=e[26])},i(e){me||(J(S.$$.fragment,e),J(M.$$.fragment,e),J(Q.$$.fragment,e),me=!0)},o(e){G(S.$$.fragment,e),G(M.$$.fragment,e),G(Q.$$.fragment,e),me=!1},d(n){n&&u(t),p(be,n),W(S),W(M),W(Q),Le.d(),e[95](null),he=!1,o(fe)}}}function zt(e){let t,n,s,i,a,c,m,f,k,x,T,$,S,L,j,N,O,E,P,M,A,D,H,q,U,I,z,Q,X,K,Z,ee,te,ne,oe,se,ie,ae,re,le,de,ue,pe,ge,me,he,fe,ve=e[2],be=[];for(let t=0;t<ve.length;t+=1)be[t]=en(Xe(e,ve,t));function we(t){e[76](t)}function ke(t){e[77](t)}let ye={};function _e(e,t){return e[15]?nn:tn}void 0!==e[23]&&(ye.progress=e[23]),void 0!==e[22]&&(ye.status=e[22]),f=new ce({props:ye}),C.push((()=>V(f,"progress",we))),C.push((()=>V(f,"status",ke)));let xe=_e(e),Te=xe(e);function Fe(e,t){return e[17]?sn:on}let $e=Fe(e),Se=$e(e);return{c(){t=g("div"),n=g("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",s=h();for(let e=0;e<be.length;e+=1)be[e].c();i=h(),a=g("div"),c=g("p"),c.innerHTML="<strong>assistant:</strong>",m=h(),B(f.$$.fragment),T=h(),$=g("div"),S=h(),L=g("div"),j=g("div"),N=g("div"),O=g("span"),O.innerHTML="<strong>Feedback Context:</strong>",E=h(),Te.c(),M=h(),A=g("div"),D=g("span"),D.innerHTML="<strong>Suggested messages:</strong>",H=h(),q=g("div"),q.textContent="Explain feedback.",U=h(),I=g("div"),I.textContent="Brainstorm actions.",Q=h(),X=g("div"),Se.c(),Z=h(),ee=g("div"),te=g("div"),ne=g("label"),oe=h(),se=g("input"),ie=h(),ae=g("button"),ae.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon"/>',re=h(),le=g("textarea"),de=h(),ue=g("button"),pe=g("img"),w(n,"class","assistant padded svelte-9kk1hw"),w(a,"class","assistant padded column svelte-9kk1hw"),F(a,"invisible",!1===e[21]),_($,"height","20%"),_($,"width","100%"),_($,"background-color","white"),_($,"color","white"),_($,"cursor","default"),w(t,"id","chatbot-messages"),w(t,"class","column spaced bordered padded svelte-9kk1hw"),w(N,"id","contexts"),w(N,"class","column centered bordered svelte-9kk1hw"),w(N,"style",P=e[17]?"width:30%;":"width:45%;"),w(q,"class","suggested-message svelte-9kk1hw"),w(I,"class","suggested-message svelte-9kk1hw"),w(A,"id","suggested-messages"),w(A,"class","column centered bordered svelte-9kk1hw"),w(A,"style",z=e[17]?"width:30%;":"width:45%;"),w(X,"id","visual-context"),w(X,"class","column centered bordered svelte-9kk1hw"),w(X,"style",K=e[17]?"width:30%;":"display:none;"),w(j,"id","chatbot-utilities"),w(j,"class","row centered spaced svelte-9kk1hw"),w(ne,"for","image_upload"),_(ne,"display","none"),w(se,"accept","image/png, image/jpeg"),w(se,"type","file"),_(se,"display","none"),w(se,"id","image_upload"),w(se,"name","image_upload"),w(ae,"class","action-button centered column"),w(te,"class","column spaced"),_(le,"width","100%"),_(le,"height","100%"),w(le,"placeholder","Type your message here..."),w(le,"id","textarea"),r(pe.src,ge="./logos/send-svgrepo-com.svg")||w(pe,"src","./logos/send-svgrepo-com.svg"),w(pe,"alt","Send"),w(pe,"class","action-icon"),w(ue,"class","action-button centered column"),ue.disabled=e[21],w(ee,"id","chatbot-input"),w(ee,"class","row spaced centered svelte-9kk1hw"),w(L,"id","chatbot-actions"),w(L,"class","column padded spaced centered svelte-9kk1hw")},m(o,r){d(o,t,r),l(t,n),l(t,s);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(t,null);l(t,i),l(t,a),l(a,c),l(a,m),Y(f,a,null),l(t,T),l(t,$),d(o,S,r),d(o,L,r),l(L,j),l(j,N),l(N,O),l(N,E),Te.m(N,null),l(j,M),l(j,A),l(A,D),l(A,H),l(A,q),l(A,U),l(A,I),l(j,Q),l(j,X),Se.m(X,null),l(L,Z),l(L,ee),l(ee,te),l(te,ne),l(te,oe),l(te,se),e[83](se),l(te,ie),l(te,ae),l(ee,re),l(ee,le),y(le,e[11]),l(ee,de),l(ee,ue),l(ue,pe),me=!0,he||(fe=[v(q,"click",b(e[79])),v(I,"click",b(e[80])),v(se,"change",e[82]),v(se,"change",e[84]),v(ae,"click",b(e[85])),v(le,"input",e[86]),v(le,"keydown",e[87]),v(ue,"click",b(e[88]))],he=!0)},p(e,n){if(2105372&n[0]|4096&n[1]){let o;for(ve=e[2],o=0;o<ve.length;o+=1){const s=Xe(e,ve,o);be[o]?be[o].p(s,n):(be[o]=en(s),be[o].c(),be[o].m(t,i))}for(;o<be.length;o+=1)be[o].d(1);be.length=ve.length}const o={};!k&&8388608&n[0]&&(k=!0,o.progress=e[23],R((()=>k=!1))),!x&&4194304&n[0]&&(x=!0,o.status=e[22],R((()=>x=!1))),f.$set(o),(!me||2097152&n[0])&&F(a,"invisible",!1===e[21]),xe===(xe=_e(e))&&Te?Te.p(e,n):(Te.d(1),Te=xe(e),Te&&(Te.c(),Te.m(N,null))),(!me||131072&n[0]&&P!==(P=e[17]?"width:30%;":"width:45%;"))&&w(N,"style",P),(!me||131072&n[0]&&z!==(z=e[17]?"width:30%;":"width:45%;"))&&w(A,"style",z),$e===($e=Fe(e))&&Se?Se.p(e,n):(Se.d(1),Se=$e(e),Se&&(Se.c(),Se.m(X,null))),(!me||131072&n[0]&&K!==(K=e[17]?"width:30%;":"display:none;"))&&w(X,"style",K),2048&n[0]&&y(le,e[11]),(!me||2097152&n[0])&&(ue.disabled=e[21])},i(e){me||(J(f.$$.fragment,e),me=!0)},o(e){G(f.$$.fragment,e),me=!1},d(n){n&&u(t),p(be,n),W(f),n&&u(S),n&&u(L),Te.d(),Se.d(),e[83](null),he=!1,o(fe)}}}function Jt(t){let n,o,s=t[122]+"";return{c(){n=g("option"),o=m(s),n.__value=t[122],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function Gt(t){let n;return{c(){n=g("span"),n.textContent="No resources available."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Vt(e){let t,n=e[1],o=[];for(let t=0;t<n.length;t+=1)o[t]=Bt(We(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=f()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,s){if(117440514&s[0]|1024&s[1]){let i;for(n=e[1],i=0;i<n.length;i+=1){const a=We(e,n,i);o[i]?o[i].p(a,s):(o[i]=Bt(a),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Bt(e){let t,n,o,s,i,a,c,p,f,y=e[120]+"";function _(){return e[94](e[120],e[116])}return{c(){t=g("div"),n=m(y),o=h(),s=g("button"),i=g("img"),c=h(),r(i.src,a="./logos/delete-x-svgrepo-com.svg")||w(i,"src","./logos/delete-x-svgrepo-com.svg"),w(i,"alt","Remove document"),w(i,"class","mini-icon"),s.disabled=e[26],w(s,"class","action-button"),w(t,"class","row centered spaced centered")},m(e,a){d(e,t,a),l(t,n),l(t,o),l(t,s),l(s,i),l(t,c),p||(f=v(s,"click",b(_)),p=!0)},p(t,o){e=t,2&o[0]&&y!==(y=e[120]+"")&&k(n,y),67108864&o[0]&&(s.disabled=e[26])},d(e){e&&u(t),p=!1,f()}}}function Yt(e){let t,n,s,i,a,c,r,p,f,b,y,_,x,T,F,$,S,L,C,j,N,O,E,P,R,M=e[117].role+"",A=e[117].content+"",D="context"in e[117]&&Wt(e),H="image"in e[117]&&Qt(e);function q(){return e[72](e[117])}let U="context"in e[117]&&Xt(e);function I(){return e[74](e[117])}let z="user"===e[117].role&&Kt(e),J="image"in e[117]&&"user"===e[117].role&&Zt(e);return{c(){t=g("div"),n=g("div"),s=g("div"),D&&D.c(),i=h(),H&&H.c(),a=h(),c=g("div"),r=g("button"),r.innerHTML='<small>Add to My Notes</small> \n                                                        <img src="./logos/note-svgrepo-com.svg" alt="Add to my notes" class="mini-icon"/>',p=h(),U&&U.c(),f=h(),b=g("div"),y=g("button"),y.innerHTML='<img src="./logos/copy-svgrepo-com.svg" alt="Copy note" class="mini-icon"/>',_=h(),z&&z.c(),T=h(),F=g("div"),$=g("strong"),S=m(M),L=m(":"),C=h(),j=g("md-block"),N=m(A),O=h(),J&&J.c(),w(s,"class","row spaced"),w(r,"class","action-button row spaced centered"),w(y,"class","action-button column centered"),w(b,"class","row"),w(c,"class","row spaced"),w(n,"class",x="message-header row "+("context"in e[117]||"image"in e[117]?"with-context":"no-context")+" svelte-9kk1hw"),w(F,"class","row"),w(t,"class",E=e[117].role+" padded column spaced svelte-9kk1hw")},m(e,o){d(e,t,o),l(t,n),l(n,s),D&&D.m(s,null),l(s,i),H&&H.m(s,null),l(n,a),l(n,c),l(c,r),l(c,p),U&&U.m(c,null),l(c,f),l(c,b),l(b,y),l(b,_),z&&z.m(b,null),l(t,T),l(t,F),l(F,$),l($,S),l($,L),l(F,C),l(F,j),l(j,N),l(t,O),J&&J.m(t,null),P||(R=[v(r,"click",q),v(y,"click",I)],P=!0)},p(o,a){"context"in(e=o)[117]?D?D.p(e,a):(D=Wt(e),D.c(),D.m(s,i)):D&&(D.d(1),D=null),"image"in e[117]?H?H.p(e,a):(H=Qt(e),H.c(),H.m(s,null)):H&&(H.d(1),H=null),"context"in e[117]?U?U.p(e,a):(U=Xt(e),U.c(),U.m(c,f)):U&&(U.d(1),U=null),"user"===e[117].role?z?z.p(e,a):(z=Kt(e),z.c(),z.m(b,null)):z&&(z.d(1),z=null),4&a[0]&&x!==(x="message-header row "+("context"in e[117]||"image"in e[117]?"with-context":"no-context")+" svelte-9kk1hw")&&w(n,"class",x),4&a[0]&&M!==(M=e[117].role+"")&&k(S,M),4&a[0]&&A!==(A=e[117].content+"")&&k(N,A),"image"in e[117]&&"user"===e[117].role?J?J.p(e,a):(J=Zt(e),J.c(),J.m(t,null)):J&&(J.d(1),J=null),4&a[0]&&E!==(E=e[117].role+" padded column spaced svelte-9kk1hw")&&w(t,"class",E)},d(e){e&&u(t),D&&D.d(),H&&H.d(),U&&U.d(),z&&z.d(),J&&J.d(),P=!1,o(R)}}}function Wt(e){let t,n,o,s,i,a,c=e[117].context.id+"",r=(e[117].context.quote.length>40?e[117].context.quote.slice(0,40)+"...":e[117].context.quote)+"";return{c(){t=g("div"),n=g("small"),o=m("Context: F#"),s=m(c),i=h(),a=m(r),w(t,"class","context-tag feedback svelte-9kk1hw")},m(e,c){d(e,t,c),l(t,n),l(n,o),l(n,s),l(n,i),l(n,a)},p(e,t){4&t[0]&&c!==(c=e[117].context.id+"")&&k(s,c),4&t[0]&&r!==(r=(e[117].context.quote.length>40?e[117].context.quote.slice(0,40)+"...":e[117].context.quote)+"")&&k(a,r)},d(e){e&&u(t)}}}function Qt(e){let t,n,o,s="user"===e[117].role?"Attached image":"Response to image";return{c(){t=g("div"),n=g("small"),o=m(s),w(t,"class","context-tag image svelte-9kk1hw")},m(e,s){d(e,t,s),l(t,n),l(n,o)},p(e,t){4&t[0]&&s!==(s="user"===e[117].role?"Attached image":"Response to image")&&k(o,s)},d(e){e&&u(t)}}}function Xt(e){let t,n,o,s,i,a,c,p,f,b,y=e[117].context.id+"";function _(){return e[73](e[117])}return{c(){t=g("button"),n=g("small"),o=m("Add to F#"),s=m(y),i=m(" Notes"),a=h(),c=g("img"),r(c.src,p="./logos/note-svgrepo-com.svg")||w(c,"src","./logos/note-svgrepo-com.svg"),w(c,"alt","Add feedback note"),w(c,"class","mini-icon"),w(t,"class","action-button row spaced centered")},m(e,r){d(e,t,r),l(t,n),l(n,o),l(n,s),l(n,i),l(t,a),l(t,c),f||(b=v(t,"click",_),f=!0)},p(t,n){e=t,4&n[0]&&y!==(y=e[117].context.id+"")&&k(s,y)},d(e){e&&u(t),f=!1,b()}}}function Kt(e){let t,n,o,s,i;function a(){return e[75](e[117])}return{c(){t=g("button"),n=g("img"),r(n.src,o="./logos/delete-x-svgrepo-com.svg")||w(n,"src","./logos/delete-x-svgrepo-com.svg"),w(n,"alt","Delete message"),w(n,"class","mini-icon"),t.disabled=e[21],w(t,"class","action-button column centered")},m(e,o){d(e,t,o),l(t,n),s||(i=v(t,"click",a),s=!0)},p(n,o){e=n,2097152&o[0]&&(t.disabled=e[21])},d(e){e&&u(t),s=!1,i()}}}function Zt(e){let t,n,o;return{c(){t=g("div"),n=g("img"),r(n.src,o=e[117].image)||w(n,"src",o),w(n,"alt","Visual context"),_(n,"width","50%"),_(n,"height","auto"),w(t,"class","column centered"),_(t,"width","100%")},m(e,o){d(e,t,o),l(t,n)},p(e,t){4&t[0]&&!r(n.src,o=e[117].image)&&w(n,"src",o)},d(e){e&&u(t)}}}function en(e){let t,n="system"!=e[117].role&&Yt(e);return{c(){n&&n.c(),t=f()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"system"!=e[117].role?n?n.p(e,o):(n=Yt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function tn(t){let n;return{c(){n=g("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function nn(e){let t,n,o,s,i,a,c,r,p,f,y,_=e[15].id+"",x=e[15].quote.slice(0,30)+"";return{c(){t=g("div"),n=g("span"),o=m("F#"),s=m(_),i=m(":"),a=m(x),c=m("..."),r=h(),p=g("button"),p.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon"/>',w(t,"class","suggested-message row  svelte-9kk1hw")},m(u,g){d(u,t,g),l(t,n),l(n,o),l(n,s),l(n,i),l(n,a),l(n,c),l(t,r),l(t,p),f||(y=v(p,"click",b(e[78])),f=!0)},p(e,t){32768&t[0]&&_!==(_=e[15].id+"")&&k(s,_),32768&t[0]&&x!==(x=e[15].quote.slice(0,30)+"")&&k(a,x)},d(e){e&&u(t),f=!1,y()}}}function on(t){return{c:e,m:e,p:e,d:e}}function sn(e){let t,n,o,s,i,a,c,p,m;return{c(){t=g("span"),t.innerHTML="<strong>Attached image:</strong>",n=h(),o=g("div"),s=g("img"),a=h(),c=g("button"),c.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove image" class="mini-icon"/>',r(s.src,i=e[17])||w(s,"src",i),w(s,"alt","Visual context"),_(s,"width","100%"),_(s,"height","100%"),w(o,"class","row"),_(o,"width","100%"),_(o,"height","100%")},m(i,r){d(i,t,r),d(i,n,r),d(i,o,r),l(o,s),l(o,a),l(o,c),p||(m=v(c,"click",b(e[81])),p=!0)},p(e,t){131072&t[0]&&!r(s.src,i=e[17])&&w(s,"src",i)},d(e){e&&u(t),e&&u(n),e&&u(o),p=!1,m()}}}function an(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||w(n,"src","video.mp4"),n.controls=!0,_(n,"width","100%"),_(n,"height","100%")},m(e,o){d(e,n,o),t[67](n)},p:e,d(e){e&&u(n),t[67](null)}}}function cn(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[5].audio)||w(t,"src",n),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(n,o){d(n,t,o),e[66](t)},p(e,o){32&o[0]&&!r(t.src,n=e[5].audio)&&w(t,"src",n)},d(n){n&&u(t),e[66](null)}}}function rn(e){let t,n,o,s;return{c(){t=g("video"),n=g("track"),w(n,"kind","captions"),r(n.src,o="blank.vtt")||w(n,"src","blank.vtt"),w(n,"srclang","en"),r(t.src,s=e[5].video)||w(t,"src",s),t.controls=!0,_(t,"width","100%"),_(t,"height","100%")},m(o,s){d(o,t,s),l(t,n),e[65](t)},p(e,n){32&n[0]&&!r(t.src,s=e[5].video)&&w(t,"src",s)},d(n){n&&u(t),e[65](null)}}}function ln(e){let t,n=e[5].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=dn(Ze(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();w(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,s){if(1056&s[0]){let i;for(n=e[5].transcript_list,i=0;i<n.length;i+=1){const a=Ze(e,n,i);o[i]?o[i].p(a,s):(o[i]=dn(a),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function dn(e){let t,n,s,i,a,c,r,p,f,b,y,_,x,T,F,$,S,L,C,j,N,O=e[114].start_timestamp+"",E=e[114].end_timestamp+"",P=e[114].speaker?e[114].speaker+":":"",R=e[114].dialogue+"";function M(){return e[68](e[114])}function A(){return e[69](e[114])}return{c(){t=g("span"),n=m("["),s=m(O),i=m("]"),a=m(" - "),c=g("span"),r=m("["),p=m(E),f=m("]"),b=h(),y=g("br"),_=h(),x=m(P),T=h(),F=g("span"),S=h(),L=g("br"),C=g("br"),w(t,"class","timestamp svelte-9kk1hw"),w(c,"class","timestamp svelte-9kk1hw"),w(F,"id",$=e[114].id),w(F,"class","svelte-9kk1hw")},m(e,o){d(e,t,o),l(t,n),l(t,s),l(t,i),d(e,a,o),d(e,c,o),l(c,r),l(c,p),l(c,f),d(e,b,o),d(e,y,o),d(e,_,o),d(e,x,o),d(e,T,o),d(e,F,o),F.innerHTML=R,d(e,S,o),d(e,L,o),d(e,C,o),j||(N=[v(t,"click",M),v(c,"click",A)],j=!0)},p(t,n){e=t,32&n[0]&&O!==(O=e[114].start_timestamp+"")&&k(s,O),32&n[0]&&E!==(E=e[114].end_timestamp+"")&&k(p,E),32&n[0]&&P!==(P=e[114].speaker?e[114].speaker+":":"")&&k(x,P),32&n[0]&&R!==(R=e[114].dialogue+"")&&(F.innerHTML=R),32&n[0]&&$!==($=e[114].id)&&w(F,"id",$)},d(e){e&&u(t),e&&u(a),e&&u(c),e&&u(b),e&&u(y),e&&u(_),e&&u(x),e&&u(T),e&&u(F),e&&u(S),e&&u(L),e&&u(C),j=!1,o(N)}}}function un(e){let t,n,o,s,i,a,c,r,m,f,b,k,y,x,T,F,$,S=e[32],L=[];for(let t=0;t<S.length;t+=1)L[t]=st(ot(e,S,t));function C(e,t){return 0===e[14]?at:1===e[14]?it:void 0}let j=C(e),N=j&&j(e),O=e[33],E=[];for(let t=0;t<O.length;t+=1)E[t]=$t(et(e,O,t));const P=[Ct,Lt,St],R=[];function M(e,t){return 0===e[13]?0:1===e[13]?1:2===e[13]?2:-1}return~(y=M(e))&&(x=R[y]=P[y](e)),{c(){t=g("div"),n=g("div"),o=g("div"),s=g("div");for(let e=0;e<L.length;e+=1)L[e].c();i=h(),a=g("div"),N&&N.c(),c=h(),r=g("div"),m=g("div"),f=g("div");for(let e=0;e<E.length;e+=1)E[e].c();b=h(),k=g("div"),x&&x.c(),w(s,"class","tab-header svelte-9kk1hw"),w(a,"class","tab-content padded svelte-9kk1hw"),_(a,"overflow-y","auto"),w(o,"class","tabbed-area bordered svelte-9kk1hw"),w(n,"id","left-panel"),w(n,"class","column svelte-9kk1hw"),w(f,"class","tab-header svelte-9kk1hw"),w(k,"class","tab-content column svelte-9kk1hw"),w(m,"class","tabbed-area bordered svelte-9kk1hw"),w(r,"id","right-panel"),w(r,"class","column  svelte-9kk1hw"),w(t,"id","feedback-list-page"),w(t,"class","spaced svelte-9kk1hw")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(o,s);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(s,null);l(o,i),l(o,a),N&&N.m(a,null),l(t,c),l(t,r),l(r,m),l(m,f);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(f,null);l(m,b),l(m,k),~y&&R[y].m(k,null),T=!0,F||($=v(t,"window:click",e[36]),F=!0)},p(e,t){if(16384&t[0]|2&t[1]){let n;for(S=e[32],n=0;n<S.length;n+=1){const o=ot(e,S,n);L[n]?L[n].p(o,t):(L[n]=st(o),L[n].c(),L[n].m(s,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=S.length}if(j===(j=C(e))&&N?N.p(e,t):(N&&N.d(1),N=j&&j(e),N&&(N.c(),N.m(a,null))),8192&t[0]|4&t[1]){let n;for(O=e[33],n=0;n<O.length;n+=1){const o=et(e,O,n);E[n]?E[n].p(o,t):(E[n]=$t(o),E[n].c(),E[n].m(f,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=O.length}let n=y;y=M(e),y===n?~y&&R[y].p(e,t):(x&&(I(),G(R[n],1,1,(()=>{R[n]=null})),z()),~y?(x=R[y],x?x.p(e,t):(x=R[y]=P[y](e),x.c()),J(x,1),x.m(k,null)):x=null)},i(e){T||(J(x),T=!0)},o(e){G(x),T=!1},d(e){e&&u(t),p(L,e),N&&N.d(),p(E,e),~y&&R[y].d(),F=!1,$()}}}function pn(e,t=!0){e.show_paraphrased=t}const gn=(e,t)=>e-t;function mn(e,t,n){let o,s,i,a,c,r,l,d,{feedback_list:u}=t,{recording:p}=t,{documents:g=[]}=t,{chatbot_messages:m=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]}=t,{my_notes:h=[]}=t,{feedback_notes:f={}}=t,v=!1,b={"GPT-4o":"gpt-4o","GPT-4o Mini":"gpt-4o-mini","The Interior Design Reference & Specification GPT":"ft:gpt-4o-mini-2024-07-18:im-lab:the-interior-des:9p9NTD1W","Planning and Designers Handbook GPT":"ft:gpt-4o-mini-2024-07-18:im-lab:planning-and-des:9p9vtdRF","Interior Design Illustrated GPT":"ft:gpt-4o-mini-2024-07-18:im-lab:int-illustrated:9qXQyPfI"},w="GPT-4o",k=0,y=256,_="",x=0,F=0,$=["Critical Feedback","Positive Feedback"],S=["Transcript","Chatbot","Notes"],L=!1,j="",N=0,O="",E=0,P=!1;function R(e){s===e&&n(12,s=null),n(0,u=u.filter((t=>t!==e))),n(0,u)}function M(e,t){n(12,s=e),t.stopPropagation()}let A=null,D=!0;function H(e){A===e?n(28,D=!D):(n(27,A=e),n(28,D=!0)),u.sort(((t,n)=>t[e]<n[e]?D?-1:1:t[e]>n[e]?D?1:-1:0)),n(0,u)}async function q(e,t=null){let o=e.slice();if(L)return void alert("Please wait for the current message to be processed.");if(n(21,L=!0),""===e.trim())return void alert("Please enter a message.");let s={role:"user",content:e};if(t){s.context=t;let e="\n\nHere is the piece of feedback as context.";e+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',o+=e}let i={message:o,image_data:null,max_output_tokens:y,temperature:k,model:b[w]};if(c&&(s.image=c),a){n(22,j="Uploading image..."),n(23,N=30);let e=await async function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)}))}(a);i.image_data=e,s.image_path=await async function(e){const t=await fetch("/save_image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_data:e})});if(!t.ok)throw new Error("Failed to save image");return(await t.json()).image_path}(e),i.image_path=s.image_path}m.push(s),n(2,m),console.log(m),n(0,u),await de(m),n(22,j="Thinking..."),n(23,N=50);const r=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!r.ok)throw new Error("Failed to send message");let l=(await r.json()).chatbot_response;n(22,j="Done!"),n(23,N=100),await Z(1200),await te("FeedbackList: Sent message",[e,t,c]);let d={role:"assistant",content:l};t&&(d.context=t),c&&(d.image=c),m.push(d),n(2,m),n(0,u),await de(m),n(21,L=!1),n(23,N=0)}function U(e){i===e?alert("This feedback is already added as context."):n(15,i=e)}async function I(e){const t=e.target.files;if(t)for(const e of t){const t=new FormData;t.append("file",e),n(25,E=50),n(24,O="Adding document... (this may take a while)");const o=await fetch("/add_document",{method:"POST",body:t});if(!o.ok)return null;let s=(await o.json()).document_name;g.push(s),n(1,g),n(24,O="Done!"),n(25,E=100),await Z(1200)}}async function z(e,t){return(await fetch("/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})).ok?(g.splice(t,1),n(1,g),e):console.log(`Failed to delete document ${e}`)}async function J(){n(24,O="Removing all documents...");for(let e=0;e<g.length;e++){let t=g[e];n(25,E=e/g.length*100);try{await z(t,e)}catch(e){console.error(`Error deleting document ${t}:`,e)}}1===g.length&&await z(g[0],0),n(24,O="Done!"),n(25,E=100),await Z(1e3),n(25,E=0)}let G=!1,V="";async function B(e,t=null,o=null){""!=e.trim()?t?t in f?(f[t].notes.push(e),n(4,f)):n(4,f[t]={notes:[e],is_adding:!1},f):(h.push(e),n(3,h)):alert("Please enter a note.")}async function Y(e,t=null){t?(f[t].notes.splice(e,1),n(4,f)):(h.splice(e,1),n(3,h))}async function W(e=null){n(29,G=!1),B(V,e),n(30,V="")}return e.$$set=e=>{"feedback_list"in e&&n(0,u=e.feedback_list),"recording"in e&&n(5,p=e.recording),"documents"in e&&n(1,g=e.documents),"chatbot_messages"in e&&n(2,m=e.chatbot_messages),"my_notes"in e&&n(3,h=e.my_notes),"feedback_notes"in e&&n(4,f=e.feedback_notes)},[u,g,m,h,f,p,v,w,k,y,o,_,s,x,F,i,a,c,r,l,d,L,j,N,O,E,P,A,D,G,V,b,$,S,R,M,function(){n(12,s=null)},H,q,U,I,z,J,B,Y,W,async e=>{n(14,F=e),await te("FeedbackList: Switched left panel tab",$[F])},async()=>{H("quote"),await te("FeedbackList: Sorted feedback","quote")},async()=>{H("speaker"),await te("FeedbackList: Sorted feedback","speaker")},async()=>{H("done"),await te("FeedbackList: Sorted feedback","done")},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{pn(e,!1),await te("FeedbackList: Show original quote",e.original_quote)},async e=>{pn(e,!0),await te("FeedbackList: Show paraphrased quote",e.positivised_quote)},async(e,t,o)=>{n(0,t[o].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),u),pn(e,!0),n(0,u),await te("FeedbackList: Positivize Quote",e)},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in f?n(4,f[e.id].is_adding=!0,f):n(4,f[e.id]={notes:[],is_adding:!0},f)},async e=>{window.confirm("Are you sure you want to delete this feedback? This cannot be undone.")&&(R(e),await le(u),await te("FeedbackList: Remove critical feedback",e))},function(e,t){e[t].done=this.checked,n(0,u)},async(e,t)=>{M(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ne(e.excerpt_reference.start_timestamp,o),await te("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{n(13,x=1),U(e),await te("FeedbackList: Select as context",i)},async e=>{n(13,x=2),e.id in f?n(4,f[e.id].is_adding=!0,f):n(4,f[e.id]={notes:[],is_adding:!0},f)},async e=>{R(e),await le(u),await te("FeedbackList: Remove positive feedback",e)},async(e,t)=>{M(e,t),oe(e),await te("FeedbackList: Selected feedback",e)},async e=>{n(13,x=e),await te("FeedbackList: Switched right panel tab",S[x])},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},function(e){C[e?"unshift":"push"]((()=>{o=e,n(10,o)}))},async e=>{ne(e.start_timestamp,o),await te("FeedbackList: Seek to start timestamp",e.start_timestamp)},async e=>{ne(e.end_timestamp,o),await te("FeedbackList: Seek to end timestamp",e.end_timestamp)},function(){w=T(this),n(7,w),n(31,b)},async()=>{n(6,v=!v),await te("FeedbackList: Toggled chatbot settings",v)},async e=>{n(13,x=2),B(e.role+": "+e.content),await ue(h),await te("FeedbackList: Added note to My Notes",e)},async e=>{n(13,x=2),B(e.role+": "+e.content,"id"in e.context?e.context.id:null),await pe(f),await te("FeedbackList: Added note to Feedback ID"+e.context.id,e)},async e=>{se(e.role+": "+e.content),await te("FeedbackList: Copied message",e)},async e=>{if(!window.confirm("Are you sure you want to delete this message? This cannot be undone."))return;let t=m.indexOf(e),o=t+1,s=m[o];await fetch("/remove_from_backend_chatbot_messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message_idx:t,assistant_message_idx:o})}),n(2,m=m.filter((t=>t!==e))),"assistant"===s.role&&n(2,m=m.filter((e=>e!==s))),n(2,m),await de(m),await te("FeedbackList: Removed message",e)},function(e){N=e,n(23,N)},function(e){j=e,n(22,j)},async()=>{await te("FeedbackList: Removed context",i),n(15,i=null)},async()=>{L||await q("Can you paraphrase the following feedback positively?",i)},async()=>{L||await q("Can you brainstorm a set of actions to address the following feedback?",i)},async()=>{await te("FeedbackList: Removed image",c),n(17,c=null),n(16,a=null)},function(){r=this.value,n(18,r)},function(e){C[e?"unshift":"push"]((()=>{l=e,n(19,l)}))},async()=>{n(18,r=l.files),n(17,[c,a]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return console.log(t),[URL.createObjectURL(t),t];alert("Please select an image file.")}else console.log("No image selected.");return null}(r),c,n(16,a)),await te(c?"FeedbackList: Uploaded image":"FeedbackList: Canceled uploading image",c)},async()=>{l.click()},function(){_=this.value,n(11,_)},e=>"Enter"===e.key&&q(_,i),async()=>{await q(_,i),n(11,_="")},function(){w=T(this),n(7,w),n(31,b)},function(e){k=e,n(8,k)},function(e){y=e,n(9,y)},function(e){E=e,n(25,E)},function(e){O=e,n(24,O)},async(e,t)=>{if(!window.confirm("Are you sure you want to delete this document? This cannot be undone."))return;n(26,P=!0),n(25,E=50),n(24,O="Removing document...");let o=await z(e,t);n(24,O="Done!"),n(25,E=100),n(26,P=!1),te("FeedbackList: Removed document",o)},function(e){C[e?"unshift":"push"]((()=>{d=e,n(20,d)}))},async e=>{n(26,P=!0),await I(e),n(26,P=!1),await te("FeedbackList: Added document",e.target.files)},async()=>{window.confirm("Adding a new document will take a long time, since its information will be extracted. Do you want to proceed?")&&(document.getElementById("document_file_input").click(),await te("FeedbackList: Added document","Document"))},async()=>{window.confirm("Are you sure you want to remove all documents? This cannot be undone.")&&(n(26,P=!0),await J(),n(26,P=!1),await te("FeedbackList: Removed all documents",g))},async(e,t)=>{Y(e),await ue(h),await te("FeedbackList: Removed note",t)},function(){V=this.value,n(30,V)},async()=>{W(),n(29,G=!1),await ue(h),await te("FeedbackList: Added note to My Notes",V)},async()=>{n(29,G=!1),n(30,V=""),await te("FeedbackList: Cancelled adding note to My Notes",V)},async()=>{n(29,G=!0),await te("FeedbackList: Clicked on My Notes' Add Note button",G)},async()=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(3,h=[]),n(3,h),await ue(h),await te("FeedbackList: Removed all notes from My Notes",h))},async e=>{let t="Are you sure you want to delete this feedback notes section? This cannot be undone";f[e].notes.length>0&&(t="Are you sure you want to delete this feedback notes section? This will delete all notes and cannot be undone."),window.confirm(t)&&(delete f[e],n(4,f),await pe(f),await te("FeedbackList: Removed feedback notes section","Feedback ID"+e))},async(e,t,n)=>{Y(e,t),await pe(f),await te("FeedbackList: Removed note from Feedback ID"+t,n)},function(){V=this.value,n(30,V)},async e=>{W(e),n(4,f[e].is_adding=!1,f),await pe(f),await te("FeedbackList: Added note to Feedback ID"+e,V)},async e=>{n(4,f[e].is_adding=!1,f),await te("FeedbackList: Cancelled adding note to Feedback ID"+e,V),n(30,V="")},async e=>{n(4,f[e].is_adding=!0,f),await te("FeedbackList: Clicked on Feedback ID"+e+"'s Add Note button",f[e].is_adding)},async e=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(4,f[e].notes=[],f),n(4,f),await pe(f),await te("FeedbackList: Removed all notes from Feedback ID"+e,f[e].notes))}]}class hn extends K{constructor(e){super(),X(this,e,mn,un,i,{feedback_list:0,recording:5,documents:1,chatbot_messages:2,my_notes:3,feedback_notes:4},null,[-1,-1,-1,-1,-1])}}function fn(e){let t,n,o,s,i,a,c,r,l;function p(t){e[22](t)}function m(t){e[23](t)}function h(t){e[24](t)}function f(t){e[25](t)}function v(t){e[26](t)}function b(t){e[27](t)}let w={};return void 0!==e[8]&&(w.chatbot_messages=e[8]),void 0!==e[7]&&(w.documents=e[7]),void 0!==e[6]&&(w.feedback_list=e[6]),void 0!==e[5]&&(w.recording=e[5]),void 0!==e[9]&&(w.my_notes=e[9]),void 0!==e[10]&&(w.feedback_notes=e[10]),n=new hn({props:w}),C.push((()=>V(n,"chatbot_messages",p))),C.push((()=>V(n,"documents",m))),C.push((()=>V(n,"feedback_list",h))),C.push((()=>V(n,"recording",f))),C.push((()=>V(n,"my_notes",v))),C.push((()=>V(n,"feedback_notes",b))),{c(){t=g("div"),B(n.$$.fragment),_(t,"width","100%"),_(t,"height","100%"),_(t,"background-color","#F8F9FA"),F(t,"gone",2!=e[0])},m(e,o){d(e,t,o),Y(n,t,null),l=!0},p(e,d){const u={};!o&&256&d[0]&&(o=!0,u.chatbot_messages=e[8],R((()=>o=!1))),!s&&128&d[0]&&(s=!0,u.documents=e[7],R((()=>s=!1))),!i&&64&d[0]&&(i=!0,u.feedback_list=e[6],R((()=>i=!1))),!a&&32&d[0]&&(a=!0,u.recording=e[5],R((()=>a=!1))),!c&&512&d[0]&&(c=!0,u.my_notes=e[9],R((()=>c=!1))),!r&&1024&d[0]&&(r=!0,u.feedback_notes=e[10],R((()=>r=!1))),n.$set(u),(!l||1&d[0])&&F(t,"gone",2!=e[0])},i(e){l||(J(n.$$.fragment,e),l=!0)},o(e){G(n.$$.fragment,e),l=!1},d(e){e&&u(t),W(n)}}}function vn(e){let t,n,o,s,i;function a(t){e[20](t)}function c(t){e[21](t)}let r={};return void 0!==e[5]&&(r.recording=e[5]),void 0!==e[6]&&(r.feedback_list=e[6]),n=new Ie({props:r}),C.push((()=>V(n,"recording",a))),C.push((()=>V(n,"feedback_list",c))),{c(){t=g("div"),B(n.$$.fragment),_(t,"width","100%"),_(t,"height","100%"),_(t,"background-color","#F8F9FA"),F(t,"gone",1!=e[0])},m(e,o){d(e,t,o),Y(n,t,null),i=!0},p(e,a){const c={};!o&&32&a[0]&&(o=!0,c.recording=e[5],R((()=>o=!1))),!s&&64&a[0]&&(s=!0,c.feedback_list=e[6],R((()=>s=!1))),n.$set(c),(!i||1&a[0])&&F(t,"gone",1!=e[0])},i(e){i||(J(n.$$.fragment,e),i=!0)},o(e){G(n.$$.fragment,e),i=!1},d(e){e&&u(t),W(n)}}}function bn(e){let t,n,s,i,a,c,r,p,m,f,b,k,x,T,$,S,L,j;function N(t){e[15](t)}function O(t){e[16](t)}let E={};return void 0!==e[3]&&(E.progress=e[3]),void 0!==e[4]&&(E.status=e[4]),s=new ce({props:E}),C.push((()=>V(s,"progress",N))),C.push((()=>V(s,"status",O))),{c(){t=g("div"),n=g("div"),B(s.$$.fragment),c=h(),r=g("div"),p=g("label"),p.textContent="Enter your username",m=h(),f=g("input"),b=h(),k=g("div"),x=g("button"),x.textContent="Register",T=h(),$=g("button"),$.textContent="Login",w(n,"class","overlay centered padded"),F(n,"invisible",!1===e[2]),w(p,"for","username"),w(f,"type","text"),w(f,"name","username"),w(f,"id","username"),w(x,"class","svelte-lde6tu"),w($,"class","svelte-lde6tu"),w(k,"class","row"),w(r,"class","column centered spaced"),_(r,"width","75%"),_(r,"height","75%"),w(t,"class","centered spaced"),_(t,"width","100%"),_(t,"height","100%"),F(t,"gone",0!=e[0])},m(o,i){d(o,t,i),l(t,n),Y(s,n,null),l(t,c),l(t,r),l(r,p),l(r,m),l(r,f),y(f,e[1]),l(r,b),l(r,k),l(k,x),l(k,T),l(k,$),S=!0,L||(j=[v(f,"input",e[17]),v(x,"click",e[18]),v($,"click",e[19])],L=!0)},p(e,o){const c={};!i&&8&o[0]&&(i=!0,c.progress=e[3],R((()=>i=!1))),!a&&16&o[0]&&(a=!0,c.status=e[4],R((()=>a=!1))),s.$set(c),(!S||4&o[0])&&F(n,"invisible",!1===e[2]),2&o[0]&&f.value!==e[1]&&y(f,e[1]),(!S||1&o[0])&&F(t,"gone",0!=e[0])},i(e){S||(J(s.$$.fragment,e),S=!0)},o(e){G(s.$$.fragment,e),S=!1},d(e){e&&u(t),W(s),L=!1,o(j)}}}function wn(e){let t,n,s,i,a,c,p,f,b,y,_,x,T,$,S,L,C,j,N,O,E,P,R,M,A,D,H;const q=[bn,vn,fn],U=[];function V(e,t){return 0===e[0]?0:1===e[0]?1:2===e[0]?2:-1}return~(y=V(e))&&(_=U[y]=q[y](e)),{c(){t=g("main"),n=g("div"),s=g("h5"),i=m("Welcome, "),a=m(e[1]),c=h(),p=g("button"),p.textContent="Logout",f=h(),b=g("div"),_&&_.c(),x=h(),T=g("div"),$=g("button"),S=g("img"),C=m("\n                Select Feedback"),N=h(),O=g("button"),E=m("View Feedback List\n                "),P=g("img"),w(p,"class","row mini-padded svelte-lde6tu"),w(n,"class","header spaced bordered row padded svelte-lde6tu"),F(n,"gone",0==e[0]),w(b,"class","carousel-container svelte-lde6tu"),r(S.src,L="./logos/move-to-the-prev-page-symbol-svgrepo-com.svg")||w(S,"src","./logos/move-to-the-prev-page-symbol-svgrepo-com.svg"),w(S,"alt","Previous page"),w(S,"class","mini-icon"),w($,"class","action-button row centered svelte-lde6tu"),$.disabled=j=0===e[0],F($,"invisible",2!=e[0]||0==e[0]),r(P.src,R="./logos/move-to-the-next-page-symbol-svgrepo-com.svg")||w(P,"src","./logos/move-to-the-next-page-symbol-svgrepo-com.svg"),w(P,"alt","Next page"),w(P,"class","mini-icon"),w(O,"class","action-button row centered svelte-lde6tu"),O.disabled=M=e[0]===kn.length-1||e[6].length<=0,F(O,"invisible",1!=e[0]||0==e[0]),w(T,"class","navigation centered spaced bordered row svelte-lde6tu")},m(o,r){d(o,t,r),l(t,n),l(n,s),l(s,i),l(s,a),l(n,c),l(n,p),l(t,f),l(t,b),~y&&U[y].m(b,null),l(t,x),l(t,T),l(T,$),l($,S),l($,C),l(T,N),l(T,O),l(O,E),l(O,P),A=!0,D||(H=[v(p,"click",e[14]),v($,"click",e[28]),v(O,"click",e[29])],D=!0)},p(e,t){(!A||2&t[0])&&k(a,e[1]),(!A||1&t[0])&&F(n,"gone",0==e[0]);let o=y;y=V(e),y===o?~y&&U[y].p(e,t):(_&&(I(),G(U[o],1,1,(()=>{U[o]=null})),z()),~y?(_=U[y],_?_.p(e,t):(_=U[y]=q[y](e),_.c()),J(_,1),_.m(b,null)):_=null),(!A||1&t[0]&&j!==(j=0===e[0]))&&($.disabled=j),(!A||1&t[0])&&F($,"invisible",2!=e[0]||0==e[0]),(!A||65&t[0]&&M!==(M=e[0]===kn.length-1||e[6].length<=0))&&(O.disabled=M),(!A||1&t[0])&&F(O,"invisible",1!=e[0]||0==e[0])},i(e){A||(J(_),A=!0)},o(e){G(_),A=!1},d(e){e&&u(t),~y&&U[y].d(),D=!1,o(H)}}}let kn=3;function yn(e,t,n){let o=0,s="",i="",a=!1,c=0,r="Initializing...",l={},d=[],u=[],p=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}],g=[],m={};async function h(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(i=t.user_id,ee("username",s,30),ee("user_id",i,30),n(3,c=50),n(4,r="Loading documents..."),n(7,u=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),n(3,c=100),n(4,r="Done!"),Z(1500),n(0,o=1)):alert(t.message)}async function f(){if(null==s||""==s)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s})});const t=await e.json();e.ok?e.ok&&(i=t.user_id,ee("username",s,30),ee("user_id",i,30),await async function(e){if(n(3,c=15),n(4,r="Loading documents..."),n(7,u=await fetch("/get_documents",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.documents))),Object.keys(l).length<=0){n(3,c=30),n(4,r="Loading recording...");let e=await fetch("/get_recording",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();if(n(5,l=t.recording),"video_path"in l&&null!=l.video_path){n(3,c=45),n(4,r="Loading video...");const e=await fetch("/fetch_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l.video_path})});if(!e.ok)throw new Error("Failed to fetch video");const t=await e.blob();n(5,l.video=URL.createObjectURL(t),l)}if("audio_path"in l&&null!=l.audio_path){n(3,c=50),n(4,r="Loading audio...");const e=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:l.audio_path})});if(!e.ok)throw new Error("Failed to fetch audio");const t=await e.blob();n(5,l.audio=URL.createObjectURL(t),l)}n(3,c=60),n(4,r="Loading feedback...");const o=await fetch("/get_feedback_list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch feedback list");const s=await o.json();n(6,d=s.feedback_list),n(3,c=70),n(4,r="Loading chatbot messages...");const i=await fetch("/get_display_chatbot_messages",{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch chatbot messages");const a=await i.json();n(8,p=a.display_chatbot_messages);for(let e of p)if("image_path"in e&&null!=e.image_path){const t=await fetch("/fetch_image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_path:e.image_path})});if(!t.ok)throw new Error("Failed to fetch image");const n=await t.blob();e.image=URL.createObjectURL(n)}n(3,c=80),n(4,r="Loading notes...");const u=await fetch("/get_my_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!u.ok)throw new Error("Failed to fetch my notes");const h=await u.json();n(9,g=h.my_notes);const f=await fetch("/get_feedback_notes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!f.ok)throw new Error("Failed to fetch feedback notes");const v=await f.json();n(10,m=v.feedback_notes),n(3,c=100),n(4,r="Done!"),Z(1500)}}(),n(0,o=1)):alert(t.message)}function v(){ee("username","",0),ee("user_id","",0),n(1,s=""),i="",n(7,u=[]),n(6,d=[]),n(8,p=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}]),n(0,o=0)}S((async()=>{}));return[o,s,a,c,r,l,d,u,p,g,m,h,f,v,()=>v(),function(e){c=e,n(3,c)},function(e){r=e,n(4,r)},function(){s=this.value,n(1,s)},async()=>{n(2,a=!0),await h(),n(2,a=!1),n(3,c=0)},async()=>{n(2,a=!0),await f(),n(2,a=!1),n(3,c=0)},function(e){l=e,n(5,l)},function(e){d=e,n(6,d)},function(e){p=e,n(8,p)},function(e){u=e,n(7,u)},function(e){d=e,n(6,d)},function(e){l=e,n(5,l)},function(e){g=e,n(9,g)},function(e){m=e,n(10,m)},()=>{n(0,o=1)},()=>{n(0,o=2)}]}return new class extends K{constructor(e){super(),X(this,e,yn,wn,i,{},null,[-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
