var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,a;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function v(){return m("")}function b(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function x(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function $(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function F(e,t,n){e.classList[n?"add":"remove"](t)}function q(e){a=e}function T(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const S=[],L=[];let C=[];const N=[],E=Promise.resolve();let j=!1;function O(e){C.push(e)}function M(e){N.push(e)}const P=new Set;let D=0;function R(){if(0!==D)return;const e=a;do{try{for(;D<S.length;){const e=S[D];D++,q(e),A(e.$$)}}catch(e){throw S.length=0,D=0,e}for(q(null),S.length=0,D=0;L.length;)L.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];P.has(t)||(P.add(t),t())}C.length=0}while(S.length);for(;N.length;)N.pop()();j=!1,P.clear(),q(e)}function A(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const H=new Set;let U;function I(){U={r:0,c:[],p:U}}function J(){U.r||o(U.c),U=U.p}function B(e,t){e&&e.i&&(H.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(H.has(e))return;H.add(e),U.c.push((()=>{H.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function z(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function G(e){e&&e.c()}function W(e,n,s,c){const{fragment:a,after_update:r}=e.$$;a&&a.m(n,s),c||O((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),r.forEach(O)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];C.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),C=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(S.push(e),j||(j=!0,E.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,i,s,c,r,l,d,p=[-1]){const g=a;q(t);const f=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(g?g.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:i.target||g.$$.root};d&&d(f.root);let m=!1;if(f.ctx=s?s(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),m&&Q(t,e)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!c&&c(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();i.intro&&B(t.$$.fragment),W(t,i.target,i.anchor,i.customElement),R()}q(g)}class X{$destroy(){Y(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Z(t){let n,o,i,s,c,a,r,p,f;return{c(){n=g("div"),o=g("span"),i=m("["),s=m(t[0]),c=m("%] "),a=m(t[1]),r=h(),p=g("div"),f=g("div"),k(o,"class","status-text svelte-e99ivy"),k(f,"class","loading-bar-progress svelte-e99ivy"),x(f,"width",t[0]+"%"),k(p,"class","loading-bar-container svelte-e99ivy"),k(n,"class","container column centered spaced svelte-e99ivy")},m(e,t){d(e,n,t),l(n,o),l(o,i),l(o,s),l(o,c),l(o,a),l(n,r),l(n,p),l(p,f)},p(e,[t]){1&t&&y(s,e[0]),2&t&&y(a,e[1]),1&t&&x(f,"width",e[0]+"%")},i:e,o:e,d(e){e&&u(n)}}}function ee(e,t,n){let{progress:o=0}=t,{status:i=""}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress),"status"in e&&n(1,i=e.status)},[o,i]}class te extends X{constructor(e){super(),K(this,e,ee,Z,s,{progress:0,status:1})}}async function ne(e){return new Promise((t=>setTimeout(t,e)))}async function oe(e,t){const n=await fetch("/log_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:t})});if(!n.ok)throw new Error("Failed to log action");const o=await n.json();console.log(o.message)}function ie(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function se(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function ce(e,t,n){const o=e.slice();return o[65]=t[n][0],o[66]=t[n][1],o}function ae(e,t,n){const o=e.slice();return o[69]=t[n],o[71]=n,o}function re(t){let n;return{c(){n=g("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function le(e){let t,n,o,i,s,c=e[4]+1+"",a=e[1].length+"";return{c(){t=g("span"),n=m(c),o=m(" of "),i=m(a),s=m(" feedback moments highlighted")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,i),l(t,s)},p(e,t){16&t[0]&&c!==(c=e[4]+1+"")&&y(n,c),2&t[0]&&a!==(a=e[1].length+"")&&y(i,a)},d(e){e&&u(t)}}}function de(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No discussion transcript loaded. Please first record or upload your discussion.</span>",k(n,"class","centered"),x(n,"height","100%"),x(n,"width","100%")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ue(e){let t,n=e[0].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=pe(ae(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();k(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(33&i[0]){let s;for(n=e[0].transcript_list,s=0;s<n.length;s+=1){const c=ae(e,n,s);o[s]?o[s].p(c,i):(o[s]=pe(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function pe(e){let t,n,i,s,c,a,r,p,f,v,w,_,x,$,F,q,T,S,L,C,N,E,j,O=e[69].start_timestamp+"",M=e[69].end_timestamp+"",P=e[69].speaker?e[69].speaker+":":"",D=e[69].dialogue+"";function R(){return e[26](e[69])}function A(){return e[27](e[69])}return{c(){t=g("div"),n=g("span"),i=m("["),s=m(O),c=m("]"),a=m(" \n                            - \n                            "),r=g("span"),p=m("["),f=m(M),v=m("]"),w=h(),_=g("br"),x=h(),$=m(P),F=h(),q=g("span"),S=h(),L=g("br"),C=g("br"),N=h(),k(n,"class","timestamp svelte-ir33lb"),k(r,"class","timestamp svelte-ir33lb"),k(q,"id",T=e[69].id),k(q,"class","svelte-ir33lb"),k(t,"class","spaced")},m(e,o){d(e,t,o),l(t,n),l(n,i),l(n,s),l(n,c),l(t,a),l(t,r),l(r,p),l(r,f),l(r,v),l(t,w),l(t,_),l(t,x),l(t,$),l(t,F),l(t,q),q.innerHTML=D,l(t,S),l(t,L),l(t,C),l(t,N),E||(j=[b(n,"click",R),b(r,"click",A)],E=!0)},p(t,n){e=t,1&n[0]&&O!==(O=e[69].start_timestamp+"")&&y(s,O),1&n[0]&&M!==(M=e[69].end_timestamp+"")&&y(f,M),1&n[0]&&P!==(P=e[69].speaker?e[69].speaker+":":"")&&y($,P),1&n[0]&&D!==(D=e[69].dialogue+"")&&(q.innerHTML=D),1&n[0]&&T!==(T=e[69].id)&&k(q,"id",T)},d(e){e&&u(t),E=!1,o(j)}}}function ge(e){let t,n,o,i,s,c,a;return{c(){t=g("button"),n=g("img"),i=m("\n                                    Pause"),r(n.src,o="./logos/pause-circle-svgrepo-com.svg")||k(n,"src","./logos/pause-circle-svgrepo-com.svg"),k(n,"alt","Pause recording"),k(n,"class","logo"),k(t,"class","action-button svelte-ir33lb"),t.disabled=s=!e[6]||e[7]},m(o,s){d(o,t,s),l(t,n),l(t,i),c||(a=b(t,"click",e[30]),c=!0)},p(e,n){192&n[0]&&s!==(s=!e[6]||e[7])&&(t.disabled=s)},d(e){e&&u(t),c=!1,a()}}}function fe(e){let t,n,o,i,s,c,a;return{c(){t=g("button"),n=f("svg"),o=f("polygon"),i=m("\n                                    Resume"),k(o,"points","5 3 19 12 5 21 5 3"),k(n,"xmlns","http://www.w3.org/2000/svg"),k(n,"viewBox","0 0 24 24"),k(n,"fill","none"),k(n,"stroke","currentColor"),k(n,"stroke-width","2"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"class","feather feather-play logo"),x(n,"border-radius","50%"),x(n,"padding","5px"),x(n,"background-color","#fff"),k(t,"class","action-button svelte-ir33lb"),t.disabled=s=!e[7]},m(s,r){d(s,t,r),l(t,n),l(n,o),l(t,i),c||(a=b(t,"click",e[29]),c=!0)},p(e,n){128&n[0]&&s!==(s=!e[7])&&(t.disabled=s)},d(e){e&&u(t),c=!1,a()}}}function me(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||k(n,"src","video.mp4"),n.controls=!0,x(n,"width","100%"),x(n,"height","100%")},m(e,o){d(e,n,o),t[51](n)},p:e,d(e){e&&u(n),t[51](null)}}}function he(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[0].audio)||k(t,"src",n),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(n,o){d(n,t,o),e[50](t)},p(e,o){1&o[0]&&!r(t.src,n=e[0].audio)&&k(t,"src",n)},d(n){n&&u(t),e[50](null)}}}function ve(e){let t,n,o,i;return{c(){t=g("video"),n=g("track"),k(n,"kind","captions"),r(n.src,o="blank.vtt")||k(n,"src","blank.vtt"),k(n,"srclang","en"),r(t.src,i=e[0].video)||k(t,"src",i),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(o,i){d(o,t,i),l(t,n),e[49](t)},p(e,n){1&n[0]&&!r(t.src,i=e[0].video)&&k(t,"src",i)},d(n){n&&u(t),e[49](null)}}}function be(e){let t,n,o="speaker"in e[0].transcript_list[0]&&we(e),i=e[1]&&ye(e);return{c(){o&&o.c(),t=h(),i&&i.c(),n=v()},m(e,s){o&&o.m(e,s),d(e,t,s),i&&i.m(e,s),d(e,n,s)},p(e,s){"speaker"in e[0].transcript_list[0]?o?o.p(e,s):(o=we(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[1]?i?i.p(e,s):(i=ye(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){o&&o.d(e),e&&u(t),i&&i.d(e),e&&u(n)}}}function we(e){let t,n,o,i,s,c,a,r,f,v=Object.keys(e[0].transcript_list.reduce(Ne,{})).length+"",b=Object.entries(e[0].transcript_list.reduce(Ee,{})),w=[];for(let t=0;t<b.length;t+=1)w[t]=ke(ce(e,b,t));return{c(){t=g("strong"),n=m("Number of participants: "),o=m(v),i=h(),s=g("br"),c=h(),a=g("ul");for(let e=0;e<w.length;e+=1)w[e].c();r=h(),f=g("br")},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,i,u),d(e,s,u),d(e,c,u),d(e,a,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(a,null);d(e,r,u),d(e,f,u)},p(e,t){if(1&t[0]&&v!==(v=Object.keys(e[0].transcript_list.reduce(Ne,{})).length+"")&&y(o,v),1&t[0]){let n;for(b=Object.entries(e[0].transcript_list.reduce(Ee,{})),n=0;n<b.length;n+=1){const o=ce(e,b,n);w[n]?w[n].p(o,t):(w[n]=ke(o),w[n].c(),w[n].m(a,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}},d(e){e&&u(t),e&&u(i),e&&u(s),e&&u(c),e&&u(a),p(w,e),e&&u(r),e&&u(f)}}}function ke(e){let t,n,o,i,s,c,a,r=e[65]+"",p=e[66]+"";return{c(){t=g("li"),n=m("- "),o=m(r),i=m(": "),s=m(p),c=m(" utterances"),a=h()},m(e,r){d(e,t,r),l(t,n),l(t,o),l(t,i),l(t,s),l(t,c),d(e,a,r)},p(e,t){1&t[0]&&r!==(r=e[65]+"")&&y(o,r),1&t[0]&&p!==(p=e[66]+"")&&y(s,p)},d(e){e&&u(t),e&&u(a)}}}function ye(e){let t,n,o,i,s,c,a,r,p,f,v,b,w=e[1].length+"",k=e[1].filter(je).length+"",_=e[1].filter(Oe).length+"";return{c(){t=g("strong"),n=m("Number of feedback utterances: "),o=m(w),i=h(),s=g("ul"),c=g("li"),a=m("- Number of positive feedback: "),r=m(k),p=h(),f=g("li"),v=m("- Number of critical feedback: "),b=m(_)},m(e,u){d(e,t,u),l(t,n),l(t,o),d(e,i,u),d(e,s,u),l(s,c),l(c,a),l(c,r),l(s,p),l(s,f),l(f,v),l(f,b)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&y(o,w),2&t[0]&&k!==(k=e[1].filter(je).length+"")&&y(r,k),2&t[0]&&_!==(_=e[1].filter(Oe).length+"")&&y(b,_)},d(e){e&&u(t),e&&u(i),e&&u(s)}}}function _e(e){let t,n,i,s,c,a,p,f,v,w,y,_,$,q,T,S,C,N,E,j,O,P,D,R,A,H,U,I,J,Q,K,X,Z,ee,ne,oe,ie,se,ce,ae,pe,we,ke,ye,_e,xe,$e,Fe,qe,Te,Se,Le,Ce,Ne,Ee,je,Oe,Me,Pe,De,Re,Ae,He,Ue,Ie,Je,Be,Ve,ze,Ge,We,Ye,Qe,Ke,Xe,Ze,et,tt,nt,ot,it,st,ct,at,rt,lt,dt,ut,pt,gt,ft,mt,ht,vt,bt,wt,kt,yt,_t,xt,$t,Ft,qt,Tt,St,Lt,Ct,Nt,Et,jt,Ot,Mt,Pt,Dt,Rt,At,Ht,Ut,It,Jt,Bt,Vt,zt;function Gt(t){e[22](t)}function Wt(t){e[23](t)}let Yt={};function Qt(e,t){return e[1]&&e[1].length>0?le:re}void 0!==e[12]&&(Yt.progress=e[12]),void 0!==e[11]&&(Yt.status=e[11]),c=new te({props:Yt}),L.push((()=>z(c,"progress",Gt))),L.push((()=>z(c,"status",Wt)));let Kt=Qt(e),Xt=Kt(e);function Zt(e,t){return e[0]&&e[0].transcript_list?ue:de}let en=Zt(e),tn=en(e);function nn(e,t){return e[7]?fe:ge}let on=nn(e),sn=on(e);function cn(e,t){return e[0]&&e[0].video?ve:e[0]&&e[0].audio?he:me}let an=cn(e),rn=an(e),ln=e[0]&&e[0].transcript_list&&be(e);return{c(){t=g("div"),n=g("div"),i=g("div"),s=g("div"),G(c.$$.fragment),f=h(),v=g("div"),Xt.c(),w=h(),y=g("button"),_=g("img"),T=h(),S=g("button"),C=g("img"),j=h(),tn.c(),O=h(),P=g("div"),D=g("div"),R=g("span"),R.textContent="Step 1: Record or upload your discussion.",A=h(),H=g("div"),U=g("div"),I=g("span"),I.textContent="Screen record your discussion",J=h(),Q=g("div"),K=g("button"),X=g("img"),ee=m("\n                                Record"),oe=h(),sn.c(),ie=h(),se=g("button"),ce=g("img"),pe=m("\n                                Stop"),ke=h(),ye=g("span"),ye.textContent="or",_e=h(),xe=g("div"),$e=g("label"),$e.textContent="Upload your own video or audio:",Fe=h(),qe=g("div"),Te=g("input"),Se=h(),Le=g("div"),Ce=g("label"),Ne=m("Transcribe \n                                    "),Ee=g("a"),Ee.textContent="(?)",je=h(),Oe=g("span"),Oe.textContent="Checking this will automatically transcribe the video/audio.",Me=h(),Pe=g("input"),De=h(),Re=g("button"),Ae=g("img"),Ue=m("\n                                Upload file"),Je=h(),Be=g("label"),Be.textContent="Upload your own transcript (in .srt only):",Ve=h(),ze=g("div"),Ge=g("input"),We=h(),Ye=g("button"),Qe=g("img"),Xe=m("\n                                Upload file"),et=h(),tt=g("div"),nt=g("span"),nt.textContent="Step 2: Highlight feedback in the discussion's transcript.",ot=h(),it=g("div"),st=g("div"),ct=g("button"),at=g("img"),lt=m("\n                            Auto-detect "),dt=g("br"),ut=m(" Feedback"),gt=h(),ft=g("button"),mt=g("img"),vt=m("\n                            Highlight "),bt=g("br"),wt=m(" Positive"),yt=h(),_t=g("button"),xt=g("img"),Ft=m("\n                            Highlight "),qt=g("br"),Tt=m(" Critical"),Lt=h(),Ct=g("button"),Nt=g("img"),jt=m("\n                            Remove "),Ot=g("br"),Mt=m(" Feedback"),Dt=h(),Rt=g("div"),At=g("div"),rn.c(),Ht=h(),Ut=g("div"),It=g("h3"),It.textContent="Discussion Transcript Details",Jt=h(),ln&&ln.c(),k(s,"class","overlay centered padded"),F(s,"invisible",!1===e[10]),r(_.src,$="./logos/up-arrow-5-svgrepo-com.svg")||k(_,"src","./logos/up-arrow-5-svgrepo-com.svg"),k(_,"alt","Prev feedback"),k(_,"class","logo"),x(_,"width","1.5rem"),x(_,"height","1.5rem"),y.disabled=q=!e[1]||e[1].length<=0,r(C.src,N="./logos/down-arrow-5-svgrepo-com.svg")||k(C,"src","./logos/down-arrow-5-svgrepo-com.svg"),k(C,"alt","Next feedback"),k(C,"class","logo"),x(C,"width","1.5rem"),x(C,"height","1.5rem"),S.disabled=E=!e[1]||e[1].length<=0,k(v,"id","traverse-feedback-area"),k(v,"class","bordered spaced svelte-ir33lb"),k(i,"id","transcript-area"),k(i,"class","column bordered spaced svelte-ir33lb"),x(R,"font-weight","bold"),x(R,"text-decoration","underline"),x(R,"margin-left","1rem"),r(X.src,Z="./logos/record-video-svgrepo-com.svg")||k(X,"src","./logos/record-video-svgrepo-com.svg"),k(X,"alt","Start recording"),k(X,"class","logo"),k(K,"class","action-button svelte-ir33lb"),K.disabled=ne=e[6]||e[7],r(ce.src,ae="./logos/record-video-stop-svgrepo-com.svg")||k(ce,"src","./logos/record-video-stop-svgrepo-com.svg"),k(ce,"alt","Stop recording"),k(ce,"class","logo"),k(se,"class","action-button svelte-ir33lb"),se.disabled=we=!e[6]&&!e[7],k(Q,"class","row spaced"),k(U,"class","column centered"),k($e,"for","file_upload"),x(Te,"width","50%"),k(Te,"name","file_upload"),k(Te,"type","file"),k(Te,"id","file_upload"),k(Te,"accept","video/*, audio/*"),k(Ee,"class","tooltip-link"),x(Ee,"color","blue"),k(Ce,"for","to-transcribe"),k(Oe,"class","tooltip"),k(Pe,"id","to-transcribe"),k(Pe,"type","checkbox"),k(Le,"class","column centered"),r(Ae.src,He="./logos/upload-svgrepo-com.svg")||k(Ae,"src","./logos/upload-svgrepo-com.svg"),k(Ae,"alt","Upload file"),k(Ae,"class","mini-icon"),k(Re,"class","action-button centered column  svelte-ir33lb"),Re.disabled=Ie=e[10]||!e[8]||0===e[8].length,k(qe,"class","row centered spaced"),k(Be,"for","file_upload"),k(Ge,"name","file_upload"),k(Ge,"type","file"),k(Ge,"id","file_upload"),k(Ge,"accept"," .srt"),r(Qe.src,Ke="./logos/upload-svgrepo-com.svg")||k(Qe,"src","./logos/upload-svgrepo-com.svg"),k(Qe,"alt","Upload file"),k(Qe,"class","mini-icon"),k(Ye,"class","action-button centered column  svelte-ir33lb"),Ye.disabled=Ze=e[10]||!e[8]||0===e[8].length,k(ze,"class","row centered"),k(xe,"class","column centered spaced"),k(H,"class","row centered spaced"),k(D,"id","capture-feedback-panel"),k(D,"class","column bordered padded svelte-ir33lb"),x(nt,"font-weight","bold"),x(nt,"text-decoration","underline"),x(nt,"margin-left","1rem"),r(at.src,rt="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||k(at,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),k(at,"alt","Auto-detect Feedback"),k(at,"class","logo"),k(ct,"class","action-button svelte-ir33lb"),ct.disabled=pt=!e[0]||!e[0].transcript_list||e[10],r(mt.src,ht="./logos/highlight-green-svgrepo-com.svg")||k(mt,"src","./logos/highlight-green-svgrepo-com.svg"),k(mt,"alt","Highlight Positive Feedback"),k(mt,"class","logo"),k(ft,"class","action-button svelte-ir33lb"),ft.disabled=kt=!e[0]||!e[0].transcript_list||e[10],r(xt.src,$t="./logos/highlight-red-svgrepo-com.svg")||k(xt,"src","./logos/highlight-red-svgrepo-com.svg"),k(xt,"alt","Highlight Critical Feedback"),k(xt,"class","logo"),k(_t,"class","action-button svelte-ir33lb"),_t.disabled=St=!e[0]||!e[0].transcript_list||e[10],r(Nt.src,Et="./logos/erase-svgrepo-com.svg")||k(Nt,"src","./logos/erase-svgrepo-com.svg"),k(Nt,"alt","De-highlight Feedback"),k(Nt,"class","logo"),k(Ct,"class","action-button svelte-ir33lb"),Ct.disabled=Pt=!e[0]||!e[0].transcript_list||e[10],k(st,"class","row centered spaced"),k(it,"class","centered"),x(it,"height","100%"),x(it,"width","100%"),k(tt,"id","feedback-highlight-panel"),k(tt,"class","column bordered spaced padded  svelte-ir33lb"),k(P,"id","transcript-buttons-area"),k(P,"class","row centered spaced svelte-ir33lb"),k(n,"id","left-panel"),k(n,"class","column spaced svelte-ir33lb"),k(At,"id","media-player-area"),k(At,"class","bordered centered svelte-ir33lb"),x(It,"font-weight","bold"),x(It,"text-decoration","underline"),k(Ut,"id","feedback-details-area"),k(Ut,"class","bordered padded spaced svelte-ir33lb"),x(Ut,"overflow-y","auto"),k(Rt,"id","right-panel"),k(Rt,"class","column spaced svelte-ir33lb"),k(t,"div",""),k(t,"class","row spaced svelte-ir33lb"),k(t,"id","feedback-selector-page")},m(o,a){d(o,t,a),l(t,n),l(n,i),l(i,s),W(c,s,null),l(i,f),l(i,v),Xt.m(v,null),l(v,w),l(v,y),l(y,_),l(v,T),l(v,S),l(S,C),l(i,j),tn.m(i,null),l(n,O),l(n,P),l(P,D),l(D,R),l(D,A),l(D,H),l(H,U),l(U,I),l(U,J),l(U,Q),l(Q,K),l(K,X),l(K,ee),l(Q,oe),sn.m(Q,null),l(Q,ie),l(Q,se),l(se,ce),l(se,pe),l(H,ke),l(H,ye),l(H,_e),l(H,xe),l(xe,$e),l(xe,Fe),l(xe,qe),l(qe,Te),e[33](Te),l(qe,Se),l(qe,Le),l(Le,Ce),l(Ce,Ne),l(Ce,Ee),l(Le,je),l(Le,Oe),e[37](Oe),l(Le,Me),l(Le,Pe),Pe.checked=e[3],l(qe,De),l(qe,Re),l(Re,Ae),l(Re,Ue),l(xe,Je),l(xe,Be),l(xe,Ve),l(xe,ze),l(ze,Ge),e[42](Ge),l(ze,We),l(ze,Ye),l(Ye,Qe),l(Ye,Xe),l(P,et),l(P,tt),l(tt,nt),l(tt,ot),l(tt,it),l(it,st),l(st,ct),l(ct,at),l(ct,lt),l(ct,dt),l(ct,ut),l(st,gt),l(st,ft),l(ft,mt),l(ft,vt),l(ft,bt),l(ft,wt),l(st,yt),l(st,_t),l(_t,xt),l(_t,Ft),l(_t,qt),l(_t,Tt),l(st,Lt),l(st,Ct),l(Ct,Nt),l(Ct,jt),l(Ct,Ot),l(Ct,Mt),l(t,Dt),l(t,Rt),l(Rt,At),rn.m(At,null),l(Rt,Ht),l(Rt,Ut),l(Ut,It),l(Ut,Jt),ln&&ln.m(Ut,null),Bt=!0,Vt||(zt=[b(y,"click",e[24]),b(S,"click",e[25]),b(K,"click",e[28]),b(se,"click",e[31]),b(Te,"change",e[32]),b(Te,"change",e[34]),b(Ee,"mouseover",e[35]),b(Ee,"mouseout",e[36]),b(Pe,"change",e[38]),b(Pe,"change",e[39]),b(Re,"click",e[40]),b(Ge,"change",e[41]),b(Ge,"change",e[43]),b(Ye,"click",e[44]),b(ct,"click",e[45]),b(ft,"click",e[46]),b(_t,"click",e[47]),b(Ct,"click",e[48])],Vt=!0)},p(e,t){const n={};!a&&4096&t[0]&&(a=!0,n.progress=e[12],M((()=>a=!1))),!p&&2048&t[0]&&(p=!0,n.status=e[11],M((()=>p=!1))),c.$set(n),(!Bt||1024&t[0])&&F(s,"invisible",!1===e[10]),Kt===(Kt=Qt(e))&&Xt?Xt.p(e,t):(Xt.d(1),Xt=Kt(e),Xt&&(Xt.c(),Xt.m(v,w))),(!Bt||2&t[0]&&q!==(q=!e[1]||e[1].length<=0))&&(y.disabled=q),(!Bt||2&t[0]&&E!==(E=!e[1]||e[1].length<=0))&&(S.disabled=E),en===(en=Zt(e))&&tn?tn.p(e,t):(tn.d(1),tn=en(e),tn&&(tn.c(),tn.m(i,null))),(!Bt||192&t[0]&&ne!==(ne=e[6]||e[7]))&&(K.disabled=ne),on===(on=nn(e))&&sn?sn.p(e,t):(sn.d(1),sn=on(e),sn&&(sn.c(),sn.m(Q,ie))),(!Bt||192&t[0]&&we!==(we=!e[6]&&!e[7]))&&(se.disabled=we),8&t[0]&&(Pe.checked=e[3]),(!Bt||1280&t[0]&&Ie!==(Ie=e[10]||!e[8]||0===e[8].length))&&(Re.disabled=Ie),(!Bt||1280&t[0]&&Ze!==(Ze=e[10]||!e[8]||0===e[8].length))&&(Ye.disabled=Ze),(!Bt||1025&t[0]&&pt!==(pt=!e[0]||!e[0].transcript_list||e[10]))&&(ct.disabled=pt),(!Bt||1025&t[0]&&kt!==(kt=!e[0]||!e[0].transcript_list||e[10]))&&(ft.disabled=kt),(!Bt||1025&t[0]&&St!==(St=!e[0]||!e[0].transcript_list||e[10]))&&(_t.disabled=St),(!Bt||1025&t[0]&&Pt!==(Pt=!e[0]||!e[0].transcript_list||e[10]))&&(Ct.disabled=Pt),an===(an=cn(e))&&rn?rn.p(e,t):(rn.d(1),rn=an(e),rn&&(rn.c(),rn.m(At,null))),e[0]&&e[0].transcript_list?ln?ln.p(e,t):(ln=be(e),ln.c(),ln.m(Ut,null)):ln&&(ln.d(1),ln=null)},i(e){Bt||(B(c.$$.fragment,e),Bt=!0)},o(e){V(c.$$.fragment,e),Bt=!1},d(n){n&&u(t),Y(c),Xt.d(),tn.d(),sn.d(),e[33](null),e[37](null),e[42](null),rn.d(),ln&&ln.d(),Vt=!1,o(zt)}}}async function xe(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function $e(e){const t=await fetch("/transcribe_mic",{method:"POST",body:JSON.stringify({audio:e}),headers:{"Content-Type":"application/json"}});if(t.ok){return(await t.json()).transcript}throw new Error("Failed to transcribe audio")}async function Fe(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function qe(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const o=await n.json();return[o.audiopath,o.videopath]}async function Te(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function Se(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function Le(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let o=e[n],i=o.id,s=o.start_timestamp,c=o.end_timestamp,a=o.dialogue;"speaker"in o&&""!=o.speaker?t+=`${i}\n${s} --\x3e ${c}\n${o.speaker}: ${a}\n\n`:t+=`${i}\n${s} --\x3e ${c}\n${a}\n\n`}return t}(e);const o=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!o.ok)throw new Error("Failed to detect feedback");return t=(await o.json()).feedback_list,console.log(t),t}function Ce(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let o=e[n];if(o.id===t)return o}return console.log("Error: Can't find excerpt with id",t),null}const Ne=(e,t)=>(e[t.speaker]=!0,e),Ee=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),je=e=>"positive"===e.type,Oe=e=>"critical"===e.type;function Me(e,t,n){let o,i,s,c,a,r,l,d,u,p,{recording:g}=t,{feedback_list:f}=t,m=!1,h=0,v=!1,b=!1,w=[],k=[],y=!1,_="",x=0;async function $(e){const t=new Blob(e,{type:"video/webm"});console.log("video blobs",{videoBlobs:e,vidblob:t});let n=new FormData;if(n.append("file",t),0===t.length||!t)return null;const o=await fetch("/download_screen",{method:"POST",body:n});if(o.ok){const e=await o.json();l=e.filepath}else d=null,l=null,console.log("Failed to send video to server");return l}async function F(){n(6,v=!0),s=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:60},selfBrowserSurface:"include"}),a=new MediaRecorder(s,{mimeType:"video/webm"}),a.videoChunks=[],a.addEventListener("dataavailable",(e=>{e.data.size>0&&k.push(e.data)})),a.addEventListener("stop",(()=>{})),c=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new MediaRecorder(c),r.audioBlobs=[],r.addEventListener("dataavailable",(e=>{e.data.size>0&&w.push(e.data)})),r.addEventListener("stop",(()=>{})),a.start(),r.start()}function q(){n(6,v=!1),n(7,b=!0),a.pause(),r.pause()}function S(){n(6,v=!0),n(7,b=!1),a.resume(),r.resume()}async function C(){n(6,v=!1),n(7,b=!1),s.getTracks().forEach((e=>e.stop())),c.getTracks().forEach((e=>e.stop())),n(11,_="Saving video and audio ..."),n(12,x=20),l=await $(k),l=await $(k),k=[];let e=await async function(e){try{const t=await fetch("/fetch_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}(l);d=await async function(e){const t=new Blob(e,{type:"audio/webm"});console.log("audio blobs",{audioBlobs:e,blob:t});let n=new FormData;n.append("audio",t,"audio.webm");const o=await fetch("/download_mic",{method:"POST",body:n});if(!o.ok)throw d=null,l=null,new Error("Failed to send audio to server");{const e=await o.json();d=e.filepath}return d}(w),w=[];let t=await xe(d);n(11,_="Transcribing audio (this may take a while) ..."),n(12,x=40);let o=await $e(d);n(11,_="Cleaning transcript..."),n(12,x=60);let i=await Te(o),a=await Se(i);n(11,_="Saving transcript as a database (this may take a while) ... "),n(12,x=80),await Fe(a),n(11,_="Done!"),n(12,x=100),await ne(1500),n(0,g={video:e,audio:t,transcript:i,transcript_list:a})}async function N(){if(u){for(const e of u)if(console.log(e.type),e.type.includes("video")){if((g||"video"in g||"audio"in g||"transcript_list"in g||f.length>0)&&(g.video||g.audio||g.transcript_list)){if(!window.confirm("Uploading a new video will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,f=[]);let t=URL.createObjectURL(e);if(n(11,_="Uploading video..."),n(12,x=m?20:50),[d,l]=await qe(e),!d)throw d=null,l=null,new Error("Failed to extract audio from video");let o=await xe(d),i=null,s=null;m&&(n(11,_="Transcribing audio (this may take a while) ..."),n(12,x=40),i=await $e(d),n(11,_="Cleaning transcript..."),n(12,x=60),i=await Te(i),s=await Se(i),n(11,_="Saving transcript as a database (this may take a while) ... "),n(12,x=80),await Fe(s)),n(11,_="Done!"),n(12,x=100),ne(1500),n(12,x=0),n(0,g={video:t,audio:o,transcript:i,transcript_list:s}),d=null,l=null}else if(e.type.includes("audio")){if((g||"audio"in g||"video"in g||"transcript_list"in g||f.length>0)&&(g.audio||g.video||g.transcript_list)){if(!window.confirm("Uploading a new audio will overwrite this recording and clear highlighted feedback. Do you want to proceed?"))return}n(1,f=[]);let t=URL.createObjectURL(e);n(11,_="Uploading audio..."),n(12,x=m?20:50);const o=new FormData;o.append("audio",e);const i=await fetch("/download_mic",{method:"POST",body:o});if(!i.ok)throw d=null,l=null,new Error("Failed to save uploaded audio");let s=await i.json();d=s.filepath;let c=null,a=null;m&&(n(11,_="Transcribing audio (this may take a while) ..."),n(12,x=40),c=await $e(d),n(11,_="Cleaning transcript..."),n(12,x=60),c=await Te(c),a=await Se(c),n(11,_="Saving transcript as a database (this may take a while) ... "),n(12,x=80),await Fe(a)),n(11,_="Done!"),n(12,x=100),await ne(1500),n(12,x=0),n(0,g={video:null,audio:t,transcript:c,transcript_list:a}),d=null,l=null}n(8,u=null),n(9,p.value="",p)}console.log("Recording",g),n(12,x=0),n(11,_="")}async function E(){if(u){for(const e of u)if(console.log(e.type),e.name.endsWith(".srt")){if((g||"transcript"in g||"transcript_list"in g||f.length>0)&&(g.transcript||g.transcript_list)){if(!window.confirm("Uploading a new transcript will overwrite the current transcript and clear highlighted feedback. Do you want to proceed?"))return}n(1,f=[]);let t=new FileReader;t.onload=async function(e){console.log(undefined),n(10,y=!0);let t=e.target.result;console.log(t),n(11,_="Cleaning transcript..."),n(12,x=30);let o=await Te(t);await ne(1500);let i=await Se(o);console.log(i),n(11,_="Saving transcript as a database (this may take a while) ... "),n(12,x=60),await Fe(i),console.log("Transcript list embedded"),n(11,_="Done!"),n(12,x=100),await ne(500),n(12,x=0);let s={video:null,audio:null,transcript:o,transcript_list:i};g&&("video"in g&&g.video||"audio"in g&&g.audio)?(n(0,g.transcript_list=i,g),n(0,g.transcript=o,g),n(0,g)):n(0,g=s),n(10,y=!1)},t.readAsText(e)}n(8,u=null),n(9,p.value="",p)}console.log("Recording",g),n(12,x=0),n(11,_="")}function j(e){const t=window.getSelection().toString();if(""===t.trim())return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted";if(t){let o={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},i=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let o=e[n],i=o.dialogue;if(o.speaker&&(i=o.speaker+": "+i),i.includes(t))return o}return null}(g.transcript_list,t);return i?(o.id=f.length+1,o.dialogue_id=i.id,o.speaker=i.speaker,o.excerpt_reference=i,o.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],f.push(o),n(1,f),n(0,g),P([o]),o):(console.log("Error: Corresponding transcript excerpt not found"),alert("Error: Corresponding transcript excerpt not found. Feedback not added."),"Error: Corresponding transcript excerpt not found for selection: "+t)}return alert("Please highlight text in the transcript with your mouse to add as feedback."),"Error: No text highlighted"}function O(){const e=window.getSelection().toString();if(""===e.trim())return alert("Please highlight the feedback you want to remove using your mouse."),"Error: No text highlighted";if(e)for(let t=0;t<f.length;t++){let o=f[t];if(o.quote.includes(e)){let e=parseInt(o.dialogue_id),i=o.quote;return f.splice(t,1),n(1,f),M(e,i),o}}return"Error: Feedback not found for selection: "+e}function M(e,t){for(let o=0;o<g.transcript_list.length;o++){let i=g.transcript_list[o];if(i.id===e){let e=i.dialogue,o=e.indexOf("<mark"),s=e.indexOf("</mark>")+7,c=e.slice(0,o)+t+e.slice(s);i.dialogue=c,i.dialogue=i.dialogue,n(0,g);break}}}function P(e){for(let t=0;t<e.length;t++){let n=e[t],o=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let i,s=parseInt(n.dialogue_id);for(let e=0;e<g.transcript_list.length;e++){let t=g.transcript_list[e];if(t.id===s){i=t;break}}if(!i){console.log("Error: Corresponding transcript excerpt not found");continue}let c=i.dialogue,a=c.indexOf(n.quote),r=a+n.quote.length,l=c.slice(0,a)+`<mark class="${o}" style="background-color:${"positive"===o?"lightgreen":"lightcoral"};">${n.quote}</mark>`+c.slice(r);i.dialogue=l}n(0,g)}T((async()=>{}));return e.$$set=e=>{"recording"in e&&n(0,g=e.recording),"feedback_list"in e&&n(1,f=e.feedback_list)},[g,f,o,m,h,i,v,b,u,p,y,_,x,F,q,S,C,N,E,j,O,P,function(e){x=e,n(12,x)},function(e){_=e,n(11,_)},async()=>{h>0?n(4,h--,h):n(4,h=f.length-1),se(f[h]),await oe("FeedbackSelector: Traverse to previous feedback",f[h])},async()=>{h<f.length-1?n(4,h++,h):n(4,h=0),se(f[h]),await oe("FeedbackSelector: Traverse to next feedback",f[h])},async e=>{ie(e.start_timestamp,i),await oe("FeedbackSelector: Seeked to start timestamp",e.start_timestamp)},async e=>{ie(e.end_timestamp,i),await oe("FeedbackSelector: Seeked to end timestamp",e.end_timestamp)},async()=>{if(("video"in g||"audio"in g||"transcript_list"in g||f.length>0)&&(g.video||g.audio||g.transcript_list)){if(!window.confirm("Starting a new recording will clear all highlighted feedback and overwrite the existing recording. Do you want to proceed?"))return}n(1,f=[]),F(),await oe("FeedbackSelector: Start recording",null)},async()=>{S(),await oe("FeedbackSelector: Resume recording",null)},async()=>{q(),await oe("FeedbackSelector: Pause recording",null)},async()=>{n(10,y=!0),await C(),n(10,y=!1),await oe("FeedbackSelector: Stop recording",g)},function(){u=this.files,n(8,u)},function(e){L[e?"unshift":"push"]((()=>{p=e,n(9,p)}))},async e=>{n(8,u=e.target.files),await oe("FeedbackSelector: Select media file",u)},()=>{n(2,o.style.visibility="visible",o)},()=>{n(2,o.style.visibility="hidden",o)},function(e){L[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(){m=this.checked,n(3,m)},async()=>{oe("FeedbackSelector: Check transcribe",m)},async()=>{n(10,y=!0),await N(),n(10,y=!1),await oe("FeedbackSelector: Upload media",g)},function(){u=this.files,n(8,u)},function(e){L[e?"unshift":"push"]((()=>{p=e,n(9,p)}))},async e=>{n(8,u=e.target.files),await oe("FeedbackSelector: Select transcript file",u)},async()=>{n(10,y=!0),await E(),n(10,y=!1),await oe("FeedbackSelector: Upload transcript",g)},async()=>{if(f.length>0){if(!window.confirm("Auto-detecting again will clear all feedback highlighted. Do you want to proceed?"))return}n(10,y=!0),n(12,x=0);let e=g.transcript_list,t=Math.ceil(e.length/4),o=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(11,_="Detecting feedback in transcript ...");for(let e=0;e<o.length;e++){let t=await Le(o[e]);n(1,f=f.concat(t)),n(12,x=20*(e+1)),await ne(250)}n(1,f),console.log(f);for(let e=0;e<f.length;e++){n(1,f[e].id=e+1,f);let t=f[e].dialogue_id,o=Ce(g.transcript_list,t);n(1,f[e].excerpt_reference=o,f)}n(1,f),n(11,_="Highlighting feedback ..."),P(f),await ne(500),n(12,x=100),console.log("Feedback: "+f[0]),n(10,y=!1),n(12,x=0),n(11,_=""),await oe("FeedbackSelector: Auto-detect feedback",f)},async()=>{let e=j("positive");await oe("FeedbackSelector: Add positive feedback",e)},async()=>{let e=j("critical");await oe("FeedbackSelector: Add critical feedback",e)},async()=>{let e=O();await oe("FeedbackSelector: Remove feedback",e)},function(e){L[e?"unshift":"push"]((()=>{i=e,n(5,i)}))},function(e){L[e?"unshift":"push"]((()=>{i=e,n(5,i)}))},function(e){L[e?"unshift":"push"]((()=>{i=e,n(5,i)}))}]}class Pe extends X{constructor(e){super(),K(this,e,Me,_e,s,{recording:0,feedback_list:1},null,[-1,-1,-1])}}function De(t){let n,i,s,c,a,r,p;return{c(){n=g("div"),i=g("input"),s=h(),c=g("span"),a=m(t[0]),k(i,"type","range"),k(i,"min",t[1]),k(i,"max",t[2]),k(i,"step",t[3]),k(i,"id","rangeSlider"),k(i,"class","svelte-ohnqtn"),k(c,"id","sliderValue"),k(n,"class","centered spaced"),x(n,"width","100%"),x(n,"height","100%")},m(e,o){d(e,n,o),l(n,i),_(i,t[0]),l(n,s),l(n,c),l(c,a),r||(p=[b(i,"change",t[4]),b(i,"input",t[4])],r=!0)},p(e,[t]){2&t&&k(i,"min",e[1]),4&t&&k(i,"max",e[2]),8&t&&k(i,"step",e[3]),1&t&&_(i,e[0]),1&t&&y(a,e[0])},i:e,o:e,d(e){e&&u(n),r=!1,o(p)}}}function Re(e,t,n){let{min:o=0}=t,{max:i=2}=t,{step:s=.1}=t,{value:c=1}=t;return e.$$set=e=>{"min"in e&&n(1,o=e.min),"max"in e&&n(2,i=e.max),"step"in e&&n(3,s=e.step),"value"in e&&n(0,c=e.value)},[c,o,i,s,function(){c=function(e){return""===e?null:+e}(this.value),n(0,c)}]}class Ae extends X{constructor(e){super(),K(this,e,Re,De,s,{min:1,max:2,step:3,value:0})}}function He(e,t,n){const o=e.slice();return o[119]=t[n],o}function Ue(e,t,n){const o=e.slice();return o[122]=t[n],o[110]=n,o}function Ie(e,t,n){const o=e.slice();return o[122]=t[n],o[110]=n,o}function Je(e,t,n){const o=e.slice();return o[114]=t[n],o[110]=n,o}function Be(e,t,n){const o=e.slice();return o[116]=t[n],o}function Ve(e,t,n){const o=e.slice();return o[111]=t[n],o}function ze(e,t,n){const o=e.slice();return o[108]=t[n],o[110]=n,o}function Ge(e,t,n){const o=e.slice();return o[125]=t[n],o[110]=n,o}function We(e,t,n){const o=e.slice();return o[127]=t[n],o[110]=n,o}function Ye(e,t,n){const o=e.slice();return o[127]=t[n],o[128]=t,o[110]=n,o}function Qe(e,t,n){const o=e.slice();return o[125]=t[n],o[110]=n,o}function Ke(e){let t,n,o,i,s=e[125]+"";function c(){return e[46](e[110])}return{c(){t=g("button"),n=m(s),k(t,"class","tab svelte-o0vqi5"),F(t,"active",e[110]===e[13]),F(t,"right-bordered",e[110]<e[32].length-1)},m(e,s){d(e,t,s),l(t,n),o||(i=b(t,"click",c),o=!0)},p(n,o){e=n,8192&o[0]&&F(t,"active",e[110]===e[13])},d(e){e&&u(t),o=!1,i()}}}function Xe(e){let t,n=e[0],o=[];for(let t=0;t<n.length;t+=1)o[t]=tt(We(e,n,t));return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();k(t,"class","grid svelte-o0vqi5"),x(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(2049&i[0]|16&i[1]){let s;for(n=e[0],s=0;s<n.length;s+=1){const c=We(e,n,s);o[s]?o[s].p(c,i):(o[s]=tt(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function Ze(e){let t,n,i,s,c,a,f,m,v,w,y,_,$,F,q,T,S,L,C,N,E,j,O,M,P,D;function R(e,t){return e[28]&&"quote"===e[27]?ot:nt}let A=R(e),H=A(e);function U(e,t){return e[28]&&"speaker"===e[27]?st:it}let I=U(e),J=I(e),B=e[0],V=[];for(let t=0;t<B.length;t+=1)V[t]=ft(Ye(e,B,t));return{c(){t=g("div"),n=g("div"),i=g("span"),i.innerHTML="<strong>ID</strong>",s=h(),c=g("span"),a=g("strong"),a.textContent="Feedback",f=h(),m=g("button"),H.c(),v=h(),w=g("span"),y=g("strong"),y.textContent="Speaker",_=h(),$=g("button"),J.c(),F=h(),q=g("span"),q.innerHTML="<strong>Actions</strong>",T=h(),S=g("span"),L=g("strong"),L.textContent="Done?",C=h(),N=g("button"),E=g("img"),M=h();for(let e=0;e<V.length;e+=1)V[e].c();k(i,"class","centered id-col svelte-o0vqi5"),k(m,"class","action-button"),k(c,"class","centered row spaced feedback-col svelte-o0vqi5"),k($,"class","action-button"),k(w,"class","centered row spaced speaker-col svelte-o0vqi5"),k(q,"id","feedback-buttons"),k(q,"class","centered row actions-col svelte-o0vqi5"),x(E,"height","1rem"),x(E,"width","1rem"),r(E.src,j=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||k(E,"src",j),k(E,"alt",O=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending"),k(E,"class","mini-icon"),k(N,"class","action-button"),k(S,"class","centered row spaced done-col svelte-o0vqi5"),k(n,"class","feedback-header row svelte-o0vqi5"),k(t,"class","column"),x(t,"overflow-y","auto")},m(o,r){d(o,t,r),l(t,n),l(n,i),l(n,s),l(n,c),l(c,a),l(c,f),l(c,m),H.m(m,null),l(n,v),l(n,w),l(w,y),l(w,_),l(w,$),J.m($,null),l(n,F),l(n,q),l(n,T),l(n,S),l(S,L),l(S,C),l(S,N),l(N,E),l(t,M);for(let e=0;e<V.length;e+=1)V[e]&&V[e].m(t,null);P||(D=[b(m,"click",e[47]),b($,"click",e[48]),b(N,"click",e[49])],P=!0)},p(e,n){if(A!==(A=R(e))&&(H.d(1),H=A(e),H&&(H.c(),H.m(m,null))),I!==(I=U(e))&&(J.d(1),J=I(e),J&&(J.c(),J.m($,null))),402653184&n[0]&&!r(E.src,j=e[28]&&"done"===e[27]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&k(E,"src",j),402653184&n[0]&&O!==(O=e[28]&&"done"===e[27]?"Sort ascending":"Sort descending")&&k(E,"alt",O),39441&n[0]|280&n[1]){let o;for(B=e[0],o=0;o<B.length;o+=1){const i=Ye(e,B,o);V[o]?V[o].p(i,n):(V[o]=ft(i),V[o].c(),V[o].m(t,null))}for(;o<V.length;o+=1)V[o].d(1);V.length=B.length}},d(e){e&&u(t),H.d(),J.d(),p(V,e),P=!1,o(D)}}}function et(e){let t,n,o,i,s,c,a,r,p,f,v,w,_,x,$=e[127].quote+"",q=e[127].speaker+"";function T(...t){return e[59](e[127],...t)}return{c(){t=g("div"),n=g("p"),o=m('"'),i=m($),s=m('"'),c=h(),a=g("br"),r=h(),p=g("span"),f=m("- "),v=m(q),w=h(),k(t,"class","positive-feedback-note svelte-o0vqi5"),F(t,"selected",e[127]===e[11])},m(e,u){d(e,t,u),l(t,n),l(n,o),l(n,i),l(n,s),l(t,c),l(t,a),l(t,r),l(t,p),l(p,f),l(p,v),l(t,w),_||(x=b(t,"click",T),_=!0)},p(n,o){e=n,1&o[0]&&$!==($=e[127].quote+"")&&y(i,$),1&o[0]&&q!==(q=e[127].speaker+"")&&y(v,q),2049&o[0]&&F(t,"selected",e[127]===e[11])},d(e){e&&u(t),_=!1,x()}}}function tt(e){let t,n="positive"===e[127].type&&et(e);return{c(){n&&n.c(),t=v()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"positive"===e[127].type?n?n.p(e,o):(n=et(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function nt(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||k(t,"src","./logos/descending-sort-svgrepo-com.svg"),k(t,"alt","Sort descending"),k(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ot(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||k(t,"src","./logos/ascending-sort-svgrepo-com.svg"),k(t,"alt","Sort ascending"),k(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function it(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),r(t.src,n="./logos/descending-sort-svgrepo-com.svg")||k(t,"src","./logos/descending-sort-svgrepo-com.svg"),k(t,"alt","Sort descending"),k(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function st(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),r(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||k(t,"src","./logos/ascending-sort-svgrepo-com.svg"),k(t,"alt","Sort ascending"),k(t,"class","mini-icon")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function ct(e){let t,n,i,s,c,a,r,p,f,v,w,_,x,$,q,T,S,L,C,N,E,j,O,M,P,D,R,A=e[127].id+"",H=(e[127].speaker?e[127].speaker:"Unknown")+"";function U(e,t){return"excerpt_reference"in e[127]?rt:at}let I=U(e),J=I(e);function B(){return e[50](e[127])}function V(e,t){return e[127].positivised_quote&&e[127].show_paraphrased?pt:ut}let z=V(e),G=z(e);function W(){return e[53](e[127],e[128],e[110])}function Y(){return e[54](e[127])}function Q(){return e[55](e[127])}function K(){return e[56](e[127])}function X(){e[57].call(M,e[128],e[110])}function Z(...t){return e[58](e[127],...t)}return{c(){t=g("div"),n=g("span"),i=g("strong"),s=m(A),c=h(),a=g("div"),r=g("span"),p=g("span"),J.c(),f=h(),G.c(),v=h(),w=g("span"),_=m(H),x=h(),$=g("div"),q=g("button"),q.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon"/>\n                                            Positivize',T=h(),S=g("button"),S.innerHTML='<img src="./logos/add-ellipse-svgrepo-com.svg" alt="Add feedback as context" class="action-icon"/>\n                                            Select Context',L=h(),C=g("button"),C.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Add Note',N=h(),E=g("button"),E.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon"/>\n                                            Delete',j=h(),O=g("span"),M=g("input"),P=h(),k(n,"class","id-col svelte-o0vqi5"),k(p,"class","timestamp svelte-o0vqi5"),k(r,"class",""),k(a,"class","column feedback-col svelte-o0vqi5"),k(w,"class","centered speaker-col svelte-o0vqi5"),k(q,"class","action-button"),k(S,"class","action-button centered column"),k(C,"class","action-button"),k(E,"class","action-button"),k($,"id","feedback-buttons"),k($,"class","row centered spaced actions-col svelte-o0vqi5"),k(M,"type","checkbox"),k(O,"class","centered done-col svelte-o0vqi5"),k(t,"class","feedback-row row bordered padded svelte-o0vqi5"),F(t,"done",e[127].done),F(t,"selected",e[127]===e[11])},m(o,u){d(o,t,u),l(t,n),l(n,i),l(i,s),l(t,c),l(t,a),l(a,r),l(r,p),J.m(p,null),l(r,f),G.m(r,null),l(t,v),l(t,w),l(w,_),l(t,x),l(t,$),l($,q),l($,T),l($,S),l($,L),l($,C),l($,N),l($,E),l(t,j),l(t,O),l(O,M),M.checked=e[127].done,l(t,P),D||(R=[b(p,"click",B),b(q,"click",W),b(S,"click",Y),b(C,"click",Q),b(E,"click",K),b(M,"change",X),b(t,"click",Z)],D=!0)},p(n,o){e=n,1&o[0]&&A!==(A=e[127].id+"")&&y(s,A),I===(I=U(e))&&J?J.p(e,o):(J.d(1),J=I(e),J&&(J.c(),J.m(p,null))),z===(z=V(e))&&G?G.p(e,o):(G.d(1),G=z(e),G&&(G.c(),G.m(r,null))),1&o[0]&&H!==(H=(e[127].speaker?e[127].speaker:"Unknown")+"")&&y(_,H),1&o[0]&&(M.checked=e[127].done),1&o[0]&&F(t,"done",e[127].done),2049&o[0]&&F(t,"selected",e[127]===e[11])},d(e){e&&u(t),J.d(),G.d(),D=!1,o(R)}}}function at(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function rt(e){let t;function n(e,t){return"start_timestamp"in e[127].excerpt_reference?dt:lt}let o=n(e),i=o(e);return{c(){i.c(),t=v()},m(e,n){i.m(e,n),d(e,t,n)},p(e,s){o===(o=n(e))&&i?i.p(e,s):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function lt(t){let n;return{c(){n=m("[00:00:00]")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function dt(e){let t,n,o,i=e[127].excerpt_reference.start_timestamp+"";return{c(){t=m("["),n=m(i),o=m("]")},m(e,i){d(e,t,i),d(e,n,i),d(e,o,i)},p(e,t){1&t[0]&&i!==(i=e[127].excerpt_reference.start_timestamp+"")&&y(n,i)},d(e){e&&u(t),e&&u(n),e&&u(o)}}}function ut(e){let t,n,o,i,s=e[127].quote+"",c=e[127].positivised_quote&&!e[127].show_paraphrased&&gt(e);return{c(){t=m('"'),n=m(s),o=m('" '),c&&c.c(),i=v()},m(e,s){d(e,t,s),d(e,n,s),d(e,o,s),c&&c.m(e,s),d(e,i,s)},p(e,t){1&t[0]&&s!==(s=e[127].quote+"")&&y(n,s),e[127].positivised_quote&&!e[127].show_paraphrased?c?c.p(e,t):(c=gt(e),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(e){e&&u(t),e&&u(n),e&&u(o),c&&c.d(e),e&&u(i)}}}function pt(e){let t,n,o,i,s,c,a,r=e[127].positivised_quote+"";function l(){return e[51](e[127])}return{c(){t=g("strong"),t.textContent="(Paraphrased Feedback)",n=m(' "'),o=m(r),i=m('" \n                                                '),s=g("span"),s.textContent="(View original quote)",k(s,"class","clickable svelte-o0vqi5")},m(e,r){d(e,t,r),d(e,n,r),d(e,o,r),d(e,i,r),d(e,s,r),c||(a=b(s,"click",l),c=!0)},p(t,n){e=t,1&n[0]&&r!==(r=e[127].positivised_quote+"")&&y(o,r)},d(e){e&&u(t),e&&u(n),e&&u(o),e&&u(i),e&&u(s),c=!1,a()}}}function gt(e){let t,n,o;function i(){return e[52](e[127])}return{c(){t=g("span"),t.textContent="(View paraphrased quote)",k(t,"class","clickable svelte-o0vqi5")},m(e,s){d(e,t,s),n||(o=b(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function ft(e){let t,n="critical"===e[127].type&&ct(e);return{c(){n&&n.c(),t=v()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"critical"===e[127].type?n?n.p(e,o):(n=ct(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function mt(e){let t,n,o,i,s=e[125]+"";function c(){return e[60](e[110])}return{c(){t=g("button"),n=m(s),k(t,"class","tab svelte-o0vqi5"),F(t,"active",e[110]===e[12]),F(t,"right-bordered",e[110]<e[33].length-1)},m(e,s){d(e,t,s),l(t,n),o||(i=b(t,"click",c),o=!0)},p(n,o){e=n,4096&o[0]&&F(t,"active",e[110]===e[12])},d(e){e&&u(t),o=!1,i()}}}function ht(t){let n,i,s,c,a,r,p,f,m,v,w,y,_,$,q,T,S;function L(e,t){return e[3].length>0?kt:wt}let C=L(t),N=C(t),E=t[29]&&_t(t);function j(e,t){return 16&t[0]&&(q=null),null==q&&(q=!!(Object.keys(e[4]).length>0)),q?$t:xt}let O=j(t,[-1,-1,-1,-1,-1]),M=O(t);return{c(){n=g("div"),i=g("div"),s=g("div"),s.innerHTML='<span style="text-decoration: underline;"><strong>My Notes</strong></span>',c=h(),a=g("div"),N.c(),r=h(),E&&E.c(),p=h(),f=g("div"),m=g("button"),m.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                    Add Note',v=h(),w=g("button"),w.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                    Delete all',y=h(),_=g("div"),_.innerHTML='<span style="text-decoration: underline;"><strong>My Feedback Notes</strong></span>',$=h(),M.c(),k(s,"class","row centered"),x(s,"width","100%"),x(s,"height","auto"),k(a,"class","column bordered"),x(a,"width","100%"),x(a,"height","auto"),F(a,"centered",t[3].length<=0),k(m,"class","action-button centered column"),k(w,"class","action-button centered column"),k(f,"class","row centered spaced"),k(i,"class","column centered spaced padded"),x(i,"width","100%"),x(i,"height","auto"),k(_,"class","row centered"),x(_,"width","100%"),x(_,"height","auto"),k(n,"class","column spaced padded"),x(n,"width","100%"),x(n,"height","100%"),x(n,"overflow-y","auto")},m(e,o){d(e,n,o),l(n,i),l(i,s),l(i,c),l(i,a),N.m(a,null),l(a,r),E&&E.m(a,null),l(i,p),l(i,f),l(f,m),l(f,v),l(f,w),l(n,y),l(n,_),l(n,$),M.m(n,null),T||(S=[b(m,"click",t[97]),b(w,"click",t[98])],T=!0)},p(e,t){C===(C=L(e))&&N?N.p(e,t):(N.d(1),N=C(e),N&&(N.c(),N.m(a,r))),e[29]?E?E.p(e,t):(E=_t(e),E.c(),E.m(a,null)):E&&(E.d(1),E=null),8&t[0]&&F(a,"centered",e[3].length<=0),O===(O=j(e,t))&&M?M.p(e,t):(M.d(1),M=O(e),M&&(M.c(),M.m(n,null)))},i:e,o:e,d(e){e&&u(n),N.d(),E&&E.d(),M.d(),T=!1,o(S)}}}function vt(e){let t,n,o,i,s,c,a,p,f,m,v,w;const y=[Nt,Ct],_=[];function $(e,t){return e[5]?1:0}return p=$(e),f=_[p]=y[p](e),{c(){t=g("div"),n=g("div"),o=g("button"),i=g("img"),a=h(),f.c(),k(i,"class","action-icon"),r(i.src,s=e[5]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg")||k(i,"src",s),k(i,"alt",c=e[5]?"Exit hatbot settings":"Open chatbot settings"),x(i,"width","2.5rem"),x(i,"height","2.5rem"),k(o,"class","action-button"),k(n,"id","chatbot-header"),k(n,"class","padded row svelte-o0vqi5"),k(t,"id","chatbot-tab-content"),k(t,"class","column svelte-o0vqi5")},m(s,c){d(s,t,c),l(t,n),l(n,o),l(o,i),l(t,a),_[p].m(t,null),m=!0,v||(w=b(o,"click",e[66]),v=!0)},p(e,n){(!m||32&n[0]&&!r(i.src,s=e[5]?"./logos/exit-svgrepo-com.svg":"./logos/settings-svgrepo-com.svg"))&&k(i,"src",s),(!m||32&n[0]&&c!==(c=e[5]?"Exit hatbot settings":"Open chatbot settings"))&&k(i,"alt",c);let o=p;p=$(e),p===o?_[p].p(e,n):(I(),V(_[o],1,1,(()=>{_[o]=null})),J(),f=_[p],f?f.p(e,n):(f=_[p]=y[p](e),f.c()),B(f,1),f.m(t,null))},i(e){m||(B(f),m=!0)},o(e){V(f),m=!1},d(e){e&&u(t),_[p].d(),v=!1,w()}}}function bt(t){let n,o,i,s;function c(e,t){return e[2]&&e[2].video?Wt:e[2]&&e[2].audio?Gt:zt}let a=c(t),r=a(t),p=t[2]&&t[2].transcript&&Yt(t);return{c(){n=g("div"),o=g("div"),r.c(),i=h(),s=g("div"),p&&p.c(),k(o,"id","media-player-area"),k(o,"class","bordered svelte-o0vqi5"),k(s,"id","transcript-area"),k(s,"class","column bordered spaced svelte-o0vqi5"),k(n,"class","column padded spaced"),x(n,"width","100%"),x(n,"height","100%")},m(e,t){d(e,n,t),l(n,o),r.m(o,null),l(n,i),l(n,s),p&&p.m(s,null)},p(e,t){a===(a=c(e))&&r?r.p(e,t):(r.d(1),r=a(e),r&&(r.c(),r.m(o,null))),e[2]&&e[2].transcript?p?p.p(e,t):(p=Yt(e),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&u(n),r.d(),p&&p.d()}}}function wt(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",k(n,"class","row padded space-between centered")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function kt(e){let t,n=e[3],o=[];for(let t=0;t<n.length;t+=1)o[t]=yt(Ie(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=v()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(8&i[0]|8192&i[1]){let s;for(n=e[3],s=0;s<n.length;s+=1){const c=Ie(e,n,s);o[s]?o[s].p(c,i):(o[s]=yt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function yt(e){let t,n,o,i,s,c,a,r,p,f,v,w=e[122]+"";function _(){return e[93](e[110],e[122])}return{c(){t=g("div"),n=g("p"),o=m(w),i=h(),s=g("div"),c=g("button"),c.textContent="Edit",a=h(),r=g("button"),r.textContent="Delete",p=h(),k(s,"class","row"),k(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),l(t,p),f||(v=b(r,"click",_),f=!0)},p(t,n){e=t,8&n[0]&&w!==(w=e[122]+"")&&y(o,w)},d(e){e&&u(t),f=!1,v()}}}function _t(e){let t,n,i,s,c,a,r,p,f;return{c(){t=g("div"),n=g("input"),i=h(),s=g("div"),c=g("button"),c.textContent="Confirm",a=h(),r=g("button"),r.textContent="Cancel",k(n,"type","text"),k(n,"placeholder","Enter your note here"),k(c,"class","action-button"),k(r,"class","action-button"),k(s,"class","row spaced"),k(t,"class","row padded bordered space-between"),x(t,"width","100%"),x(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),_(n,e[30]),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),p||(f=[b(n,"input",e[94]),b(c,"click",e[95]),b(r,"click",e[96])],p=!0)},p(e,t){1073741824&t[0]&&n.value!==e[30]&&_(n,e[30])},d(e){e&&u(t),p=!1,o(f)}}}function xt(t){let n;return{c(){n=g("div"),n.innerHTML='<div class="row space-between centered" style="width:100%; height:auto;"><span>No feedback notes added. Feel free to add notes on your feedback by clicking &quot;Add Note&quot; on any of the critical feedback.</span></div>',k(n,"class","column centered spaced padded"),x(n,"width","100%"),x(n,"height","auto")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function $t(e){let t,n=Object.keys(e[4]).map(Number).sort(Zt),o=[];for(let t=0;t<n.length;t+=1)o[t]=Lt(He(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=v()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(1073741841&i[0]|24576&i[1]){let s;for(n=Object.keys(e[4]).map(Number).sort(Zt),s=0;s<n.length;s+=1){const c=He(e,n,s);o[s]?o[s].p(c,i):(o[s]=Lt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Ft(t){let n;return{c(){n=g("div"),n.innerHTML="<span>No notes added. Feel free to add a note.</span>",k(n,"class","row padded centered space-between")},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function qt(e){let t,n=e[4][e[119]].notes,o=[];for(let t=0;t<n.length;t+=1)o[t]=Tt(Ue(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=v()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(16&i[0]|8192&i[1]){let s;for(n=e[4][e[119]].notes,s=0;s<n.length;s+=1){const c=Ue(e,n,s);o[s]?o[s].p(c,i):(o[s]=Tt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Tt(e){let t,n,o,i,s,c,a,r,p,f,v,w=e[122]+"";function _(){return e[100](e[110],e[119],e[122])}return{c(){t=g("div"),n=g("p"),o=m(w),i=h(),s=g("div"),c=g("button"),c.textContent="Edit",a=h(),r=g("button"),r.textContent="Delete",p=h(),k(c,"class","action-button"),k(r,"class","action-button"),k(s,"class","row spaced"),k(t,"class","row padded bordered space-between")},m(e,u){d(e,t,u),l(t,n),l(n,o),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),l(t,p),f||(v=b(r,"click",_),f=!0)},p(t,n){e=t,16&n[0]&&w!==(w=e[122]+"")&&y(o,w)},d(e){e&&u(t),f=!1,v()}}}function St(e){let t,n,i,s,c,a,r,p,f;function m(){return e[102](e[119])}function v(){return e[103](e[119])}return{c(){t=g("div"),n=g("input"),i=h(),s=g("div"),c=g("button"),c.textContent="Confirm",a=h(),r=g("button"),r.textContent="Cancel",k(n,"type","text"),k(n,"placeholder","Enter your note here"),k(c,"class","action=button"),k(r,"class","action=button"),k(s,"class","row spaced"),k(t,"class","row padded bordered space-between"),x(t,"width","100%"),x(t,"height","auto")},m(o,u){d(o,t,u),l(t,n),_(n,e[30]),l(t,i),l(t,s),l(s,c),l(s,a),l(s,r),p||(f=[b(n,"input",e[101]),b(c,"click",m),b(r,"click",v)],p=!0)},p(t,o){e=t,1073741824&o[0]&&n.value!==e[30]&&_(n,e[30])},d(e){e&&u(t),p=!1,o(f)}}}function Lt(e){let t,n,i,s,c,a,r,p,f,v,w,_,$,q,T,S,L,C,N,E,j,O,M,P,D=e[119]+"",R=e[0][e[119]-1].quote.slice(0,70)+"";function A(){return e[99](e[119])}function H(e,t){return e[4][e[119]].notes.length>0?qt:Ft}let U=H(e),I=U(e),J=e[4][e[119]].is_adding&&St(e);function B(){return e[104](e[119])}function V(){return e[105](e[119])}return{c(){t=g("div"),n=g("div"),i=g("span"),s=g("strong"),c=m("Feedback #"),a=m(D),r=m(" Notes:"),p=h(),f=m(R),v=m("..."),w=h(),_=g("button"),_.textContent="Delete",$=h(),q=g("div"),I.c(),T=h(),J&&J.c(),S=h(),L=g("div"),C=g("button"),C.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add Note" class="action-icon"/>\n                                            Add Note',N=h(),E=g("button"),E.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Delete all notes" class="action-icon"/>\n                                            Delete all',j=h(),k(n,"class","row space-between"),x(n,"width","100%"),x(n,"height","auto"),k(q,"class","column bordered"),x(q,"width","100%"),x(q,"height","auto"),F(q,"centered",e[4][e[119]].notes.length<=0),k(C,"class","action-button centered column"),k(E,"class","action-button centered column"),k(L,"class","row centered spaced"),k(t,"id",O="feedback-note-section-"+e[119]),k(t,"class","column centered spaced padded svelte-o0vqi5"),x(t,"width","100%"),x(t,"height","auto")},m(e,o){d(e,t,o),l(t,n),l(n,i),l(i,s),l(s,c),l(s,a),l(s,r),l(i,p),l(i,f),l(i,v),l(n,w),l(n,_),l(t,$),l(t,q),I.m(q,null),l(q,T),J&&J.m(q,null),l(t,S),l(t,L),l(L,C),l(L,N),l(L,E),l(t,j),M||(P=[b(_,"click",A),b(C,"click",B),b(E,"click",V)],M=!0)},p(n,o){e=n,16&o[0]&&D!==(D=e[119]+"")&&y(a,D),17&o[0]&&R!==(R=e[0][e[119]-1].quote.slice(0,70)+"")&&y(f,R),U===(U=H(e))&&I?I.p(e,o):(I.d(1),I=U(e),I&&(I.c(),I.m(q,T))),e[4][e[119]].is_adding?J?J.p(e,o):(J=St(e),J.c(),J.m(q,null)):J&&(J.d(1),J=null),16&o[0]&&F(q,"centered",e[4][e[119]].notes.length<=0),16&o[0]&&O!==(O="feedback-note-section-"+e[119])&&k(t,"id",O)},d(e){e&&u(t),I.d(),J&&J.d(),M=!1,o(P)}}}function Ct(e){let t,n,i,s,c,a,f,v,w,y,_,q,T,S,C,N,E,j,P,D,R,A,H,U,I,J,Q,K,X,Z,ee,ne,oe,ie,se,ce,ae,re,le,de,ue,pe,ge,fe,me,he,ve=Object.keys(e[31]),be=[];for(let t=0;t<ve.length;t+=1)be[t]=Et(Be(e,ve,t));function we(t){e[84](t)}let ke={min:"0.0",max:"2.0",step:"0.1"};function ye(t){e[85](t)}void 0!==e[7]&&(ke.value=e[7]),T=new Ae({props:ke}),L.push((()=>z(T,"value",we)));let _e={min:"10.0",max:"4095.0",step:"1.0"};function xe(t){e[86](t)}function $e(t){e[87](t)}void 0!==e[8]&&(_e.value=e[8]),P=new Ae({props:_e}),L.push((()=>z(P,"value",ye)));let Fe={};function qe(e,t){return e[1].length>0?Ot:jt}void 0!==e[25]&&(Fe.progress=e[25]),void 0!==e[24]&&(Fe.status=e[24]),Q=new te({props:Fe}),L.push((()=>z(Q,"progress",xe))),L.push((()=>z(Q,"status",$e)));let Te=qe(e),Se=Te(e);return{c(){t=g("div"),n=g("div"),i=g("span"),i.innerHTML="<strong>Configurations</strong>",s=h(),c=g("div"),a=g("span"),a.textContent="Model:",f=h(),v=g("select");for(let e=0;e<be.length;e+=1)be[e].c();w=h(),y=g("div"),_=g("span"),_.textContent="Temperature:",q=h(),G(T.$$.fragment),C=h(),N=g("div"),E=g("span"),E.textContent="Max Output Tokens:",j=h(),G(P.$$.fragment),R=h(),A=g("div"),H=g("span"),H.innerHTML="<strong>Chatbot&#39;s Resources</strong>",U=h(),I=g("div"),J=g("div"),G(Q.$$.fragment),Z=h(),Se.c(),ee=h(),ne=g("div"),oe=g("input"),ie=h(),se=g("button"),ce=g("img"),re=m("\n                                            Add Document"),le=h(),de=g("button"),ue=g("img"),ge=m("\n                                            Remove All"),void 0===e[6]&&O((()=>e[83].call(v))),k(c,"class","row spaced centered"),x(c,"height","auto"),x(c,"width","100%"),k(y,"class","row spaced"),x(y,"height","auto"),x(y,"width","100%"),k(N,"class","row spaced"),x(N,"height","auto"),x(N,"width","100%"),k(n,"id","chatbot-configurations"),k(n,"class","column centered spaced padded bordered"),k(J,"class","overlay centered padded"),F(J,"invisible",!1===e[26]),k(I,"id","chatbot-rag-sources"),k(I,"class","column centered spaced padded bordered"),x(I,"width","100%"),x(I,"height","auto"),x(I,"overflow-y","auto"),k(oe,"type","file"),k(oe,"id","document_file_input"),k(oe,"class","gone"),r(ce.src,ae="./logos/add-ellipse-svgrepo-com.svg")||k(ce,"src","./logos/add-ellipse-svgrepo-com.svg"),k(ce,"alt","Add document"),k(ce,"class","action-icon"),se.disabled=e[26],k(se,"class","centered spaced column action-button"),r(ue.src,pe="./logos/delete-svgrepo-com.svg")||k(ue,"src","./logos/delete-svgrepo-com.svg"),k(ue,"alt","Remove all documents"),k(ue,"class","action-icon"),de.disabled=e[26],k(de,"class","centered spaced column action-button"),k(ne,"id","chatbot-rag-buttons"),k(ne,"class","row centered padded spaced"),x(ne,"width","100%"),x(ne,"height","auto"),k(A,"id","chatbot-rag-panel"),k(A,"class","column centered spaced padded bordered"),k(t,"id","chatbot-settings"),k(t,"class","column padded spaced"),x(t,"width","100%"),x(t,"height","95%")},m(o,r){d(o,t,r),l(t,n),l(n,i),l(n,s),l(n,c),l(c,a),l(c,f),l(c,v);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(v,null);$(v,e[6],!0),l(n,w),l(n,y),l(y,_),l(y,q),W(T,y,null),l(n,C),l(n,N),l(N,E),l(N,j),W(P,N,null),l(t,R),l(t,A),l(A,H),l(A,U),l(A,I),l(I,J),W(Q,J,null),l(I,Z),Se.m(I,null),l(A,ee),l(A,ne),l(ne,oe),e[89](oe),l(ne,ie),l(ne,se),l(se,ce),l(se,re),l(ne,le),l(ne,de),l(de,ue),l(de,ge),fe=!0,me||(he=[b(v,"change",e[83]),b(oe,"change",e[90]),b(se,"click",e[91]),b(de,"click",e[92])],me=!0)},p(e,t){if(1&t[1]){let n;for(ve=Object.keys(e[31]),n=0;n<ve.length;n+=1){const o=Be(e,ve,n);be[n]?be[n].p(o,t):(be[n]=Et(o),be[n].c(),be[n].m(v,null))}for(;n<be.length;n+=1)be[n].d(1);be.length=ve.length}64&t[0]|1&t[1]&&$(v,e[6]);const n={};!S&&128&t[0]&&(S=!0,n.value=e[7],M((()=>S=!1))),T.$set(n);const o={};!D&&256&t[0]&&(D=!0,o.value=e[8],M((()=>D=!1))),P.$set(o);const i={};!K&&33554432&t[0]&&(K=!0,i.progress=e[25],M((()=>K=!1))),!X&&16777216&t[0]&&(X=!0,i.status=e[24],M((()=>X=!1))),Q.$set(i),(!fe||67108864&t[0])&&F(J,"invisible",!1===e[26]),Te===(Te=qe(e))&&Se?Se.p(e,t):(Se.d(1),Se=Te(e),Se&&(Se.c(),Se.m(I,null))),(!fe||67108864&t[0])&&(se.disabled=e[26]),(!fe||67108864&t[0])&&(de.disabled=e[26])},i(e){fe||(B(T.$$.fragment,e),B(P.$$.fragment,e),B(Q.$$.fragment,e),fe=!0)},o(e){V(T.$$.fragment,e),V(P.$$.fragment,e),V(Q.$$.fragment,e),fe=!1},d(n){n&&u(t),p(be,n),Y(T),Y(P),Y(Q),Se.d(),e[89](null),me=!1,o(he)}}}function Nt(e){let t,n,i,s,c,a,f,m,v,y,$,q,T,S,C,N,E,j,O,P,D,R,A,H,U,I,J,Q,K,X,Z,ee,ne,oe,ie,se,ce,ae,re,le,de,ue,pe,ge,fe,me,he,ve=e[14],be=[];for(let t=0;t<ve.length;t+=1)be[t]=Ut(Ve(e,ve,t));function we(t){e[70](t)}function ke(t){e[71](t)}let ye={};function _e(e,t){return e[15]?Jt:It}void 0!==e[23]&&(ye.progress=e[23]),void 0!==e[22]&&(ye.status=e[22]),m=new te({props:ye}),L.push((()=>z(m,"progress",we))),L.push((()=>z(m,"status",ke)));let xe=_e(e),$e=xe(e);function Fe(e,t){return e[17]?Vt:Bt}let qe=Fe(e),Te=qe(e);return{c(){t=g("div"),n=g("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",i=h();for(let e=0;e<be.length;e+=1)be[e].c();s=h(),c=g("div"),a=g("p"),a.innerHTML="<strong>assistant:</strong>",f=h(),G(m.$$.fragment),$=h(),q=g("div"),T=h(),S=g("div"),C=g("div"),N=g("div"),E=g("span"),E.innerHTML="<strong>Feedback Context:</strong>",j=h(),$e.c(),P=h(),D=g("div"),R=g("span"),R.innerHTML="<strong>Suggested messages:</strong>",A=h(),H=g("div"),H.textContent="Explain feedback.",U=h(),I=g("div"),I.textContent="Brainstorm actions.",Q=h(),K=g("div"),Te.c(),Z=h(),ee=g("div"),ne=g("div"),oe=g("label"),ie=h(),se=g("input"),ce=h(),ae=g("button"),ae.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon"/>',re=h(),le=g("textarea"),de=h(),ue=g("button"),pe=g("img"),k(n,"class","assistant padded svelte-o0vqi5"),k(c,"class","assistant padded column svelte-o0vqi5"),F(c,"invisible",!1===e[21]),x(q,"height","20%"),x(q,"width","100%"),x(q,"background-color","white"),x(q,"color","white"),x(q,"cursor","default"),k(t,"id","chatbot-messages"),k(t,"class","column spaced bordered padded svelte-o0vqi5"),k(N,"id","contexts"),k(N,"class","column centered bordered svelte-o0vqi5"),k(N,"style",O=e[17]?"width:30%;":"width:45%;"),k(H,"class","suggested-message svelte-o0vqi5"),k(I,"class","suggested-message svelte-o0vqi5"),k(D,"id","suggested-messages"),k(D,"class","column centered bordered svelte-o0vqi5"),k(D,"style",J=e[17]?"width:30%;":"width:45%;"),k(K,"id","visual-context"),k(K,"class","column centered bordered svelte-o0vqi5"),k(K,"style",X=e[17]?"width:30%;":"display:none;"),k(C,"id","chatbot-utilities"),k(C,"class","row centered spaced svelte-o0vqi5"),k(oe,"for","image_upload"),x(oe,"display","none"),k(se,"accept","image/png, image/jpeg"),k(se,"type","file"),x(se,"display","none"),k(se,"id","image_upload"),k(se,"name","image_upload"),k(ae,"class","action-button centered column"),k(ne,"class","column spaced"),x(le,"width","100%"),x(le,"height","100%"),k(le,"placeholder","Type your message here..."),k(le,"id","textarea"),r(pe.src,ge="./logos/send-svgrepo-com.svg")||k(pe,"src","./logos/send-svgrepo-com.svg"),k(pe,"alt","Send"),k(pe,"class","action-icon"),k(ue,"class","action-button centered column"),ue.disabled=e[21],k(ee,"id","chatbot-input"),k(ee,"class","row spaced centered svelte-o0vqi5"),k(S,"id","chatbot-actions"),k(S,"class","column padded spaced centered svelte-o0vqi5")},m(o,r){d(o,t,r),l(t,n),l(t,i);for(let e=0;e<be.length;e+=1)be[e]&&be[e].m(t,null);l(t,s),l(t,c),l(c,a),l(c,f),W(m,c,null),l(t,$),l(t,q),d(o,T,r),d(o,S,r),l(S,C),l(C,N),l(N,E),l(N,j),$e.m(N,null),l(C,P),l(C,D),l(D,R),l(D,A),l(D,H),l(D,U),l(D,I),l(C,Q),l(C,K),Te.m(K,null),l(S,Z),l(S,ee),l(ee,ne),l(ne,oe),l(ne,ie),l(ne,se),e[77](se),l(ne,ce),l(ne,ae),l(ee,re),l(ee,le),_(le,e[10]),l(ee,de),l(ee,ue),l(ue,pe),fe=!0,me||(he=[b(H,"click",w(e[73])),b(I,"click",w(e[74])),b(se,"change",e[76]),b(se,"change",e[78]),b(ae,"click",w(e[79])),b(le,"input",e[80]),b(le,"keydown",e[81]),b(ue,"click",w(e[82]))],me=!0)},p(e,n){if(20480&n[0]|4096&n[1]){let o;for(ve=e[14],o=0;o<ve.length;o+=1){const i=Ve(e,ve,o);be[o]?be[o].p(i,n):(be[o]=Ut(i),be[o].c(),be[o].m(t,s))}for(;o<be.length;o+=1)be[o].d(1);be.length=ve.length}const o={};!v&&8388608&n[0]&&(v=!0,o.progress=e[23],M((()=>v=!1))),!y&&4194304&n[0]&&(y=!0,o.status=e[22],M((()=>y=!1))),m.$set(o),(!fe||2097152&n[0])&&F(c,"invisible",!1===e[21]),xe===(xe=_e(e))&&$e?$e.p(e,n):($e.d(1),$e=xe(e),$e&&($e.c(),$e.m(N,null))),(!fe||131072&n[0]&&O!==(O=e[17]?"width:30%;":"width:45%;"))&&k(N,"style",O),(!fe||131072&n[0]&&J!==(J=e[17]?"width:30%;":"width:45%;"))&&k(D,"style",J),qe===(qe=Fe(e))&&Te?Te.p(e,n):(Te.d(1),Te=qe(e),Te&&(Te.c(),Te.m(K,null))),(!fe||131072&n[0]&&X!==(X=e[17]?"width:30%;":"display:none;"))&&k(K,"style",X),1024&n[0]&&_(le,e[10]),(!fe||2097152&n[0])&&(ue.disabled=e[21])},i(e){fe||(B(m.$$.fragment,e),fe=!0)},o(e){V(m.$$.fragment,e),fe=!1},d(n){n&&u(t),p(be,n),Y(m),n&&u(T),n&&u(S),$e.d(),Te.d(),e[77](null),me=!1,o(he)}}}function Et(t){let n,o,i=t[116]+"";return{c(){n=g("option"),o=m(i),n.__value=t[116],n.value=n.__value},m(e,t){d(e,n,t),l(n,o)},p:e,d(e){e&&u(n)}}}function jt(t){let n;return{c(){n=g("span"),n.textContent="No resources available."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Ot(e){let t,n=e[1],o=[];for(let t=0;t<n.length;t+=1)o[t]=Mt(Je(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=v()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);d(e,t,n)},p(e,i){if(117440514&i[0]|1024&i[1]){let s;for(n=e[1],s=0;s<n.length;s+=1){const c=Je(e,n,s);o[s]?o[s].p(c,i):(o[s]=Mt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&u(t)}}}function Mt(e){let t,n,o,i,s,c,a,p,f,v=e[114]+"";function _(){return e[88](e[114],e[110])}return{c(){t=g("div"),n=m(v),o=h(),i=g("button"),s=g("img"),a=h(),r(s.src,c="./logos/delete-x-svgrepo-com.svg")||k(s,"src","./logos/delete-x-svgrepo-com.svg"),k(s,"alt","Remove document"),k(s,"class","mini-icon"),i.disabled=e[26],k(i,"class","action-button"),k(t,"class","row centered spaced bordered centered")},m(e,c){d(e,t,c),l(t,n),l(t,o),l(t,i),l(i,s),l(t,a),p||(f=b(i,"click",w(_)),p=!0)},p(t,o){e=t,2&o[0]&&v!==(v=e[114]+"")&&y(n,v),67108864&o[0]&&(i.disabled=e[26])},d(e){e&&u(t),p=!1,f()}}}function Pt(e){let t,n,i,s,c,a,r,p,f,v,w,_,x,$,F,q,T,S,L,C,N,E,j,O=e[111].role+"",M=e[111].content+"",P="context"in e[111]&&Dt(e),D="image"in e[111]&&Rt(e);function R(){return e[67](e[111])}let A="context"in e[111]&&At(e);function H(){return e[69](e[111])}let U="image"in e[111]&&"user"===e[111].role&&Ht(e);return{c(){t=g("div"),n=g("div"),i=g("div"),P&&P.c(),s=h(),D&&D.c(),c=h(),a=g("div"),r=g("button"),r.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add to my notes" class="mini-icon"/>',p=h(),A&&A.c(),f=h(),v=g("button"),v.innerHTML='<img src="./logos/copy-svgrepo-com.svg" alt="Copy note" class="mini-icon"/>',_=h(),x=g("div"),$=g("p"),F=g("strong"),q=m(O),T=m(":"),S=h(),L=m(M),C=h(),U&&U.c(),k(i,"class","row spaced"),k(r,"class","action-button column centered"),k(v,"class","action-button column centered"),k(a,"class","row spaced"),k(n,"class",w="message-header row "+("context"in e[111]||"image"in e[111]?"with-context":"no-context")+" svelte-o0vqi5"),k(x,"class","row"),k(t,"class",N=e[111].role+" padded column spaced svelte-o0vqi5")},m(e,o){d(e,t,o),l(t,n),l(n,i),P&&P.m(i,null),l(i,s),D&&D.m(i,null),l(n,c),l(n,a),l(a,r),l(a,p),A&&A.m(a,null),l(a,f),l(a,v),l(t,_),l(t,x),l(x,$),l($,F),l(F,q),l(F,T),l($,S),l($,L),l(t,C),U&&U.m(t,null),E||(j=[b(r,"click",R),b(v,"click",H)],E=!0)},p(o,c){"context"in(e=o)[111]?P?P.p(e,c):(P=Dt(e),P.c(),P.m(i,s)):P&&(P.d(1),P=null),"image"in e[111]?D?D.p(e,c):(D=Rt(e),D.c(),D.m(i,null)):D&&(D.d(1),D=null),"context"in e[111]?A?A.p(e,c):(A=At(e),A.c(),A.m(a,f)):A&&(A.d(1),A=null),16384&c[0]&&w!==(w="message-header row "+("context"in e[111]||"image"in e[111]?"with-context":"no-context")+" svelte-o0vqi5")&&k(n,"class",w),16384&c[0]&&O!==(O=e[111].role+"")&&y(q,O),16384&c[0]&&M!==(M=e[111].content+"")&&y(L,M),"image"in e[111]&&"user"===e[111].role?U?U.p(e,c):(U=Ht(e),U.c(),U.m(t,null)):U&&(U.d(1),U=null),16384&c[0]&&N!==(N=e[111].role+" padded column spaced svelte-o0vqi5")&&k(t,"class",N)},d(e){e&&u(t),P&&P.d(),D&&D.d(),A&&A.d(),U&&U.d(),E=!1,o(j)}}}function Dt(e){let t,n,o,i,s,c,a=e[111].context.id+"",r=(e[111].context.quote.length>40?e[111].context.quote.slice(0,40)+"...":e[111].context.quote)+"";return{c(){t=g("div"),n=g("small"),o=m("Context: F#"),i=m(a),s=h(),c=m(r),k(t,"class","context-tag feedback svelte-o0vqi5")},m(e,a){d(e,t,a),l(t,n),l(n,o),l(n,i),l(n,s),l(n,c)},p(e,t){16384&t[0]&&a!==(a=e[111].context.id+"")&&y(i,a),16384&t[0]&&r!==(r=(e[111].context.quote.length>40?e[111].context.quote.slice(0,40)+"...":e[111].context.quote)+"")&&y(c,r)},d(e){e&&u(t)}}}function Rt(e){let t,n,o,i="user"===e[111].role?"Attached image":"Response to image";return{c(){t=g("div"),n=g("small"),o=m(i),k(t,"class","context-tag image svelte-o0vqi5")},m(e,i){d(e,t,i),l(t,n),l(n,o)},p(e,t){16384&t[0]&&i!==(i="user"===e[111].role?"Attached image":"Response to image")&&y(o,i)},d(e){e&&u(t)}}}function At(e){let t,n,o;function i(){return e[68](e[111])}return{c(){t=g("button"),t.innerHTML='<img src="./logos/note-svgrepo-com.svg" alt="Add feedback note" class="mini-icon"/>',k(t,"class","action-button column centered")},m(e,s){d(e,t,s),n||(o=b(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,o()}}}function Ht(e){let t,n,o;return{c(){t=g("div"),n=g("img"),r(n.src,o=e[111].image)||k(n,"src",o),k(n,"alt","Visual context"),x(n,"width","50%"),x(n,"height","auto"),k(t,"class","column centered"),x(t,"width","100%")},m(e,o){d(e,t,o),l(t,n)},p(e,t){16384&t[0]&&!r(n.src,o=e[111].image)&&k(n,"src",o)},d(e){e&&u(t)}}}function Ut(e){let t,n="system"!=e[111].role&&Pt(e);return{c(){n&&n.c(),t=v()},m(e,o){n&&n.m(e,o),d(e,t,o)},p(e,o){"system"!=e[111].role?n?n.p(e,o):(n=Pt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function It(t){let n;return{c(){n=g("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function Jt(e){let t,n,o,i,s,c,a,r,p=e[15].quote.slice(0,20)+"";return{c(){t=g("div"),n=g("span"),o=m(p),i=m("..."),s=h(),c=g("button"),c.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon"/>',k(t,"class","suggested-message row  svelte-o0vqi5")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(n,i),l(t,s),l(t,c),a||(r=b(c,"click",w(e[72])),a=!0)},p(e,t){32768&t[0]&&p!==(p=e[15].quote.slice(0,20)+"")&&y(o,p)},d(e){e&&u(t),a=!1,r()}}}function Bt(t){return{c:e,m:e,p:e,d:e}}function Vt(e){let t,n,o,i,s,c,a,p,f;return{c(){t=g("span"),t.innerHTML="<strong>Attached image:</strong>",n=h(),o=g("div"),i=g("img"),c=h(),a=g("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove image" class="mini-icon"/>',r(i.src,s=e[17])||k(i,"src",s),k(i,"alt","Visual context"),x(i,"width","100%"),x(i,"height","100%"),k(o,"class","row"),x(o,"width","100%"),x(o,"height","100%")},m(s,r){d(s,t,r),d(s,n,r),d(s,o,r),l(o,i),l(o,c),l(o,a),p||(f=b(a,"click",w(e[75])),p=!0)},p(e,t){131072&t[0]&&!r(i.src,s=e[17])&&k(i,"src",s)},d(e){e&&u(t),e&&u(n),e&&u(o),p=!1,f()}}}function zt(t){let n,o;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',r(n.src,o="video.mp4")||k(n,"src","video.mp4"),n.controls=!0,x(n,"width","100%"),x(n,"height","100%")},m(e,o){d(e,n,o),t[63](n)},p:e,d(e){e&&u(n),t[63](null)}}}function Gt(e){let t,n;return{c(){t=g("audio"),r(t.src,n=e[2].audio)||k(t,"src",n),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(n,o){d(n,t,o),e[62](t)},p(e,o){4&o[0]&&!r(t.src,n=e[2].audio)&&k(t,"src",n)},d(n){n&&u(t),e[62](null)}}}function Wt(e){let t,n,o,i;return{c(){t=g("video"),n=g("track"),k(n,"kind","captions"),r(n.src,o="blank.vtt")||k(n,"src","blank.vtt"),k(n,"srclang","en"),r(t.src,i=e[2].video)||k(t,"src",i),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(o,i){d(o,t,i),l(t,n),e[61](t)},p(e,n){4&n[0]&&!r(t.src,i=e[2].video)&&k(t,"src",i)},d(n){n&&u(t),e[61](null)}}}function Yt(e){let t,n=e[2].transcript_list,o=[];for(let t=0;t<n.length;t+=1)o[t]=Qt(ze(e,n,t));return{c(){t=g("p");for(let e=0;e<o.length;e+=1)o[e].c();k(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null)},p(e,i){if(516&i[0]){let s;for(n=e[2].transcript_list,s=0;s<n.length;s+=1){const c=ze(e,n,s);o[s]?o[s].p(c,i):(o[s]=Qt(c),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&u(t),p(o,e)}}}function Qt(e){let t,n,i,s,c,a,r,p,f,v,w,_,x,$,F,q,T,S,L,C,N,E=e[108].start_timestamp+"",j=e[108].end_timestamp+"",O=e[108].speaker?e[108].speaker+":":"",M=e[108].dialogue+"";function P(){return e[64](e[108])}function D(){return e[65](e[108])}return{c(){t=g("span"),n=m("["),i=m(E),s=m("]"),c=m(" - "),a=g("span"),r=m("["),p=m(j),f=m("]"),v=h(),w=g("br"),_=h(),x=m(O),$=h(),F=g("span"),T=h(),S=g("br"),L=g("br"),k(t,"class","timestamp svelte-o0vqi5"),k(a,"class","timestamp svelte-o0vqi5"),k(F,"id",q=e[108].id),k(F,"class","svelte-o0vqi5")},m(e,o){d(e,t,o),l(t,n),l(t,i),l(t,s),d(e,c,o),d(e,a,o),l(a,r),l(a,p),l(a,f),d(e,v,o),d(e,w,o),d(e,_,o),d(e,x,o),d(e,$,o),d(e,F,o),F.innerHTML=M,d(e,T,o),d(e,S,o),d(e,L,o),C||(N=[b(t,"click",P),b(a,"click",D)],C=!0)},p(t,n){e=t,4&n[0]&&E!==(E=e[108].start_timestamp+"")&&y(i,E),4&n[0]&&j!==(j=e[108].end_timestamp+"")&&y(p,j),4&n[0]&&O!==(O=e[108].speaker?e[108].speaker+":":"")&&y(x,O),4&n[0]&&M!==(M=e[108].dialogue+"")&&(F.innerHTML=M),4&n[0]&&q!==(q=e[108].id)&&k(F,"id",q)},d(e){e&&u(t),e&&u(c),e&&u(a),e&&u(v),e&&u(w),e&&u(_),e&&u(x),e&&u($),e&&u(F),e&&u(T),e&&u(S),e&&u(L),C=!1,o(N)}}}function Kt(e){let t,n,o,i,s,c,a,r,f,m,v,w,y,_,$,F,q,T=e[32],S=[];for(let t=0;t<T.length;t+=1)S[t]=Ke(Qe(e,T,t));function L(e,t){return 0===e[13]?Ze:1===e[13]?Xe:void 0}let C=L(e),N=C&&C(e),E=e[33],j=[];for(let t=0;t<E.length;t+=1)j[t]=mt(Ge(e,E,t));const O=[bt,vt,ht],M=[];function P(e,t){return 0===e[12]?0:1===e[12]?1:2===e[12]?2:-1}return~(y=P(e))&&(_=M[y]=O[y](e)),{c(){t=g("div"),n=g("div"),o=g("div"),i=g("div");for(let e=0;e<S.length;e+=1)S[e].c();s=h(),c=g("div"),N&&N.c(),a=h(),r=g("div"),f=g("div"),m=g("div");for(let e=0;e<j.length;e+=1)j[e].c();v=h(),w=g("div"),_&&_.c(),k(i,"class","tab-header svelte-o0vqi5"),k(c,"class","tab-content padded svelte-o0vqi5"),x(c,"overflow-y","auto"),k(o,"class","tabbed-area bordered svelte-o0vqi5"),k(n,"id","left-panel"),k(n,"class","column svelte-o0vqi5"),k(m,"class","tab-header svelte-o0vqi5"),k(w,"class","tab-content column svelte-o0vqi5"),k(f,"class","tabbed-area bordered svelte-o0vqi5"),k(r,"id","right-panel"),k(r,"class","column  svelte-o0vqi5"),k(t,"id","feedback-list-page"),k(t,"class","spaced svelte-o0vqi5")},m(u,p){d(u,t,p),l(t,n),l(n,o),l(o,i);for(let e=0;e<S.length;e+=1)S[e]&&S[e].m(i,null);l(o,s),l(o,c),N&&N.m(c,null),l(t,a),l(t,r),l(r,f),l(f,m);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(m,null);l(f,v),l(f,w),~y&&M[y].m(w,null),$=!0,F||(q=b(t,"window:click",e[36]),F=!0)},p(e,t){if(8192&t[0]|2&t[1]){let n;for(T=e[32],n=0;n<T.length;n+=1){const o=Qe(e,T,n);S[n]?S[n].p(o,t):(S[n]=Ke(o),S[n].c(),S[n].m(i,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=T.length}if(C===(C=L(e))&&N?N.p(e,t):(N&&N.d(1),N=C&&C(e),N&&(N.c(),N.m(c,null))),4096&t[0]|4&t[1]){let n;for(E=e[33],n=0;n<E.length;n+=1){const o=Ge(e,E,n);j[n]?j[n].p(o,t):(j[n]=mt(o),j[n].c(),j[n].m(m,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=E.length}let n=y;y=P(e),y===n?~y&&M[y].p(e,t):(_&&(I(),V(M[n],1,1,(()=>{M[n]=null})),J()),~y?(_=M[y],_?_.p(e,t):(_=M[y]=O[y](e),_.c()),B(_,1),_.m(w,null)):_=null)},i(e){$||(B(_),$=!0)},o(e){V(_),$=!1},d(e){e&&u(t),p(S,e),N&&N.d(),p(j,e),~y&&M[y].d(),F=!1,q()}}}function Xt(e,t=!0){e.show_paraphrased=t}const Zt=(e,t)=>e-t;function en(e,t,n){let o,i,s,c,a,r,l,d,{feedback_list:u}=t,{recording:p}=t,{documents:g=[]}=t,f=[],m={1:{notes:["This is a note","This is another note"],is_adding:!1},2:{notes:["This is a note","This is another note"],is_adding:!1},3:{notes:["This is a note","This is another note"],is_adding:!1}},h=!1,v={"GPT-4o":"gpt-4o","Interior Designer GPT":"ft:gpt-3.5-turbo-0125:im-lab:int-des-full:9b2qf12W"},b="GPT-4o",w=0,k=256,y="",_=0,x=0,$=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}],F=["Critical Feedback","Positive Feedback"],q=["Transcript","Chatbot","Notes"],T=!1,S="",C=0,N="",E=0,j=!1;function O(e){i===e&&n(11,i=null),n(0,u=u.filter((t=>t!==e))),n(0,u)}function M(e,t){n(11,i=e),t.stopPropagation()}let P=null,D=!0;function R(e){P===e?n(28,D=!D):(n(27,P=e),n(28,D=!0)),u.sort(((t,n)=>t[e]<n[e]?D?-1:1:t[e]>n[e]?D?1:-1:0)),n(0,u)}async function A(e,t=null){let o=e.slice();if(T)return void alert("Please wait for the current message to be processed.");if(n(21,T=!0),""===e.trim())return void alert("Please enter a message.");let i={role:"user",content:e};if(t){i.context=t;let e="\n\nHere is the piece of feedback as context.";e+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',o+=e}let s={message:o,image_data:null,max_output_tokens:k,temperature:w,model:v[b]};if(a&&(i.image=a),c){n(22,S="Uploading image..."),n(23,C=30);let e=await async function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)}))}(c);s.image_data=e}$.push(i),n(14,$),console.log($),n(0,u),n(22,S="Thinking..."),n(23,C=50);const r=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error("Failed to send message");let l=(await r.json()).chatbot_response;n(22,S="Done!"),n(23,C=100),await ne(1200),await oe("FeedbackList: Sent message",[e,t,a]);let d={role:"assistant",content:l};t&&(d.context=t),a&&(d.image=a),$.push(d),n(14,$),n(0,u),n(21,T=!1),n(23,C=0)}function H(e){s===e?alert("This feedback is already added as context."):n(15,s=e)}async function U(e){const t=e.target.files;if(t)for(const e of t){const t=new FormData;t.append("file",e),n(25,E=50),n(24,N="Adding document... (this may take a while)");const o=await fetch("/add_document",{method:"POST",body:t});if(!o.ok)return null;let i=(await o.json()).document_name;g.push(i),n(1,g),n(24,N="Done!"),n(25,E=100),await ne(1200)}}async function I(e,t){return(await fetch("/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})).ok?(n(1,g=g.splice(t,1)),n(1,g),e):"failed"}async function J(){n(24,N="Removing all documents...");for(let e=0;e<g.length;e++){let t=g[e];n(25,E=e/g.length*100),await I(t,e)}n(24,N="Done!"),n(25,E=100),await ne(1e3),n(25,E=0)}let B=!1,V="";async function z(e,t=null,o=null){""!=e.trim()?t?t in m?(m[t].notes.push(e),n(4,m)):n(4,m[t]={notes:[e],is_adding:!1},m):(f.push(e),n(3,f)):alert("Please enter a note.")}async function G(e,t=null){t?(m[t].notes.splice(e,1),n(4,m)):(f.splice(e,1),n(3,f))}async function W(e=null){n(29,B=!1),z(V,e),n(30,V="")}return e.$$set=e=>{"feedback_list"in e&&n(0,u=e.feedback_list),"recording"in e&&n(2,p=e.recording),"documents"in e&&n(1,g=e.documents)},[u,g,p,f,m,h,b,w,k,o,y,i,_,x,$,s,c,a,r,l,d,T,S,C,N,E,j,P,D,B,V,v,F,q,O,M,function(){n(11,i=null)},R,A,H,U,I,J,z,G,W,async e=>{n(13,x=e),await oe("FeedbackList: Switched left panel tab",F[x])},async()=>{R("quote"),await oe("FeedbackList: Sorted feedback","quote")},async()=>{R("speaker"),await oe("FeedbackList: Sorted feedback","speaker")},async()=>{R("done"),await oe("FeedbackList: Sorted feedback","done")},async e=>{n(12,_=0),"excerpt_reference"in e&&"start_timestamp"in e.excerpt_reference&&(ie(e.excerpt_reference.start_timestamp,o),await oe("FeedbackList: Seeked to timestamp",e.excerpt_reference.start_timestamp))},async e=>{Xt(e,!1),await oe("FeedbackList: Show original quote",e.original_quote)},async e=>{Xt(e,!0),await oe("FeedbackList: Show paraphrased quote",e.positivised_quote)},async(e,t,o)=>{n(0,t[o].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),u),Xt(e,!0),n(0,u),await oe("FeedbackList: Positivize Quote",e)},async e=>{H(e),await oe("FeedbackList: Add as context",s)},async e=>{n(12,_=2),e.id in m?n(4,m[e.id].is_adding=!0,m):n(4,m[e.id]={notes:[],is_adding:!0},m)},async e=>{O(e),await oe("FeedbackList: Remove feedback",e)},function(e,t){e[t].done=this.checked,n(0,u)},async(e,t)=>{M(e,t),se(e),await oe("FeedbackList: Selected feedback",e)},async(e,t)=>{M(e,t),se(e),await oe("FeedbackList: Selected feedback",e)},async e=>{n(12,_=e),await oe("FeedbackList: Switched right panel tab",q[_])},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},function(e){L[e?"unshift":"push"]((()=>{o=e,n(9,o)}))},async e=>{ie(e.start_timestamp,o),await oe("FeedbackList: Seek to start timestamp",e.start_timestamp)},async e=>{ie(e.end_timestamp,o),await oe("FeedbackList: Seek to end timestamp",e.end_timestamp)},()=>{n(5,h=!h)},async e=>{n(12,_=2),z(e.role+": "+e.content),await oe("FeedbackList: Added note to My Notes",e)},async e=>{n(12,_=2),z(e.role+": "+e.content,"id"in e.context?e.context.id:null),await oe("FeedbackList: Added note to Feedback ID"+e.context.id,e)},async e=>{navigator.clipboard.writeText(e.role+": "+e.content),await oe("FeedbackList: Copied message",e)},function(e){C=e,n(23,C)},function(e){S=e,n(22,S)},async()=>{await oe("FeedbackList: Removed context",s),n(15,s=null)},async()=>{await A("Can you explain the following feedback?",s)},async()=>{await A("Can you brainstorm the tasks to do to address the following feedback?",s)},async()=>{await oe("FeedbackList: Removed image",a),n(17,a=null),n(16,c=null)},function(){r=this.value,n(18,r)},function(e){L[e?"unshift":"push"]((()=>{l=e,n(19,l)}))},async()=>{n(18,r=l.files),n(17,[a,c]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return[URL.createObjectURL(t),t];alert("Please select an image file.")}else console.log("No image selected.");return null}(r),a,n(16,c)),await oe(a?"FeedbackList: Uploaded image":"FeedbackList: Canceled uploading image",a)},async()=>{l.click()},function(){y=this.value,n(10,y)},e=>"Enter"===e.key&&A(y,s),async()=>{await A(y,s),n(10,y="")},function(){b=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(6,b),n(31,v)},function(e){w=e,n(7,w)},function(e){k=e,n(8,k)},function(e){E=e,n(25,E)},function(e){N=e,n(24,N)},async(e,t)=>{if(!window.confirm("Are you sure you want to delete this document? This cannot be undone."))return;n(26,j=!0),n(25,E=50),n(24,N="Removing document...");let o=await I(e,t);n(24,N="Done!"),n(25,E=100),n(26,j=!1),oe("FeedbackList: Removed document",o)},function(e){L[e?"unshift":"push"]((()=>{d=e,n(20,d)}))},async e=>{n(26,j=!0),await U(e),n(26,j=!1),oe("FeedbackList: Added document",e.target.files)},async()=>{window.confirm("Adding a new document will take a long time, since its information will be extracted. Do you want to proceed?")&&(document.getElementById("document_file_input").click(),await oe("FeedbackList: Added document","Document"))},async()=>{window.confirm("Are you sure you want to remove all documents? This cannot be undone.")&&(n(26,j=!0),await J(),n(26,j=!1),await oe("FeedbackList: Removed all documents","Documents"))},async(e,t)=>{G(e),await oe("FeedbackList: Removed note",t)},function(){V=this.value,n(30,V)},async()=>{W(),n(29,B=!1),await oe("FeedbackList: Added note to My Notes",V)},async()=>{n(29,B=!1),n(30,V=""),await oe("FeedbackList: Cancelled adding note to My Notes",V)},async()=>{n(29,B=!0)},async()=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(3,f=[]),n(3,f),await oe("FeedbackList: Removed all notes","My Notes"))},async e=>{let t="Are you sure you want to delete this feedback notes section? This cannot be undone";m[e].notes.length>0&&(t="Are you sure you want to delete this feedback notes section? This will delete all notes and cannot be undone."),window.confirm(t)&&(delete m[e],n(4,m),await oe("FeedbackList: Removed feedback notes section","Feedback ID"+e))},async(e,t,n)=>{G(e,t),await oe("FeedbackList: Removed note",n)},function(){V=this.value,n(30,V)},async e=>{W(e),n(4,m[e].is_adding=!1,m),await oe("FeedbackList: Added note to Feedback ID"+e,V)},async e=>{n(4,m[e].is_adding=!1,m),await oe("FeedbackList: Cancelled adding note to Feedback ID"+e,V),n(30,V="")},async e=>{n(4,m[e].is_adding=!0,m)},async e=>{window.confirm("Are you sure you want to delete all notes? This cannot be undone.")&&(n(4,m[e].notes=[],m),n(4,m),await oe("FeedbackList: Removed all notes","Feedback ID"+e))}]}class tn extends X{constructor(e){super(),K(this,e,en,Kt,s,{feedback_list:0,recording:2,documents:1},null,[-1,-1,-1,-1,-1])}}function nn(e){let t,n,i,s,c,a,p,f,v,w,y,_,$,q,T,S,C,N,E,j,O,P,D,R,A,H,U,I;function J(t){e[6](t)}function Q(t){e[7](t)}let K={};function X(t){e[8](t)}function Z(t){e[9](t)}function ee(t){e[10](t)}void 0!==e[1]&&(K.recording=e[1]),void 0!==e[2]&&(K.feedback_list=e[2]),s=new Pe({props:K}),L.push((()=>z(s,"recording",J))),L.push((()=>z(s,"feedback_list",Q)));let te={};return void 0!==e[3]&&(te.documents=e[3]),void 0!==e[2]&&(te.feedback_list=e[2]),void 0!==e[1]&&(te.recording=e[1]),v=new tn({props:te}),L.push((()=>z(v,"documents",X))),L.push((()=>z(v,"feedback_list",Z))),L.push((()=>z(v,"recording",ee))),{c(){t=g("main"),n=g("div"),i=g("div"),G(s.$$.fragment),p=h(),f=g("div"),G(v.$$.fragment),$=h(),q=g("div"),T=g("button"),S=g("img"),N=m("\n                Select Feedback"),j=h(),O=g("button"),P=m("View Feedback List\n                "),D=g("img"),x(i,"width","100%"),x(i,"height","100%"),F(i,"gone",0!=e[0]),x(f,"width","100%"),x(f,"height","100%"),F(f,"gone",1!=e[0]),k(n,"class","carousel-container svelte-qf1jde"),r(S.src,C="./logos/move-to-the-prev-page-symbol-svgrepo-com.svg")||k(S,"src","./logos/move-to-the-prev-page-symbol-svgrepo-com.svg"),k(S,"alt","Previous page"),k(S,"class","mini-icon"),k(T,"class","action-button row centered svelte-qf1jde"),T.disabled=E=0===e[0],F(T,"invisible",1!=e[0]),r(D.src,R="./logos/move-to-the-next-page-symbol-svgrepo-com.svg")||k(D,"src","./logos/move-to-the-next-page-symbol-svgrepo-com.svg"),k(D,"alt","Next page"),k(D,"class","mini-icon"),k(O,"class","action-button row centered svelte-qf1jde"),O.disabled=A=e[0]===on.length-1||e[2].length<=0,F(O,"invisible",0!=e[0]),k(q,"class","navigation centered spaced bordered row svelte-qf1jde")},m(o,c){d(o,t,c),l(t,n),l(n,i),W(s,i,null),l(n,p),l(n,f),W(v,f,null),l(t,$),l(t,q),l(q,T),l(T,S),l(T,N),l(q,j),l(q,O),l(O,P),l(O,D),H=!0,U||(I=[b(T,"click",e[5]),b(O,"click",e[4])],U=!0)},p(e,[t]){const n={};!c&&2&t&&(c=!0,n.recording=e[1],M((()=>c=!1))),!a&&4&t&&(a=!0,n.feedback_list=e[2],M((()=>a=!1))),s.$set(n),(!H||1&t)&&F(i,"gone",0!=e[0]);const o={};!w&&8&t&&(w=!0,o.documents=e[3],M((()=>w=!1))),!y&&4&t&&(y=!0,o.feedback_list=e[2],M((()=>y=!1))),!_&&2&t&&(_=!0,o.recording=e[1],M((()=>_=!1))),v.$set(o),(!H||1&t)&&F(f,"gone",1!=e[0]),(!H||1&t&&E!==(E=0===e[0]))&&(T.disabled=E),(!H||1&t)&&F(T,"invisible",1!=e[0]),(!H||5&t&&A!==(A=e[0]===on.length-1||e[2].length<=0))&&(O.disabled=A),(!H||1&t)&&F(O,"invisible",0!=e[0])},i(e){H||(B(s.$$.fragment,e),B(v.$$.fragment,e),H=!0)},o(e){V(s.$$.fragment,e),V(v.$$.fragment,e),H=!1},d(e){e&&u(t),Y(s),Y(v),U=!1,o(I)}}}let on=2;function sn(e,t,n){let o=0,i={},s=[],c=[];return T((async()=>{let e=window.prompt("Please enter your username: ");if(null==e||""==e)throw alert("Please enter a valid username"),new Error("Please enter a valid username");let t=await fetch("/check_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});if(!t.ok)throw alert("Failed to check username"),new Error("Failed to check username");let o=await t.json();o.username_exists?alert("Welcome back, "+o.username):alert("Welcome, "+o.username);let i=await fetch("/get_session_id",{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw alert("Failed to get session id"),new Error("Failed to get session id");const s=(await i.json()).session_id;alert("Session ID: "+s),n(3,c=await fetch("/get_documents").then((e=>e.json())).then((e=>e.documents)))})),[o,i,s,c,function(){o<on-1&&n(0,o+=1)},function(){o>0&&n(0,o-=1)},function(e){i=e,n(1,i)},function(e){s=e,n(2,s)},function(e){c=e,n(3,c)},function(e){s=e,n(2,s)},function(e){i=e,n(1,i)}]}return new class extends X{constructor(e){super(),K(this,e,sn,nn,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
