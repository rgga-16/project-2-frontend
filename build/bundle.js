var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r,a;function c(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function v(){return m("")}function b(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function x(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function $(e,t,n){e.classList[n?"add":"remove"](t)}function z(e){a=e}function T(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const q=[],S=[];let C=[];const j=[],E=Promise.resolve();let L=!1;function P(e){C.push(e)}function O(e){j.push(e)}const F=new Set;let H=0;function N(){if(0!==H)return;const e=a;do{try{for(;H<q.length;){const e=q[H];H++,z(e),M(e.$$)}}catch(e){throw q.length=0,H=0,e}for(z(null),q.length=0,H=0;S.length;)S.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];F.has(t)||(F.add(t),t())}C.length=0}while(q.length);for(;j.length;)j.pop()();L=!1,F.clear(),z(e)}function M(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const R=new Set;let D;function U(e,t){e&&e.i&&(R.delete(e),e.i(t))}function A(e,t,n,i){if(e&&e.o){if(R.has(e))return;R.add(e),D.c.push((()=>{R.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function I(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function B(e){e&&e.c()}function J(e,n,o,r){const{fragment:a,after_update:c}=e.$$;a&&a.m(n,o),r||P((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):i(n),e.$$.on_mount=[]})),c.forEach(P)}function V(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];C.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),C=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(e,t){-1===e.$$.dirty[0]&&(q.push(e),L||(L=!0,E.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function G(t,s,o,r,c,l,d,p=[-1]){const g=a;z(t);const f=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(g?g.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||g.$$.root};d&&d(f.root);let m=!1;if(f.ctx=o?o(t,s.props||{},((e,n,...i)=>{const s=i.length?i[0]:n;return f.ctx&&c(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),m&&Y(t,e)),n})):[],f.update(),m=!0,i(f.before_update),f.fragment=!!r&&r(f.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();s.intro&&U(t.$$.fragment),J(t,s.target,s.anchor,s.customElement),N()}z(g)}class Q{$destroy(){V(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function W(e,t){t.currentTime=function(e){let t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2].split(",")[0])+parseInt(t[2].split(",")[1])/1e3}(e),t.play()}function K(e){let t=parseInt(e.dialogue_id),n=document.getElementById(t);n?n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):console.log("Error: Can't focus on feedback. Corresponding transcript excerpt not found.")}function X(e,t,n){const i=e.slice();return i[50]=t[n][0],i[51]=t[n][1],i}function Z(e,t,n){const i=e.slice();return i[54]=t[n],i[56]=n,i}function ee(t){let n;return{c(){n=g("span"),n.textContent="No feedback moments highlighted."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function te(e){let t,n,i,s,o,r=e[2]+1+"",a=e[1].length+"";return{c(){t=g("span"),n=m(r),i=m(" of "),s=m(a),o=m(" feedback moments highlighted")},m(e,r){d(e,t,r),l(t,n),l(t,i),l(t,s),l(t,o)},p(e,t){4&t[0]&&r!==(r=e[2]+1+"")&&y(n,r),2&t[0]&&a!==(a=e[1].length+"")&&y(s,a)},d(e){e&&u(t)}}}function ne(t){let n;return{c(){n=g("span"),n.textContent="No discussion transcript loaded. Please first record or upload your discussion."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function ie(e){let t,n=e[0].transcript_list,i=[];for(let t=0;t<n.length;t+=1)i[t]=se(Z(e,n,t));return{c(){t=g("p");for(let e=0;e<i.length;e+=1)i[e].c();k(t,"class","padded")},m(e,n){d(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(9&s[0]){let o;for(n=e[0].transcript_list,o=0;o<n.length;o+=1){const r=Z(e,n,o);i[o]?i[o].p(r,s):(i[o]=se(r),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&u(t),p(i,e)}}}function se(e){let t,n,s,o,r,a,c,p,f,v,w,_,x,$,z,T,q,S,C,j,E,L,P=e[54].start_timestamp+"",O=e[54].end_timestamp+"",F=e[54].speaker?e[54].speaker+":":"",H=e[54].dialogue+"";function N(){return e[22](e[54])}function M(){return e[23](e[54])}return{c(){t=g("div"),n=g("span"),s=m("["),o=m(P),r=m("]"),a=m(" - "),c=g("span"),p=m("["),f=m(O),v=m("]"),w=g("br"),_=h(),x=m(F),$=h(),z=g("span"),q=h(),S=g("br"),C=g("br"),j=h(),k(n,"class","timestamp svelte-18ayqts"),k(c,"class","timestamp svelte-18ayqts"),k(z,"id",T=e[54].id),k(z,"class","svelte-18ayqts"),k(t,"class","spaced")},m(e,i){d(e,t,i),l(t,n),l(n,s),l(n,o),l(n,r),l(t,a),l(t,c),l(c,p),l(c,f),l(c,v),l(t,w),l(t,_),l(t,x),l(t,$),l(t,z),z.innerHTML=H,l(t,q),l(t,S),l(t,C),l(t,j),E||(L=[b(n,"click",N),b(c,"click",M)],E=!0)},p(t,n){e=t,1&n[0]&&P!==(P=e[54].start_timestamp+"")&&y(o,P),1&n[0]&&O!==(O=e[54].end_timestamp+"")&&y(f,O),1&n[0]&&F!==(F=e[54].speaker?e[54].speaker+":":"")&&y(x,F),1&n[0]&&H!==(H=e[54].dialogue+"")&&(z.innerHTML=H),1&n[0]&&T!==(T=e[54].id)&&k(z,"id",T)},d(e){e&&u(t),E=!1,i(L)}}}function oe(e){let t,n,i,s,o,r,a;return{c(){t=g("button"),n=g("img"),s=m("\n                                    Pause"),c(n.src,i="./logos/pause-circle-svgrepo-com.svg")||k(n,"src","./logos/pause-circle-svgrepo-com.svg"),k(n,"alt","Pause recording"),k(n,"class","logo"),k(t,"class","action-button svelte-18ayqts"),t.disabled=o=!e[5]||e[6]},m(i,o){d(i,t,o),l(t,n),l(t,s),r||(a=b(t,"click",e[26]),r=!0)},p(e,n){96&n[0]&&o!==(o=!e[5]||e[6])&&(t.disabled=o)},d(e){e&&u(t),r=!1,a()}}}function re(e){let t,n,i,s,o,r,a;return{c(){t=g("button"),n=f("svg"),i=f("polygon"),s=m("\n                                    Resume"),k(i,"points","5 3 19 12 5 21 5 3"),k(n,"xmlns","http://www.w3.org/2000/svg"),k(n,"viewBox","0 0 24 24"),k(n,"fill","none"),k(n,"stroke","currentColor"),k(n,"stroke-width","2"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"class","feather feather-play logo"),x(n,"border-radius","50%"),x(n,"padding","5px"),x(n,"background-color","#fff"),k(t,"class","action-button svelte-18ayqts"),t.disabled=o=!e[6]},m(o,c){d(o,t,c),l(t,n),l(n,i),l(t,s),r||(a=b(t,"click",e[25]),r=!0)},p(e,n){64&n[0]&&o!==(o=!e[6])&&(t.disabled=o)},d(e){e&&u(t),r=!1,a()}}}function ae(t){let n,i;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',c(n.src,i="video.mp4")||k(n,"src","video.mp4"),n.controls=!0,x(n,"width","100%"),x(n,"height","100%")},m(e,i){d(e,n,i),t[37](n)},p:e,d(e){e&&u(n),t[37](null)}}}function ce(e){let t,n;return{c(){t=g("audio"),c(t.src,n=e[0].audio)||k(t,"src",n),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(n,i){d(n,t,i),e[36](t)},p(e,i){1&i[0]&&!c(t.src,n=e[0].audio)&&k(t,"src",n)},d(n){n&&u(t),e[36](null)}}}function le(e){let t,n,i,s;return{c(){t=g("video"),n=g("track"),k(n,"kind","captions"),c(n.src,i="blank.vtt")||k(n,"src","blank.vtt"),k(n,"srclang","en"),c(t.src,s=e[0].video)||k(t,"src",s),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(i,s){d(i,t,s),l(t,n),e[35](t)},p(e,n){1&n[0]&&!c(t.src,s=e[0].video)&&k(t,"src",s)},d(n){n&&u(t),e[35](null)}}}function de(e){let t,n,i,s,o,r,a,c,f,b,w,k=Object.keys(e[0].transcript_list.reduce(xe,{})).length+"",_=Object.entries(e[0].transcript_list.reduce($e,{})),x=[];for(let t=0;t<_.length;t+=1)x[t]=ue(X(e,_,t));let $=e[1]&&pe(e);return{c(){t=g("strong"),n=m("Number of participants: "),i=m(k),s=h(),o=g("br"),r=h(),a=g("ul");for(let e=0;e<x.length;e+=1)x[e].c();c=h(),f=g("br"),b=h(),$&&$.c(),w=v()},m(e,u){d(e,t,u),l(t,n),l(t,i),d(e,s,u),d(e,o,u),d(e,r,u),d(e,a,u);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(a,null);d(e,c,u),d(e,f,u),d(e,b,u),$&&$.m(e,u),d(e,w,u)},p(e,t){if(1&t[0]&&k!==(k=Object.keys(e[0].transcript_list.reduce(xe,{})).length+"")&&y(i,k),1&t[0]){let n;for(_=Object.entries(e[0].transcript_list.reduce($e,{})),n=0;n<_.length;n+=1){const i=X(e,_,n);x[n]?x[n].p(i,t):(x[n]=ue(i),x[n].c(),x[n].m(a,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=_.length}e[1]?$?$.p(e,t):($=pe(e),$.c(),$.m(w.parentNode,w)):$&&($.d(1),$=null)},d(e){e&&u(t),e&&u(s),e&&u(o),e&&u(r),e&&u(a),p(x,e),e&&u(c),e&&u(f),e&&u(b),$&&$.d(e),e&&u(w)}}}function ue(e){let t,n,i,s,o=e[50]+"";return{c(){t=g("li"),n=m("- "),i=m(o),s=h()},m(e,o){d(e,t,o),l(t,n),l(t,i),l(t,s)},p(e,t){1&t[0]&&o!==(o=e[50]+"")&&y(i,o)},d(e){e&&u(t)}}}function pe(e){let t,n,i,s,o,r,a,c,p,f,v,b,w=e[1].length+"",k=e[1].filter(ze).length+"",_=e[1].filter(Te).length+"";return{c(){t=g("strong"),n=m("Number of feedback utterances: "),i=m(w),s=h(),o=g("ul"),r=g("li"),a=m("- Number of positive feedback: "),c=m(k),p=h(),f=g("li"),v=m("- Number of critical feedback: "),b=m(_)},m(e,u){d(e,t,u),l(t,n),l(t,i),d(e,s,u),d(e,o,u),l(o,r),l(r,a),l(r,c),l(o,p),l(o,f),l(f,v),l(f,b)},p(e,t){2&t[0]&&w!==(w=e[1].length+"")&&y(i,w),2&t[0]&&k!==(k=e[1].filter(ze).length+"")&&y(c,k),2&t[0]&&_!==(_=e[1].filter(Te).length+"")&&y(b,_)},d(e){e&&u(t),e&&u(s),e&&u(o)}}}function ge(t){let n,s,o,r,a,p,f,v,w,_,z,T,q,S,C,j,E,L,P,O,F,H,N,M,R,D,U,A,I,B,J,V,Y,G,Q,W,K,X,Z,se,ue,pe,ge,fe,me,he,ve,be,we,ke,ye,_e,xe,$e,ze,Te,qe,Se,Ce,je,Ee,Le,Pe,Oe,Fe,He,Ne,Me,Re,De,Ue,Ae,Ie,Be,Je,Ve,Ye,Ge,Qe,We,Ke,Xe,Ze,et,tt,nt,it,st,ot,rt,at,ct,lt,dt,ut,pt,gt;function ft(e,t){return e[1]&&e[1].length>0?te:ee}let mt=ft(t),ht=mt(t);function vt(e,t){return e[0]&&e[0].transcript_list?ie:ne}let bt=vt(t),wt=bt(t);function kt(e,t){return e[6]?re:oe}let yt=kt(t),_t=yt(t);function xt(e,t){return e[0]&&e[0].video?le:e[0]&&e[0].audio?ce:ae}let $t=xt(t),zt=$t(t),Tt=t[0]&&t[0].transcript_list&&de(t);return{c(){n=g("div"),s=g("div"),o=g("div"),r=g("div"),a=g("div"),p=m(t[10]),f=h(),v=g("div"),ht.c(),w=h(),_=g("button"),z=g("img"),S=h(),C=g("button"),j=g("img"),P=h(),wt.c(),O=h(),F=g("div"),H=g("div"),N=g("span"),N.textContent="Step 1: Record or upload your discussion.",M=h(),R=g("div"),D=g("div"),U=g("span"),U.textContent="Screen record your discussion",A=h(),I=g("div"),B=g("button"),J=g("img"),Y=m("\n                                Record"),Q=h(),_t.c(),W=h(),K=g("button"),X=g("img"),se=m("\n                                Stop"),pe=h(),ge=g("span"),ge.textContent="or",fe=h(),me=g("div"),he=g("label"),he.textContent="Upload your own video, audio, or transcript (in .srt):",ve=h(),be=g("input"),we=h(),ke=g("button"),ye=m("Upload files"),xe=h(),$e=g("div"),ze=g("span"),ze.textContent="Step 2: Highlight feedback in the discussion's transcript.",Te=h(),qe=g("div"),Se=g("button"),Ce=g("img"),Ee=m("\n                        Auto-detect "),Le=g("br"),Pe=m(" Feedback"),Fe=h(),He=g("button"),Ne=g("img"),Re=m("\n                        Highlight "),De=g("br"),Ue=m(" Positive"),Ie=h(),Be=g("button"),Je=g("img"),Ye=m("\n                        Highlight "),Ge=g("br"),Qe=m(" Critical"),Ke=h(),Xe=g("button"),Ze=g("img"),tt=m("\n                        Remove "),nt=g("br"),it=m(" Feedback"),ot=h(),rt=g("div"),at=g("div"),zt.c(),ct=h(),lt=g("div"),dt=g("h3"),dt.textContent="Discussion Transcript Details",ut=h(),Tt&&Tt.c(),k(a,"id","ld-bar-transcript"),k(a,"class","ldBar centered column"),k(a,"data-preset","circle"),k(a,"data-value","0"),x(a,"width","100%"),x(a,"height","20%"),k(r,"class","overlay centered padded svelte-18ayqts"),$(r,"invisible",!1===t[9]),c(z.src,T="./logos/up-arrow-5-svgrepo-com.svg")||k(z,"src","./logos/up-arrow-5-svgrepo-com.svg"),k(z,"alt","Prev feedback"),k(z,"class","logo"),x(z,"width","1.5rem"),x(z,"height","1.5rem"),_.disabled=q=!t[1]||t[1].length<=0,c(j.src,E="./logos/down-arrow-5-svgrepo-com.svg")||k(j,"src","./logos/down-arrow-5-svgrepo-com.svg"),k(j,"alt","Next feedback"),k(j,"class","logo"),x(j,"width","1.5rem"),x(j,"height","1.5rem"),C.disabled=L=!t[1]||t[1].length<=0,k(v,"id","traverse-feedback-area"),k(v,"class","bordered spaced svelte-18ayqts"),k(o,"id","transcript-area"),k(o,"class","column bordered spaced svelte-18ayqts"),x(N,"font-weight","bold"),x(N,"text-decoration","underline"),x(N,"margin-left","1rem"),c(J.src,V="./logos/record-video-svgrepo-com.svg")||k(J,"src","./logos/record-video-svgrepo-com.svg"),k(J,"alt","Start recording"),k(J,"class","logo"),k(B,"class","action-button svelte-18ayqts"),B.disabled=G=t[5]||t[6],c(X.src,Z="./logos/record-video-stop-svgrepo-com.svg")||k(X,"src","./logos/record-video-stop-svgrepo-com.svg"),k(X,"alt","Stop recording"),k(X,"class","logo"),k(K,"class","action-button svelte-18ayqts"),K.disabled=ue=!t[5]&&!t[6],k(I,"class","row spaced"),k(D,"class","column centered"),k(he,"for","file_upload"),k(be,"name","file_upload"),k(be,"type","file"),k(be,"id","file_upload"),k(be,"accept","video/*, audio/*, .srt"),ke.disabled=_e=t[9]||!t[7]||0===t[7].length,k(me,"class","column centered spaced"),k(R,"class","row centered spaced"),k(H,"id","capture-feedback-panel"),k(H,"class","column bordered spaced svelte-18ayqts"),x(ze,"font-weight","bold"),x(ze,"text-decoration","underline"),x(ze,"margin-left","1rem"),c(Ce.src,je="./logos/magnifying-glass-for-search-3-svgrepo-com.svg")||k(Ce,"src","./logos/magnifying-glass-for-search-3-svgrepo-com.svg"),k(Ce,"alt","Auto-detect Feedback"),k(Ce,"class","logo"),k(Se,"class","action-button svelte-18ayqts"),Se.disabled=Oe=!t[0]||!t[0].transcript_list||t[9],c(Ne.src,Me="./logos/highlight-green-svgrepo-com.svg")||k(Ne,"src","./logos/highlight-green-svgrepo-com.svg"),k(Ne,"alt","Highlight Positive Feedback"),k(Ne,"class","logo"),k(He,"class","action-button svelte-18ayqts"),He.disabled=Ae=!t[0]||!t[0].transcript_list||t[9],c(Je.src,Ve="./logos/highlight-red-svgrepo-com.svg")||k(Je,"src","./logos/highlight-red-svgrepo-com.svg"),k(Je,"alt","Highlight Critical Feedback"),k(Je,"class","logo"),k(Be,"class","action-button svelte-18ayqts"),Be.disabled=We=!t[0]||!t[0].transcript_list||t[9],c(Ze.src,et="./logos/erase-svgrepo-com.svg")||k(Ze,"src","./logos/erase-svgrepo-com.svg"),k(Ze,"alt","De-highlight Feedback"),k(Ze,"class","logo"),k(Xe,"class","action-button svelte-18ayqts"),Xe.disabled=st=!t[0]||!t[0].transcript_list||t[9],k(qe,"class","row centered spaced"),k($e,"id","feedback-highlight-panel"),k($e,"class","column bordered spaced  svelte-18ayqts"),k(F,"id","transcript-buttons-area"),k(F,"class","row centered spaced svelte-18ayqts"),k(s,"id","left-panel"),k(s,"class","column spaced svelte-18ayqts"),k(at,"id","media-player-area"),k(at,"class","bordered centered svelte-18ayqts"),x(dt,"font-weight","bold"),x(dt,"text-decoration","underline"),k(lt,"id","feedback-details-area"),k(lt,"class","bordered padded spaced svelte-18ayqts"),x(lt,"overflow-y","auto"),k(rt,"id","right-panel"),k(rt,"class","column spaced svelte-18ayqts"),k(n,"div",""),k(n,"class","row spaced svelte-18ayqts"),k(n,"id","feedback-selector-page")},m(e,i){d(e,n,i),l(n,s),l(s,o),l(o,r),l(r,a),l(a,p),t[19](a),l(o,f),l(o,v),ht.m(v,null),l(v,w),l(v,_),l(_,z),l(v,S),l(v,C),l(C,j),l(o,P),wt.m(o,null),l(s,O),l(s,F),l(F,H),l(H,N),l(H,M),l(H,R),l(R,D),l(D,U),l(D,A),l(D,I),l(I,B),l(B,J),l(B,Y),l(I,Q),_t.m(I,null),l(I,W),l(I,K),l(K,X),l(K,se),l(R,pe),l(R,ge),l(R,fe),l(R,me),l(me,he),l(me,ve),l(me,be),t[29](be),l(me,we),l(me,ke),l(ke,ye),l(F,xe),l(F,$e),l($e,ze),l($e,Te),l($e,qe),l(qe,Se),l(Se,Ce),l(Se,Ee),l(Se,Le),l(Se,Pe),l(qe,Fe),l(qe,He),l(He,Ne),l(He,Re),l(He,De),l(He,Ue),l(qe,Ie),l(qe,Be),l(Be,Je),l(Be,Ye),l(Be,Ge),l(Be,Qe),l(qe,Ke),l(qe,Xe),l(Xe,Ze),l(Xe,tt),l(Xe,nt),l(Xe,it),l(n,ot),l(n,rt),l(rt,at),zt.m(at,null),l(rt,ct),l(rt,lt),l(lt,dt),l(lt,ut),Tt&&Tt.m(lt,null),pt||(gt=[b(_,"click",t[20]),b(C,"click",t[21]),b(B,"click",t[24]),b(K,"click",t[27]),b(be,"change",t[28]),b(ke,"click",t[30]),b(Se,"click",t[31]),b(He,"click",t[32]),b(Be,"click",t[33]),b(Xe,"click",t[34])],pt=!0)},p(e,t){1024&t[0]&&y(p,e[10]),512&t[0]&&$(r,"invisible",!1===e[9]),mt===(mt=ft(e))&&ht?ht.p(e,t):(ht.d(1),ht=mt(e),ht&&(ht.c(),ht.m(v,w))),2&t[0]&&q!==(q=!e[1]||e[1].length<=0)&&(_.disabled=q),2&t[0]&&L!==(L=!e[1]||e[1].length<=0)&&(C.disabled=L),bt===(bt=vt(e))&&wt?wt.p(e,t):(wt.d(1),wt=bt(e),wt&&(wt.c(),wt.m(o,null))),96&t[0]&&G!==(G=e[5]||e[6])&&(B.disabled=G),yt===(yt=kt(e))&&_t?_t.p(e,t):(_t.d(1),_t=yt(e),_t&&(_t.c(),_t.m(I,W))),96&t[0]&&ue!==(ue=!e[5]&&!e[6])&&(K.disabled=ue),640&t[0]&&_e!==(_e=e[9]||!e[7]||0===e[7].length)&&(ke.disabled=_e),513&t[0]&&Oe!==(Oe=!e[0]||!e[0].transcript_list||e[9])&&(Se.disabled=Oe),513&t[0]&&Ae!==(Ae=!e[0]||!e[0].transcript_list||e[9])&&(He.disabled=Ae),513&t[0]&&We!==(We=!e[0]||!e[0].transcript_list||e[9])&&(Be.disabled=We),513&t[0]&&st!==(st=!e[0]||!e[0].transcript_list||e[9])&&(Xe.disabled=st),$t===($t=xt(e))&&zt?zt.p(e,t):(zt.d(1),zt=$t(e),zt&&(zt.c(),zt.m(at,null))),e[0]&&e[0].transcript_list?Tt?Tt.p(e,t):(Tt=de(e),Tt.c(),Tt.m(lt,null)):Tt&&(Tt.d(1),Tt=null)},i:e,o:e,d(e){e&&u(n),t[19](null),ht.d(),wt.d(),_t.d(),t[29](null),zt.d(),Tt&&Tt.d(),pt=!1,i(gt)}}}async function fe(e){try{const t=await fetch("/fetch_audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio_path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}async function me(e){const t=await fetch("/transcribe_mic",{method:"POST",body:JSON.stringify({audio:e}),headers:{"Content-Type":"application/json"}});if(t.ok){return(await t.json()).transcript}throw new Error("Failed to transcribe audio")}async function he(e){if(!(await fetch("/embed_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})})).ok)throw new Error("Failed to embed transcript list")}async function ve(e){const t=new FormData;t.append("file",e);const n=await fetch("/extract_audio_from_video",{method:"POST",body:t});if(!n.ok)return null;const i=await n.json();return[i.audiopath,i.videopath]}async function be(e){const t=await fetch("/simplify_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to simplify transcript string");return(await t.json()).simplified_transcript}async function we(e){const t=await fetch("/transcript_to_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e})});if(!t.ok)throw new Error("Failed to convert transcript string to list of excerpts");return(await t.json()).transcript_list}async function ke(e){let t=[],n=function(e){let t="";for(let n=0;n<e.length;n++){let i=e[n],s=i.id,o=i.start_timestamp,r=i.end_timestamp,a=i.dialogue;"speaker"in i&&""!=i.speaker?t+=`${s}\n${o} --\x3e ${r}\n${i.speaker}: ${a}\n\n`:t+=`${s}\n${o} --\x3e ${r}\n${a}\n\n`}return t}(e);const i=await fetch("/autodetect_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n})});if(!i.ok)throw new Error("Failed to detect feedback");return t=(await i.json()).feedback_list,console.log(t),t}function ye(e,t){t=parseInt(t);for(let n=0;n<e.length;n++){let i=e[n];if(i.id===t)return i}return console.log("Error: Can't find excerpt with id",t),null}function _e(e,t){e.ldBar.set(t)}const xe=(e,t)=>(e[t.speaker]=!0,e),$e=(e,t)=>(e[t.speaker]=(e[t.speaker]||0)+1,e),ze=e=>"positive"===e.type,Te=e=>"critical"===e.type;function qe(e,t,n){let i,s,o,r,a,c,l,d,u,p,{recording:g}=t,{feedback_list:f}=t,m=0,h=!1,v=!1,b=[],w=[],k=!1,y="";async function _(e){const t=new Blob(e,{type:"video/webm"});console.log("video blobs",{videoBlobs:e,vidblob:t});let n=new FormData;if(n.append("file",t),0===t.length||!t)return null;const i=await fetch("/download_screen",{method:"POST",body:n});if(i.ok){const e=await i.json();l=e.filepath}else d=null,l=null,console.log("Failed to send video to server");return l}async function x(){n(5,h=!0),o=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:60},selfBrowserSurface:"include"}),a=new MediaRecorder(o,{mimeType:"video/webm"}),a.videoChunks=[],a.addEventListener("dataavailable",(e=>{e.data.size>0&&w.push(e.data)})),a.addEventListener("stop",(()=>{})),r=await navigator.mediaDevices.getUserMedia({audio:!0}),c=new MediaRecorder(r),c.audioBlobs=[],c.addEventListener("dataavailable",(e=>{e.data.size>0&&b.push(e.data)})),c.addEventListener("stop",(()=>{})),a.start(),c.start()}function $(){n(5,h=!1),n(6,v=!0),a.pause(),c.pause()}function z(){n(5,h=!0),n(6,v=!1),a.resume(),c.resume()}async function T(){n(5,h=!1),n(6,v=!1),o.getTracks().forEach((e=>e.stop())),r.getTracks().forEach((e=>e.stop())),n(10,y="Saving video and audio ..."),_e(s,20),l=await _(w),l=await _(w),w=[];let e=await async function(e){try{const t=await fetch("/fetch_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})}),n=await t.blob();return URL.createObjectURL(n)}catch(e){console.error(e)}}(l);d=await async function(e){const t=new Blob(e,{type:"audio/webm"});console.log("audio blobs",{audioBlobs:e,blob:t});let n=new FormData;n.append("audio",t,"audio.webm");const i=await fetch("/download_mic",{method:"POST",body:n});if(!i.ok)throw d=null,l=null,new Error("Failed to send audio to server");{const e=await i.json();d=e.filepath}return d}(b),b=[];let t=await fe(d);n(10,y="Transcribing audio (this may take a while) ..."),_e(s,40);let i=await me(d);n(10,y="Cleaning transcript..."),_e(s,60);let a=await be(i),c=await we(a);n(10,y="Saving transcript as a database (this may take a while) ... "),_e(s,80),await he(c),n(10,y="Done!"),_e(s,100),await new Promise((e=>setTimeout(e,500))),n(0,g={video:e,audio:t,transcript:a,transcript_list:c})}async function q(){if(u){for(const e of u)if(console.log(e.type),e.type.includes("video")){let t=URL.createObjectURL(e);if(n(10,y="Uploading video..."),_e(s,20),[d,l]=await ve(e),!d)throw d=null,l=null,new Error("Failed to extract audio from video");let i=await fe(d);n(10,y="Transcribing audio (this may take a while) ..."),_e(s,40);let o=await me(d);n(10,y="Cleaning transcript..."),_e(s,60);let r=await be(o),a=await we(r);n(10,y="Saving transcript as a database (this may take a while) ... "),_e(s,80),await he(a),n(10,y="Done!"),_e(s,100),await new Promise((e=>setTimeout(e,500))),n(0,g={video:t,audio:i,transcript:r,transcript_list:a}),d=null,l=null}else if(e.type.includes("audio")){let t=URL.createObjectURL(e);n(10,y="Uploading audio..."),_e(s,20);const i=new FormData;i.append("audio",e);const o=await fetch("/download_mic",{method:"POST",body:i});if(!o.ok)throw d=null,l=null,new Error("Failed to save uploaded audio");let r=await o.json();d=r.filepath,n(10,y="Transcribing audio (this may take a while) ..."),_e(s,40);let a=await me(d);n(10,y="Cleaning transcript..."),_e(s,60);let c=await be(a),u=await we(c);n(10,y="Saving transcript as a database (this may take a while) ... "),_e(s,80),await he(u),n(10,y="Done!"),_e(s,100),await new Promise((e=>setTimeout(e,500))),n(0,g={video:null,audio:t,transcript:c,transcript_list:u}),d=null,l=null}else if(e.name.endsWith(".srt")){let t=new FileReader;t.onload=async function(e){console.log(s),n(9,k=!0);let t=e.target.result;console.log(t),n(10,y="Cleaning transcript..."),_e(s,30);let i=await be(t);await new Promise((e=>setTimeout(e,2500))),console.log(i);let o=await we(i);console.log(o),n(10,y="Saving transcript as a database (this may take a while) ... "),_e(s,60),await he(o),console.log("Transcript list embedded"),n(10,y="Done!"),_e(s,100),await new Promise((e=>setTimeout(e,500)));let r={video:null,audio:null,transcript:i,transcript_list:o};g?(n(0,g.transcript_list=o,g),n(0,g.transcript=i,g),n(0,g)):n(0,g=r),n(9,k=!1)},t.readAsText(e)}n(7,u=null),n(8,p.value="",p),_e(s,0)}console.log("Recording",g)}function C(e){const t=window.getSelection().toString();if(t){let i={quote:t,type:e,done:!1,speaker:null,dialogue_id:null},s=function(e,t){console.log(t);for(let n=0;n<e.length;n++){let i=e[n],s=i.dialogue;if(i.speaker&&(s=i.speaker+": "+s),s.includes(t))return i}return null}(g.transcript_list,t);if(!s)return console.log("Error: Corresponding transcript excerpt not found"),void alert("Error: Corresponding transcript excerpt not found. Feedback not added.");i.id=f.length+1,i.dialogue_id=s.id,i.speaker=s.speaker,i.excerpt_reference=s,i.chatbot_messages=[{role:"system",content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. "}],f.push(i),n(1,f),n(0,g),L([i])}else alert("Please highlight text in the transcript with your mouse to add as feedback.")}function j(){const e=window.getSelection().toString();if(e)for(let t=0;t<f.length;t++){let i=f[t];if(i.quote.includes(e)){let e=parseInt(i.dialogue_id),s=i.quote;f.splice(t,1),n(1,f),E(e,s);break}}}function E(e,t){for(let i=0;i<g.transcript_list.length;i++){let s=g.transcript_list[i];if(s.id===e){let e=s.dialogue,i=e.indexOf("<mark"),o=e.indexOf("</mark>")+7,r=e.slice(0,i)+t+e.slice(o);s.dialogue=r,s.dialogue=s.dialogue,n(0,g);break}}}function L(e){for(let t=0;t<e.length;t++){let n=e[t],i=n.type;if("positive"!=n.type&&"critical"!=n.type)continue;let s,o=parseInt(n.dialogue_id);for(let e=0;e<g.transcript_list.length;e++){let t=g.transcript_list[e];if(t.id===o){s=t;break}}if(!s){console.log("Error: Corresponding transcript excerpt not found");continue}let r=s.dialogue,a=r.indexOf(n.quote),c=a+n.quote.length,l=r.slice(0,a)+`<mark class="${i}" style="background-color:${"positive"===i?"lightgreen":"lightcoral"};">${n.quote}</mark>`+r.slice(c);s.dialogue=l}n(0,g)}return e.$$set=e=>{"recording"in e&&n(0,g=e.recording),"feedback_list"in e&&n(1,f=e.feedback_list)},[g,f,m,i,s,h,v,u,p,k,y,x,$,z,T,q,C,j,L,function(e){S[e?"unshift":"push"]((()=>{s=e,n(4,s)}))},()=>{m>0?n(2,m--,m):n(2,m=f.length-1),K(f[m])},()=>{m<f.length-1?n(2,m++,m):n(2,m=0),K(f[m])},e=>W(e.start_timestamp,i),e=>W(e.end_timestamp,i),()=>x(),()=>z(),()=>$(),async()=>{n(9,k=!0),await T(),n(9,k=!1)},function(){u=this.files,n(7,u)},function(e){S[e?"unshift":"push"]((()=>{p=e,n(8,p)}))},async()=>{n(9,k=!0),await q(),n(9,k=!1)},async()=>{n(9,k=!0),_e(s,0),n(1,f=[]);let e=g.transcript_list,t=Math.ceil(e.length/4),i=[e.slice(0,t),e.slice(t,2*t),e.slice(2*t,3*t),e.slice(3*t,e.length)];n(10,y="Detecting feedback in transcript ...");for(let e=0;e<i.length;e++){let t=await ke(i[e]);n(1,f=f.concat(t)),_e(s,20*(e+1)),await new Promise((e=>setTimeout(e,250)))}n(1,f),console.log(f);for(let e=0;e<f.length;e++){n(1,f[e].id=e+1,f);let t=f[e].dialogue_id,i=ye(g.transcript_list,t);n(1,f[e].excerpt_reference=i,f)}n(1,f),n(10,y="Highlighting feedback ..."),L(f),await new Promise((e=>setTimeout(e,500))),_e(s,100),console.log("Feedback: "+f[0]),n(9,k=!1),_e(s,0),n(10,y="")},()=>C("positive"),()=>C("critical"),()=>j(),function(e){S[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){S[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){S[e?"unshift":"push"]((()=>{i=e,n(3,i)}))}]}class Se extends Q{constructor(e){super(),G(this,e,qe,ge,o,{recording:0,feedback_list:1},null,[-1,-1])}}function Ce(e,t,n){const i=e.slice();return i[55]=t[n],i}function je(e,t,n){const i=e.slice();return i[52]=t[n],i[54]=n,i}function Ee(e,t,n){const i=e.slice();return i[58]=t[n],i[54]=n,i}function Le(e,t,n){const i=e.slice();return i[60]=t[n],i[54]=n,i}function Pe(e,t,n){const i=e.slice();return i[60]=t[n],i[61]=t,i[54]=n,i}function Oe(e,t,n){const i=e.slice();return i[58]=t[n],i[54]=n,i}function Fe(e){let t,n,i,s,o=e[58]+"";function r(){return e[23](e[54])}return{c(){t=g("button"),n=m(o),k(t,"class","tab svelte-iazpg1"),$(t,"active",e[54]===e[6]),$(t,"right-bordered",e[54]<e[15].length-1)},m(e,o){d(e,t,o),l(t,n),i||(s=b(t,"click",r),i=!0)},p(n,i){e=n,64&i[0]&&$(t,"active",e[54]===e[6])},d(e){e&&u(t),i=!1,s()}}}function He(e){let t,n=e[0],i=[];for(let t=0;t<n.length;t+=1)i[t]=Re(Le(e,n,t));return{c(){t=g("div");for(let e=0;e<i.length;e+=1)i[e].c();k(t,"class","grid svelte-iazpg1"),x(t,"overflow-y","auto")},m(e,n){d(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(262161&s[0]){let o;for(n=e[0],o=0;o<n.length;o+=1){const r=Le(e,n,o);i[o]?i[o].p(r,s):(i[o]=Re(r),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&u(t),p(i,e)}}}function Ne(e){let t,n,s,o,r,a,f,m,v,w,y,_,$,z,T,q,S,C,j,E,L,P,O,F,H,N;function M(e,t){return e[14]&&"quote"===e[13]?Ue:De}let R=M(e),D=R(e);function U(e,t){return e[14]&&"speaker"===e[13]?Ie:Ae}let A=U(e),I=A(e),B=e[0],J=[];for(let t=0;t<B.length;t+=1)J[t]=Ge(Pe(e,B,t));return{c(){t=g("div"),n=g("div"),s=g("span"),s.innerHTML="<strong>ID</strong>",o=h(),r=g("span"),a=g("strong"),a.textContent="Feedback",f=h(),m=g("button"),D.c(),v=h(),w=g("span"),y=g("strong"),y.textContent="Speaker",_=h(),$=g("button"),I.c(),z=h(),T=g("span"),T.innerHTML="<strong>Actions</strong>",q=h(),S=g("span"),C=g("strong"),C.textContent="Done?",j=h(),E=g("button"),L=g("img"),F=h();for(let e=0;e<J.length;e+=1)J[e].c();k(s,"class","centered id-col svelte-iazpg1"),k(m,"class","action-button svelte-iazpg1"),k(r,"class","centered row spaced feedback-col svelte-iazpg1"),k($,"class","action-button svelte-iazpg1"),k(w,"class","centered row spaced speaker-col svelte-iazpg1"),k(T,"id","feedback-buttons"),k(T,"class","centered row actions-col svelte-iazpg1"),x(L,"height","1rem"),x(L,"width","1rem"),c(L.src,P=e[14]&&"done"===e[13]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")||k(L,"src",P),k(L,"alt",O=e[14]&&"done"===e[13]?"Sort ascending":"Sort descending"),k(L,"class","mini-icon svelte-iazpg1"),k(E,"class","action-button svelte-iazpg1"),k(S,"class","centered row spaced done-col svelte-iazpg1"),k(n,"class","feedback-header row svelte-iazpg1"),k(t,"class","column"),x(t,"overflow-y","auto")},m(i,c){d(i,t,c),l(t,n),l(n,s),l(n,o),l(n,r),l(r,a),l(r,f),l(r,m),D.m(m,null),l(n,v),l(n,w),l(w,y),l(w,_),l(w,$),I.m($,null),l(n,z),l(n,T),l(n,q),l(n,S),l(S,C),l(S,j),l(S,E),l(E,L),l(t,F);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(t,null);H||(N=[b(m,"click",e[24]),b($,"click",e[25]),b(E,"click",e[26])],H=!0)},p(e,n){if(R!==(R=M(e))&&(D.d(1),D=R(e),D&&(D.c(),D.m(m,null))),A!==(A=U(e))&&(I.d(1),I=A(e),I&&(I.c(),I.m($,null))),24576&n[0]&&!c(L.src,P=e[14]&&"done"===e[13]?"./logos/ascending-sort-svgrepo-com.svg":"./logos/descending-sort-svgrepo-com.svg")&&k(L,"src",P),24576&n[0]&&O!==(O=e[14]&&"done"===e[13]?"Sort ascending":"Sort descending")&&k(L,"alt",O),4587537&n[0]){let i;for(B=e[0],i=0;i<B.length;i+=1){const s=Pe(e,B,i);J[i]?J[i].p(s,n):(J[i]=Ge(s),J[i].c(),J[i].m(t,null))}for(;i<J.length;i+=1)J[i].d(1);J.length=B.length}},d(e){e&&u(t),D.d(),I.d(),p(J,e),H=!1,i(N)}}}function Me(e){let t,n,i,s,o,r,a,c,p,f,v,w,_,x,z=e[60].quote+"",T=e[60].speaker+"";function q(...t){return e[34](e[60],...t)}return{c(){t=g("div"),n=g("p"),i=m('"'),s=m(z),o=m('"'),r=h(),a=g("br"),c=h(),p=g("span"),f=m("- "),v=m(T),w=h(),k(t,"class","positive-feedback-note svelte-iazpg1"),$(t,"selected",e[60]===e[4])},m(e,u){d(e,t,u),l(t,n),l(n,i),l(n,s),l(n,o),l(t,r),l(t,a),l(t,c),l(t,p),l(p,f),l(p,v),l(t,w),_||(x=b(t,"click",q),_=!0)},p(n,i){e=n,1&i[0]&&z!==(z=e[60].quote+"")&&y(s,z),1&i[0]&&T!==(T=e[60].speaker+"")&&y(v,T),17&i[0]&&$(t,"selected",e[60]===e[4])},d(e){e&&u(t),_=!1,x()}}}function Re(e){let t,n="positive"===e[60].type&&Me(e);return{c(){n&&n.c(),t=v()},m(e,i){n&&n.m(e,i),d(e,t,i)},p(e,i){"positive"===e[60].type?n?n.p(e,i):(n=Me(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function De(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),c(t.src,n="./logos/descending-sort-svgrepo-com.svg")||k(t,"src","./logos/descending-sort-svgrepo-com.svg"),k(t,"alt","Sort descending"),k(t,"class","mini-icon svelte-iazpg1")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function Ue(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),c(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||k(t,"src","./logos/ascending-sort-svgrepo-com.svg"),k(t,"alt","Sort ascending"),k(t,"class","mini-icon svelte-iazpg1")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function Ae(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),c(t.src,n="./logos/descending-sort-svgrepo-com.svg")||k(t,"src","./logos/descending-sort-svgrepo-com.svg"),k(t,"alt","Sort descending"),k(t,"class","mini-icon svelte-iazpg1")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function Ie(e){let t,n;return{c(){t=g("img"),x(t,"height","1rem"),x(t,"width","1rem"),c(t.src,n="./logos/ascending-sort-svgrepo-com.svg")||k(t,"src","./logos/ascending-sort-svgrepo-com.svg"),k(t,"alt","Sort ascending"),k(t,"class","mini-icon svelte-iazpg1")},m(e,n){d(e,t,n)},d(e){e&&u(t)}}}function Be(e){let t,n,s,o,r,a,c,p,f,v,w,_,x,z,T,q,S,C,j,E,L,P,O,F=e[60].id+"",H=e[60].speaker+"";function N(e,t){return e[60].positivised_quote&&e[60].show_paraphrased?Ve:Je}let M=N(e),R=M(e);function D(){return e[29](e[60],e[61],e[54])}function U(){return e[30](e[60])}function A(){return e[31](e[60])}function I(){e[32].call(E,e[61],e[54])}function B(...t){return e[33](e[60],...t)}return{c(){t=g("div"),n=g("span"),s=g("strong"),o=m(F),r=h(),a=g("div"),c=g("span"),R.c(),p=h(),f=g("span"),v=m(H),w=h(),_=g("div"),x=g("button"),x.innerHTML='<img src="./logos/ai-positive-paraphrase.png" alt="Paraphrase positively" class="action-icon svelte-iazpg1"/>\n                                            Positivize',z=h(),T=g("button"),T.innerHTML='<img src="./logos/add-ellipse-svgrepo-com.svg" alt="Add feedback as context" class="action-icon svelte-iazpg1"/>\n                                            Add Context',q=h(),S=g("button"),S.innerHTML='<img src="./logos/delete-svgrepo-com.svg" alt="Remove feedback" class="action-icon svelte-iazpg1"/>\n                                            Delete',C=h(),j=g("span"),E=g("input"),L=h(),k(n,"class","id-col svelte-iazpg1"),k(c,"class",""),k(a,"class","column feedback-col svelte-iazpg1"),k(f,"class","centered speaker-col svelte-iazpg1"),k(x,"class","action-button svelte-iazpg1"),k(T,"class","action-button centered column svelte-iazpg1"),k(S,"class","action-button svelte-iazpg1"),k(_,"id","feedback-buttons"),k(_,"class","row centered spaced actions-col svelte-iazpg1"),k(E,"type","checkbox"),k(j,"class","centered done-col svelte-iazpg1"),k(t,"class","feedback-row row bordered padded svelte-iazpg1"),$(t,"done",e[60].done),$(t,"selected",e[60]===e[4])},m(i,u){d(i,t,u),l(t,n),l(n,s),l(s,o),l(t,r),l(t,a),l(a,c),R.m(c,null),l(t,p),l(t,f),l(f,v),l(t,w),l(t,_),l(_,x),l(_,z),l(_,T),l(_,q),l(_,S),l(t,C),l(t,j),l(j,E),E.checked=e[60].done,l(t,L),P||(O=[b(x,"click",D),b(T,"click",U),b(S,"click",A),b(E,"change",I),b(t,"click",B)],P=!0)},p(n,i){e=n,1&i[0]&&F!==(F=e[60].id+"")&&y(o,F),M===(M=N(e))&&R?R.p(e,i):(R.d(1),R=M(e),R&&(R.c(),R.m(c,null))),1&i[0]&&H!==(H=e[60].speaker+"")&&y(v,H),1&i[0]&&(E.checked=e[60].done),1&i[0]&&$(t,"done",e[60].done),17&i[0]&&$(t,"selected",e[60]===e[4])},d(e){e&&u(t),R.d(),P=!1,i(O)}}}function Je(e){let t,n,i,s,o=e[60].quote+"",r=e[60].positivised_quote&&!e[60].show_paraphrased&&Ye(e);return{c(){t=m('"'),n=m(o),i=m('" '),r&&r.c(),s=v()},m(e,o){d(e,t,o),d(e,n,o),d(e,i,o),r&&r.m(e,o),d(e,s,o)},p(e,t){1&t[0]&&o!==(o=e[60].quote+"")&&y(n,o),e[60].positivised_quote&&!e[60].show_paraphrased?r?r.p(e,t):(r=Ye(e),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(e){e&&u(t),e&&u(n),e&&u(i),r&&r.d(e),e&&u(s)}}}function Ve(e){let t,n,i,s,o,r,a,c=e[60].positivised_quote+"";function l(){return e[27](e[60])}return{c(){t=g("strong"),t.textContent="(Paraphrased Feedback)",n=m(' "'),i=m(c),s=m('" '),o=g("span"),o.textContent="(View original quote)",k(o,"class","clickable svelte-iazpg1")},m(e,c){d(e,t,c),d(e,n,c),d(e,i,c),d(e,s,c),d(e,o,c),r||(a=b(o,"click",l),r=!0)},p(t,n){e=t,1&n[0]&&c!==(c=e[60].positivised_quote+"")&&y(i,c)},d(e){e&&u(t),e&&u(n),e&&u(i),e&&u(s),e&&u(o),r=!1,a()}}}function Ye(e){let t,n,i;function s(){return e[28](e[60])}return{c(){t=g("span"),t.textContent="(View paraphrased quote)",k(t,"class","clickable svelte-iazpg1")},m(e,o){d(e,t,o),n||(i=b(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&u(t),n=!1,i()}}}function Ge(e){let t,n="critical"===e[60].type&&Be(e);return{c(){n&&n.c(),t=v()},m(e,i){n&&n.m(e,i),d(e,t,i)},p(e,i){"critical"===e[60].type?n?n.p(e,i):(n=Be(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function Qe(e){let t,n,i,s,o=e[58]+"";function r(){return e[35](e[54])}return{c(){t=g("button"),n=m(o),k(t,"class","tab svelte-iazpg1"),$(t,"active",e[54]===e[5]),$(t,"right-bordered",e[54]<e[16].length-1)},m(e,o){d(e,t,o),l(t,n),i||(s=b(t,"click",r),i=!0)},p(n,i){e=n,32&i[0]&&$(t,"active",e[54]===e[5])},d(e){e&&u(t),i=!1,s()}}}function We(e){let t,n,s,o,r,a,c,f,m,v,y,$,z,T,q,S,C,j,E,L,P,O,F,H,N,M,R,D,U,A,I,B,J,V,Y,G,Q,W,K,X=e[7],Z=[];for(let t=0;t<X.length;t+=1)Z[t]=Ze(Ce(e,X,t));function ee(e,t){return e[8]?tt:et}let te=ee(e),ne=te(e);function ie(e,t){return e[10]?it:nt}let se=ie(e),oe=se(e);return{c(){t=g("div"),n=g("div"),n.innerHTML="<p><strong>assistant:</strong> Hello! How can I help you today?</p>",s=h();for(let e=0;e<Z.length;e+=1)Z[e].c();o=h(),r=g("div"),r.innerHTML="<p>Lorem ipsum dolor sit amet. Eos libero voluptatem sit excepturi rerum vel porro odio est eligendi voluptatibus. At mollitia quam ea dolorum quae aut nemo ipsum est asperiores quibusdam est voluptatem accusamus. Ut eligendi porro quo autem illum non voluptatem rerum et nobis nisi est molestiae facilis quo magni perferendis.\n                            Ea Quis molestiae cum minus consequatur At velit internos et omnis neque qui nihil consequatur et acc</p>",a=h(),c=g("div"),f=g("div"),m=g("div"),v=g("span"),v.innerHTML="<strong>Feedback Context:</strong>",y=h(),ne.c(),z=h(),T=g("div"),q=g("span"),q.innerHTML="<strong>Suggested messages:</strong>",S=h(),C=g("div"),C.textContent="Explain feedback.",j=h(),E=g("div"),E.textContent="Brainstorm actions.",P=h(),O=g("div"),oe.c(),H=h(),N=g("div"),M=g("div"),R=g("button"),R.innerHTML='<img src="./logos/screenshot-tile-noroot-svgrepo-com.svg" alt="Screenshot" class="action-icon svelte-iazpg1"/>',D=h(),U=g("label"),A=h(),I=g("input"),B=h(),J=g("button"),J.innerHTML='<img src="./logos/image-svgrepo-com.svg" alt="Attach image" class="action-icon svelte-iazpg1"/>',V=h(),Y=g("textarea"),G=h(),Q=g("button"),Q.innerHTML='<img src="./logos/send-svgrepo-com.svg" alt="Send" class="action-icon svelte-iazpg1"/>',k(n,"class","assistant padded svelte-iazpg1"),x(r,"height","20px"),x(r,"width","100%"),x(r,"background-color","white"),x(r,"color","white"),x(r,"cursor","default"),k(t,"id","chatbot-messages"),k(t,"class","column spaced bordered svelte-iazpg1"),k(m,"id","contexts"),k(m,"class","column centered bordered svelte-iazpg1"),k(m,"style",$=e[10]?"width:30%;":"width:45%;"),k(C,"class","suggested-message svelte-iazpg1"),k(E,"class","suggested-message svelte-iazpg1"),k(T,"id","suggested-messages"),k(T,"class","column centered bordered svelte-iazpg1"),k(T,"style",L=e[10]?"width:30%;":"width:45%;"),k(O,"id","visual-context"),k(O,"class","column centered bordered svelte-iazpg1"),k(O,"style",F=e[10]?"width:30%;":"display:none;"),k(f,"id","chatbot-utilities"),k(f,"class","row centered spaced svelte-iazpg1"),k(R,"class","action-button centered column svelte-iazpg1"),k(U,"for","image_upload"),x(U,"display","none"),k(I,"accept","image/png, image/jpeg"),k(I,"type","file"),x(I,"display","none"),k(I,"id","image_upload"),k(I,"name","image_upload"),k(J,"class","action-button centered column svelte-iazpg1"),k(M,"class","column spaced"),x(Y,"width","100%"),x(Y,"height","100%"),k(Y,"placeholder","Type your message here..."),k(Y,"id","textarea"),k(Q,"class","action-button centered column svelte-iazpg1"),k(N,"id","chatbot-input"),k(N,"class","row spaced centered svelte-iazpg1"),k(c,"id","chatbot-actions"),k(c,"class","column padded spaced centered svelte-iazpg1")},m(i,u){d(i,t,u),l(t,n),l(t,s);for(let e=0;e<Z.length;e+=1)Z[e]&&Z[e].m(t,null);l(t,o),l(t,r),d(i,a,u),d(i,c,u),l(c,f),l(f,m),l(m,v),l(m,y),ne.m(m,null),l(f,z),l(f,T),l(T,q),l(T,S),l(T,C),l(T,j),l(T,E),l(f,P),l(f,O),oe.m(O,null),l(c,H),l(c,N),l(N,M),l(M,R),l(M,D),l(M,U),l(M,A),l(M,I),e[46](I),l(M,B),l(M,J),l(N,V),l(N,Y),_(Y,e[3]),l(N,G),l(N,Q),W||(K=[b(C,"click",w(e[42])),b(E,"click",w(e[43])),b(R,"click",w(ut)),b(I,"change",e[45]),b(I,"change",e[47]),b(J,"click",w(e[48])),b(Y,"input",e[49]),b(Y,"keydown",e[50]),b(Q,"click",w(e[51]))],W=!0)},p(e,n){if(128&n[0]){let i;for(X=e[7],i=0;i<X.length;i+=1){const s=Ce(e,X,i);Z[i]?Z[i].p(s,n):(Z[i]=Ze(s),Z[i].c(),Z[i].m(t,o))}for(;i<Z.length;i+=1)Z[i].d(1);Z.length=X.length}te===(te=ee(e))&&ne?ne.p(e,n):(ne.d(1),ne=te(e),ne&&(ne.c(),ne.m(m,null))),1024&n[0]&&$!==($=e[10]?"width:30%;":"width:45%;")&&k(m,"style",$),1024&n[0]&&L!==(L=e[10]?"width:30%;":"width:45%;")&&k(T,"style",L),se===(se=ie(e))&&oe?oe.p(e,n):(oe.d(1),oe=se(e),oe&&(oe.c(),oe.m(O,null))),1024&n[0]&&F!==(F=e[10]?"width:30%;":"display:none;")&&k(O,"style",F),8&n[0]&&_(Y,e[3])},d(n){n&&u(t),p(Z,n),n&&u(a),n&&u(c),ne.d(),oe.d(),e[46](null),W=!1,i(K)}}}function Ke(e){let t,n,i;function s(e,t){return e[1]&&e[1].video?rt:e[1]&&e[1].audio?ot:st}let o=s(e),r=o(e),a=e[1]&&e[1].transcript&&at(e);return{c(){t=g("div"),r.c(),n=h(),i=g("div"),a&&a.c(),k(t,"id","media-player-area"),k(t,"class","bordered svelte-iazpg1"),k(i,"id","transcript-area"),k(i,"class","column bordered spaced svelte-iazpg1")},m(e,s){d(e,t,s),r.m(t,null),d(e,n,s),d(e,i,s),a&&a.m(i,null)},p(e,n){o===(o=s(e))&&r?r.p(e,n):(r.d(1),r=o(e),r&&(r.c(),r.m(t,null))),e[1]&&e[1].transcript?a?a.p(e,n):(a=at(e),a.c(),a.m(i,null)):a&&(a.d(1),a=null)},d(e){e&&u(t),r.d(),e&&u(n),e&&u(i),a&&a.d()}}}function Xe(e){let t,n,i,s,o,r,a,c,p,f=e[55].role+"",v=e[55].content+"";return{c(){t=g("div"),n=g("p"),i=g("strong"),s=m(f),o=m(":"),r=h(),a=m(v),c=h(),k(t,"class",p=e[55].role+" padded svelte-iazpg1")},m(e,u){d(e,t,u),l(t,n),l(n,i),l(i,s),l(i,o),l(n,r),l(n,a),l(t,c)},p(e,n){128&n[0]&&f!==(f=e[55].role+"")&&y(s,f),128&n[0]&&v!==(v=e[55].content+"")&&y(a,v),128&n[0]&&p!==(p=e[55].role+" padded svelte-iazpg1")&&k(t,"class",p)},d(e){e&&u(t)}}}function Ze(e){let t,n="system"!=e[55].role&&Xe(e);return{c(){n&&n.c(),t=v()},m(e,i){n&&n.m(e,i),d(e,t,i)},p(e,i){"system"!=e[55].role?n?n.p(e,i):(n=Xe(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}function et(t){let n;return{c(){n=g("span"),n.textContent="None. Add by selecting from the feedback."},m(e,t){d(e,n,t)},p:e,d(e){e&&u(n)}}}function tt(e){let t,n,i,s,o,r,a,c,p=e[8].quote.slice(0,10)+"";return{c(){t=g("div"),n=g("span"),i=m(p),s=m("..."),o=h(),r=g("button"),r.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon svelte-iazpg1"/>',k(t,"class","suggested-message row  svelte-iazpg1")},m(u,p){d(u,t,p),l(t,n),l(n,i),l(n,s),l(t,o),l(t,r),a||(c=b(r,"click",w(e[41])),a=!0)},p(e,t){256&t[0]&&p!==(p=e[8].quote.slice(0,10)+"")&&y(i,p)},d(e){e&&u(t),a=!1,c()}}}function nt(t){return{c:e,m:e,p:e,d:e}}function it(e){let t,n,i,s,o,r,a,p,f;return{c(){t=g("span"),t.innerHTML="<strong>Attached image:</strong>",n=h(),i=g("div"),s=g("img"),r=h(),a=g("button"),a.innerHTML='<img src="./logos/delete-x-svgrepo-com.svg" alt="Remove context" class="mini-icon svelte-iazpg1"/>',c(s.src,o=e[10])||k(s,"src",o),k(s,"alt","Visual context"),x(s,"width","100%"),x(s,"height","100%"),k(i,"class","row"),x(i,"width","100%"),x(i,"height","100%")},m(o,c){d(o,t,c),d(o,n,c),d(o,i,c),l(i,s),l(i,r),l(i,a),p||(f=b(a,"click",w(e[44])),p=!0)},p(e,t){1024&t[0]&&!c(s.src,o=e[10])&&k(s,"src",o)},d(e){e&&u(t),e&&u(n),e&&u(i),p=!1,f()}}}function st(t){let n,i;return{c(){n=g("video"),n.innerHTML='<track kind="captions" src="blank.vtt" srclang="en"/>',c(n.src,i="video.mp4")||k(n,"src","video.mp4"),n.controls=!0,x(n,"width","100%"),x(n,"height","100%")},m(e,i){d(e,n,i),t[38](n)},p:e,d(e){e&&u(n),t[38](null)}}}function ot(e){let t,n;return{c(){t=g("audio"),c(t.src,n=e[1].audio)||k(t,"src",n),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(n,i){d(n,t,i),e[37](t)},p(e,i){2&i[0]&&!c(t.src,n=e[1].audio)&&k(t,"src",n)},d(n){n&&u(t),e[37](null)}}}function rt(e){let t,n,i,s;return{c(){t=g("video"),n=g("track"),k(n,"kind","captions"),c(n.src,i="blank.vtt")||k(n,"src","blank.vtt"),k(n,"srclang","en"),c(t.src,s=e[1].video)||k(t,"src",s),t.controls=!0,x(t,"width","100%"),x(t,"height","100%")},m(i,s){d(i,t,s),l(t,n),e[36](t)},p(e,n){2&n[0]&&!c(t.src,s=e[1].video)&&k(t,"src",s)},d(n){n&&u(t),e[36](null)}}}function at(e){let t,n=e[1].transcript_list,i=[];for(let t=0;t<n.length;t+=1)i[t]=ct(je(e,n,t));return{c(){t=g("p");for(let e=0;e<i.length;e+=1)i[e].c();k(t,"class","spaced padded")},m(e,n){d(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(6&s[0]){let o;for(n=e[1].transcript_list,o=0;o<n.length;o+=1){const r=je(e,n,o);i[o]?i[o].p(r,s):(i[o]=ct(r),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&u(t),p(i,e)}}}function ct(e){let t,n,s,o,r,a,c,p,f,v,w,_,x,$,z,T,q,S,C,j,E,L=e[52].start_timestamp+"",P=e[52].end_timestamp+"",O=e[52].speaker?e[52].speaker+":":"",F=e[52].dialogue+"";function H(){return e[39](e[52])}function N(){return e[40](e[52])}return{c(){t=g("span"),n=m("["),s=m(L),o=m("]"),r=m(" - "),a=g("span"),c=m("["),p=m(P),f=m("]"),v=h(),w=g("br"),_=h(),x=m(O),$=h(),z=g("span"),q=h(),S=g("br"),C=g("br"),k(t,"class","timestamp svelte-iazpg1"),k(a,"class","timestamp svelte-iazpg1"),k(z,"id",T=e[52].id),k(z,"class","svelte-iazpg1")},m(e,i){d(e,t,i),l(t,n),l(t,s),l(t,o),d(e,r,i),d(e,a,i),l(a,c),l(a,p),l(a,f),d(e,v,i),d(e,w,i),d(e,_,i),d(e,x,i),d(e,$,i),d(e,z,i),z.innerHTML=F,d(e,q,i),d(e,S,i),d(e,C,i),j||(E=[b(t,"click",H),b(a,"click",N)],j=!0)},p(t,n){e=t,2&n[0]&&L!==(L=e[52].start_timestamp+"")&&y(s,L),2&n[0]&&P!==(P=e[52].end_timestamp+"")&&y(p,P),2&n[0]&&O!==(O=e[52].speaker?e[52].speaker+":":"")&&y(x,O),2&n[0]&&F!==(F=e[52].dialogue+"")&&(z.innerHTML=F),2&n[0]&&T!==(T=e[52].id)&&k(z,"id",T)},d(e){e&&u(t),e&&u(r),e&&u(a),e&&u(v),e&&u(w),e&&u(_),e&&u(x),e&&u($),e&&u(z),e&&u(q),e&&u(S),e&&u(C),j=!1,i(E)}}}function lt(t){let n,i,s,o,r,a,c,f,m,v,w,y,_,$,z=t[15],T=[];for(let e=0;e<z.length;e+=1)T[e]=Fe(Oe(t,z,e));function q(e,t){return 0===e[6]?Ne:1===e[6]?He:void 0}let S=q(t),C=S&&S(t),j=t[16],E=[];for(let e=0;e<j.length;e+=1)E[e]=Qe(Ee(t,j,e));function L(e,t){return 0===e[5]?Ke:1===e[5]?We:void 0}let P=L(t),O=P&&P(t);return{c(){n=g("div"),i=g("div"),s=g("div"),o=g("div");for(let e=0;e<T.length;e+=1)T[e].c();r=h(),a=g("div"),C&&C.c(),c=h(),f=g("div"),m=g("div"),v=g("div");for(let e=0;e<E.length;e+=1)E[e].c();w=h(),y=g("div"),O&&O.c(),k(o,"class","tab-header svelte-iazpg1"),k(a,"class","tab-content padded svelte-iazpg1"),x(a,"overflow-y","auto"),k(s,"class","tabbed-area bordered svelte-iazpg1"),k(i,"id","left-panel"),k(i,"class","column svelte-iazpg1"),k(v,"class","tab-header svelte-iazpg1"),k(y,"class","tab-content padded column spaced  svelte-iazpg1"),k(m,"class","tabbed-area bordered svelte-iazpg1"),k(f,"id","right-panel"),k(f,"class","column  svelte-iazpg1"),k(n,"id","feedback-list-page"),k(n,"class","spaced svelte-iazpg1")},m(e,u){d(e,n,u),l(n,i),l(i,s),l(s,o);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(o,null);l(s,r),l(s,a),C&&C.m(a,null),l(n,c),l(n,f),l(f,m),l(m,v);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(v,null);l(m,w),l(m,y),O&&O.m(y,null),_||($=b(n,"window:click",t[19]),_=!0)},p(e,t){if(32832&t[0]){let n;for(z=e[15],n=0;n<z.length;n+=1){const i=Oe(e,z,n);T[n]?T[n].p(i,t):(T[n]=Fe(i),T[n].c(),T[n].m(o,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=z.length}if(S===(S=q(e))&&C?C.p(e,t):(C&&C.d(1),C=S&&S(e),C&&(C.c(),C.m(a,null))),65568&t[0]){let n;for(j=e[16],n=0;n<j.length;n+=1){const i=Ee(e,j,n);E[n]?E[n].p(i,t):(E[n]=Qe(i),E[n].c(),E[n].m(v,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=j.length}P===(P=L(e))&&O?O.p(e,t):(O&&O.d(1),O=P&&P(e),O&&(O.c(),O.m(y,null)))},i:e,o:e,d(e){e&&u(n),p(T,e),C&&C.d(),p(E,e),O&&O.d(),_=!1,$()}}}function dt(e,t=!0){e.show_paraphrased=t}const ut=async()=>{};function pt(e,t,n){let i,s,o,r,a,c,l,{feedback_list:d}=t,{recording:u}=t,p="",g=0,f=0,m=[{content:"You are an expert senior interior designer who is tasked to assist less experienced interior designers like students and junior interior designers with their work by answering their questions on a wide range of interior design topics. ",role:"system"}];function h(e){s===e&&n(4,s=null),n(0,d=d.filter((t=>t!==e))),n(0,d)}function v(e,t){n(4,s=e),t.stopPropagation()}let b=null,w=!0;function k(e){b===e?n(14,w=!w):(n(13,b=e),n(14,w=!0)),d.sort(((t,n)=>t[e]<n[e]?w?-1:1:t[e]>n[e]?w?1:-1:0)),n(0,d)}async function y(e,t=null){if(""===e.trim())return void alert("Please enter a message.");if(t){let n="\n\nHere are the pieces of feedback as context.";n+="\nF#"+t.id+': "'+t.speaker+": "+t.quote+'".',e+=n}m.push({role:"user",content:e}),n(7,m),n(0,d);let i={message:e,image_data:null};if(r){let e=await async function(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=e=>n(e),i.readAsDataURL(e)}))}(r);i.image_data=e}const s=await fetch("/message_chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok)throw new Error("Failed to send message");let o=(await s.json()).chatbot_response;m.push({role:"assistant",content:o}),n(7,m),n(0,d),console.log(d)}function _(e){o===e?alert("This feedback is already added as context."):n(8,o=e)}return e.$$set=e=>{"feedback_list"in e&&n(0,d=e.feedback_list),"recording"in e&&n(1,u=e.recording)},[d,u,i,p,s,g,f,m,o,r,a,c,l,b,w,["Critical Feedback","Positive Feedback"],["Transcript","Chatbot"],h,v,function(){n(4,s=null)},k,y,_,e=>{n(6,f=e)},()=>k("quote"),()=>k("speaker"),()=>k("done"),e=>dt(e,!1),e=>dt(e,!0),async(e,t,i)=>{n(0,t[i].positivised_quote=await async function(e,t){const n=await fetch("/positively_paraphrase_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:e,excerpt:t})});if(!n.ok)throw new Error("Failed to detect feedback");return(await n.json()).paraphrased_feedback}(e.quote,e.excerpt_reference.dialogue),d),dt(e,!0),n(0,d)},e=>_(e),e=>h(e),function(e,t){e[t].done=this.checked,n(0,d)},(e,t)=>{v(e,t),K(e)},(e,t)=>{v(e,t),K(e)},e=>n(5,g=e),function(e){S[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},function(e){S[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},function(e){S[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},e=>W(e.start_timestamp,i),e=>W(e.end_timestamp,i),()=>{n(8,o=null)},async()=>{await y("Can you explain the following feedback?",o)},async()=>{await y("Can you brainstorm the tasks to do to address the following feedback?",o)},()=>{n(10,a=null),n(9,r=null)},function(){c=this.value,n(11,c)},function(e){S[e?"unshift":"push"]((()=>{l=e,n(12,l)}))},async()=>{n(11,c=l.files),n(10,[a,r]=await async function(e){let t=e[0];if(t){if(t.type.includes("image"))return[URL.createObjectURL(t),t];alert("Please select an image file.")}else alert("No image selected.");return null}(c),a,n(9,r))},async()=>{l.click()},function(){p=this.value,n(3,p)},e=>"Enter"===e.key&&y(p,o),async()=>{await y(p,o),n(3,p="")}]}class gt extends Q{constructor(e){super(),G(this,e,pt,lt,o,{feedback_list:0,recording:1},null,[-1,-1,-1])}}function ft(e){let t,n,i,s;function o(t){e[7](t)}function r(t){e[8](t)}let a={};return void 0!==e[2]&&(a.feedback_list=e[2]),void 0!==e[1]&&(a.recording=e[1]),t=new gt({props:a}),S.push((()=>I(t,"feedback_list",o))),S.push((()=>I(t,"recording",r))),{c(){B(t.$$.fragment)},m(e,n){J(t,e,n),s=!0},p(e,s){const o={};!n&&4&s&&(n=!0,o.feedback_list=e[2],O((()=>n=!1))),!i&&2&s&&(i=!0,o.recording=e[1],O((()=>i=!1))),t.$set(o)},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){A(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function mt(e){let t,n,i,s;function o(t){e[5](t)}function r(t){e[6](t)}let a={};return void 0!==e[1]&&(a.recording=e[1]),void 0!==e[2]&&(a.feedback_list=e[2]),t=new Se({props:a}),S.push((()=>I(t,"recording",o))),S.push((()=>I(t,"feedback_list",r))),{c(){B(t.$$.fragment)},m(e,n){J(t,e,n),s=!0},p(e,s){const o={};!n&&2&s&&(n=!0,o.recording=e[1],O((()=>n=!1))),!i&&4&s&&(i=!0,o.feedback_list=e[2],O((()=>i=!1))),t.$set(o)},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){A(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function ht(e){let t,n,i,s,o;return{c(){t=g("button"),n=m("Previous"),t.disabled=i=0===e[0],k(t,"class","svelte-qf1jde")},m(i,r){d(i,t,r),l(t,n),s||(o=b(t,"click",e[4]),s=!0)},p(e,n){1&n&&i!==(i=0===e[0])&&(t.disabled=i)},d(e){e&&u(t),s=!1,o()}}}function vt(e){let t,n,i,s,o;return{c(){t=g("button"),n=m("Next"),t.disabled=i=e[0]===wt.length-1||e[2].length<=0,k(t,"class","svelte-qf1jde")},m(i,r){d(i,t,r),l(t,n),s||(o=b(t,"click",e[3]),s=!0)},p(e,n){5&n&&i!==(i=e[0]===wt.length-1||e[2].length<=0)&&(t.disabled=i)},d(e){e&&u(t),s=!1,o()}}}function bt(e){let t,n,s,o,r,a,c;const p=[mt,ft],f=[];function m(e,t){return 0===e[0]?0:1}function v(e,t){return 0==e[0]?vt:1===e[0]?ht:void 0}s=m(e),o=f[s]=p[s](e);let b=v(e),w=b&&b(e);return{c(){t=g("main"),n=g("div"),o.c(),r=h(),a=g("div"),w&&w.c(),k(n,"class","carousel-container svelte-qf1jde"),k(a,"class","navigation centered spaced bordered svelte-qf1jde")},m(e,i){d(e,t,i),l(t,n),f[s].m(n,null),l(t,r),l(t,a),w&&w.m(a,null),c=!0},p(e,[t]){let r=s;s=m(e),s===r?f[s].p(e,t):(D={r:0,c:[],p:D},A(f[r],1,1,(()=>{f[r]=null})),D.r||i(D.c),D=D.p,o=f[s],o?o.p(e,t):(o=f[s]=p[s](e),o.c()),U(o,1),o.m(n,null)),b===(b=v(e))&&w?w.p(e,t):(w&&w.d(1),w=b&&b(e),w&&(w.c(),w.m(a,null)))},i(e){c||(U(o),c=!0)},o(e){A(o),c=!1},d(e){e&&u(t),f[s].d(),w&&w.d()}}}let wt=2;function kt(e,t,n){let i=0,s={},o=[];return T((async()=>{let e=await fetch("/get_session_id",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw alert("Failed to get session id"),new Error("Failed to get session id");const t=(await e.json()).session_id;alert("Session ID: "+t)})),[i,s,o,function(){i<wt-1&&n(0,i+=1)},function(){i>0&&n(0,i-=1)},function(e){s=e,n(1,s)},function(e){o=e,n(2,o)},function(e){o=e,n(2,o)},function(e){s=e,n(1,s)}]}return new class extends Q{constructor(e){super(),G(this,e,kt,bt,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
